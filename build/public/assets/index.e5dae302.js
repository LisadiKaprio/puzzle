const xa=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};xa();function Fo(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}function Mt(e){if(te(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Ve(s)?Oa(s):Mt(s);if(o)for(const i in o)t[i]=o[i]}return t}else{if(Ve(e))return e;if(Ae(e))return e}}const Ca=/;(?![^(]*\))/g,Sa=/:([^]+)/,Aa=/\/\*.*?\*\//gs;function Oa(e){const t={};return e.replace(Aa,"").split(Ca).forEach(n=>{if(n){const s=n.split(Sa);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Tt(e){let t="";if(Ve(e))t=e;else if(te(e))for(let n=0;n<e.length;n++){const s=Tt(e[n]);s&&(t+=s+" ")}else if(Ae(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ra="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ka=Fo(Ra);function Il(e){return!!e||e===""}function Na(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=cn(e[s],t[s]);return n}function cn(e,t){if(e===t)return!0;let n=ki(e),s=ki(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=qn(e),s=qn(t),n||s)return e===t;if(n=te(e),s=te(t),n||s)return n&&s?Na(e,t):!1;if(n=Ae(e),s=Ae(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const l in e){const r=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(r&&!u||!r&&u||!cn(e[l],t[l]))return!1}}return String(e)===String(t)}function jo(e,t){return e.findIndex(n=>cn(n,t))}const ee=e=>Ve(e)?e:e==null?"":te(e)||Ae(e)&&(e.toString===Bl||!ae(e.toString))?JSON.stringify(e,Dl,2):String(e),Dl=(e,t)=>t&&t.__v_isRef?Dl(e,t.value):En(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:Nn(t)?{[`Set(${t.size})`]:[...t.values()]}:Ae(t)&&!te(t)&&!zl(t)?String(t):t,Oe={},wn=[],pt=()=>{},Ma=()=>!1,Ua=/^on[^a-z]/,Vs=e=>Ua.test(e),Wo=e=>e.startsWith("onUpdate:"),Qe=Object.assign,Ko=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},La=Object.prototype.hasOwnProperty,ge=(e,t)=>La.call(e,t),te=Array.isArray,En=e=>is(e)==="[object Map]",Nn=e=>is(e)==="[object Set]",ki=e=>is(e)==="[object Date]",ae=e=>typeof e=="function",Ve=e=>typeof e=="string",qn=e=>typeof e=="symbol",Ae=e=>e!==null&&typeof e=="object",Vl=e=>Ae(e)&&ae(e.then)&&ae(e.catch),Bl=Object.prototype.toString,is=e=>Bl.call(e),$a=e=>is(e).slice(8,-1),zl=e=>is(e)==="[object Object]",Yo=e=>Ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ys=Fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ia=/-(\w)/g,xt=Bs(e=>e.replace(Ia,(t,n)=>n?n.toUpperCase():"")),Da=/\B([A-Z])/g,dn=Bs(e=>e.replace(Da,"-$1").toLowerCase()),zs=Bs(e=>e.charAt(0).toUpperCase()+e.slice(1)),eo=Bs(e=>e?`on${zs(e)}`:""),Qn=(e,t)=>!Object.is(e,t),ws=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ss=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Xn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ni;const Va=()=>Ni||(Ni=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let wt;class Ba{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=wt,!t&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=wt;try{return wt=this,t()}finally{wt=n}}}on(){wt=this}off(){wt=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}}}function za(e,t=wt){t&&t.active&&t.effects.push(e)}const Zo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Gl=e=>(e.w&Wt)>0,Hl=e=>(e.n&Wt)>0,Ga=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Wt},Ha=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];Gl(o)&&!Hl(o)?o.delete(e):t[n++]=o,o.w&=~Wt,o.n&=~Wt}t.length=n}},ho=new WeakMap;let Bn=0,Wt=1;const po=30;let ft;const ln=Symbol(""),go=Symbol("");class qo{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,za(this,s)}run(){if(!this.active)return this.fn();let t=ft,n=Ft;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ft,ft=this,Ft=!0,Wt=1<<++Bn,Bn<=po?Ga(this):Mi(this),this.fn()}finally{Bn<=po&&Ha(this),Wt=1<<--Bn,ft=this.parent,Ft=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ft===this?this.deferStop=!0:this.active&&(Mi(this),this.onStop&&this.onStop(),this.active=!1)}}function Mi(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ft=!0;const Fl=[];function Mn(){Fl.push(Ft),Ft=!1}function Un(){const e=Fl.pop();Ft=e===void 0?!0:e}function it(e,t,n){if(Ft&&ft){let s=ho.get(e);s||ho.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=Zo()),jl(o)}}function jl(e,t){let n=!1;Bn<=po?Hl(e)||(e.n|=Wt,n=!Gl(e)):n=!e.has(ft),n&&(e.add(ft),ft.deps.push(e))}function Ut(e,t,n,s,o,i){const l=ho.get(e);if(!l)return;let r=[];if(t==="clear")r=[...l.values()];else if(n==="length"&&te(e)){const u=Xn(s);l.forEach((c,f)=>{(f==="length"||f>=u)&&r.push(c)})}else switch(n!==void 0&&r.push(l.get(n)),t){case"add":te(e)?Yo(n)&&r.push(l.get("length")):(r.push(l.get(ln)),En(e)&&r.push(l.get(go)));break;case"delete":te(e)||(r.push(l.get(ln)),En(e)&&r.push(l.get(go)));break;case"set":En(e)&&r.push(l.get(ln));break}if(r.length===1)r[0]&&mo(r[0]);else{const u=[];for(const c of r)c&&u.push(...c);mo(Zo(u))}}function mo(e,t){const n=te(e)?e:[...e];for(const s of n)s.computed&&Ui(s);for(const s of n)s.computed||Ui(s)}function Ui(e,t){(e!==ft||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Fa=Fo("__proto__,__v_isRef,__isVue"),Wl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(qn)),ja=Qo(),Wa=Qo(!1,!0),Ka=Qo(!0),Li=Ya();function Ya(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=be(this);for(let i=0,l=this.length;i<l;i++)it(s,"get",i+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(be)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Mn();const s=be(this)[t].apply(this,n);return Un(),s}}),e}function Qo(e=!1,t=!1){return function(s,o,i){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&i===(e?t?cu:Ql:t?ql:Zl).get(s))return s;const l=te(s);if(!e&&l&&ge(Li,o))return Reflect.get(Li,o,i);const r=Reflect.get(s,o,i);return(qn(o)?Wl.has(o):Fa(o))||(e||it(s,"get",o),t)?r:Ke(r)?l&&Yo(o)?r:r.value:Ae(r)?e?Xl(r):ls(r):r}}const Za=Kl(),qa=Kl(!0);function Kl(e=!1){return function(n,s,o,i){let l=n[s];if(Cn(l)&&Ke(l)&&!Ke(o))return!1;if(!e&&(!As(o)&&!Cn(o)&&(l=be(l),o=be(o)),!te(n)&&Ke(l)&&!Ke(o)))return l.value=o,!0;const r=te(n)&&Yo(s)?Number(s)<n.length:ge(n,s),u=Reflect.set(n,s,o,i);return n===be(i)&&(r?Qn(o,l)&&Ut(n,"set",s,o):Ut(n,"add",s,o)),u}}function Qa(e,t){const n=ge(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Ut(e,"delete",t,void 0),s}function Xa(e,t){const n=Reflect.has(e,t);return(!qn(t)||!Wl.has(t))&&it(e,"has",t),n}function Ja(e){return it(e,"iterate",te(e)?"length":ln),Reflect.ownKeys(e)}const Yl={get:ja,set:Za,deleteProperty:Qa,has:Xa,ownKeys:Ja},eu={get:Ka,set(e,t){return!0},deleteProperty(e,t){return!0}},tu=Qe({},Yl,{get:Wa,set:qa}),Xo=e=>e,Gs=e=>Reflect.getPrototypeOf(e);function as(e,t,n=!1,s=!1){e=e.__v_raw;const o=be(e),i=be(t);n||(t!==i&&it(o,"get",t),it(o,"get",i));const{has:l}=Gs(o),r=s?Xo:n?ti:Jn;if(l.call(o,t))return r(e.get(t));if(l.call(o,i))return r(e.get(i));e!==o&&e.get(t)}function us(e,t=!1){const n=this.__v_raw,s=be(n),o=be(e);return t||(e!==o&&it(s,"has",e),it(s,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function cs(e,t=!1){return e=e.__v_raw,!t&&it(be(e),"iterate",ln),Reflect.get(e,"size",e)}function $i(e){e=be(e);const t=be(this);return Gs(t).has.call(t,e)||(t.add(e),Ut(t,"add",e,e)),this}function Ii(e,t){t=be(t);const n=be(this),{has:s,get:o}=Gs(n);let i=s.call(n,e);i||(e=be(e),i=s.call(n,e));const l=o.call(n,e);return n.set(e,t),i?Qn(t,l)&&Ut(n,"set",e,t):Ut(n,"add",e,t),this}function Di(e){const t=be(this),{has:n,get:s}=Gs(t);let o=n.call(t,e);o||(e=be(e),o=n.call(t,e)),s&&s.call(t,e);const i=t.delete(e);return o&&Ut(t,"delete",e,void 0),i}function Vi(){const e=be(this),t=e.size!==0,n=e.clear();return t&&Ut(e,"clear",void 0,void 0),n}function fs(e,t){return function(s,o){const i=this,l=i.__v_raw,r=be(l),u=t?Xo:e?ti:Jn;return!e&&it(r,"iterate",ln),l.forEach((c,f)=>s.call(o,u(c),u(f),i))}}function ds(e,t,n){return function(...s){const o=this.__v_raw,i=be(o),l=En(i),r=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,c=o[e](...s),f=n?Xo:t?ti:Jn;return!t&&it(i,"iterate",u?go:ln),{next(){const{value:p,done:h}=c.next();return h?{value:p,done:h}:{value:r?[f(p[0]),f(p[1])]:f(p),done:h}},[Symbol.iterator](){return this}}}}function It(e){return function(...t){return e==="delete"?!1:this}}function nu(){const e={get(i){return as(this,i)},get size(){return cs(this)},has:us,add:$i,set:Ii,delete:Di,clear:Vi,forEach:fs(!1,!1)},t={get(i){return as(this,i,!1,!0)},get size(){return cs(this)},has:us,add:$i,set:Ii,delete:Di,clear:Vi,forEach:fs(!1,!0)},n={get(i){return as(this,i,!0)},get size(){return cs(this,!0)},has(i){return us.call(this,i,!0)},add:It("add"),set:It("set"),delete:It("delete"),clear:It("clear"),forEach:fs(!0,!1)},s={get(i){return as(this,i,!0,!0)},get size(){return cs(this,!0)},has(i){return us.call(this,i,!0)},add:It("add"),set:It("set"),delete:It("delete"),clear:It("clear"),forEach:fs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ds(i,!1,!1),n[i]=ds(i,!0,!1),t[i]=ds(i,!1,!0),s[i]=ds(i,!0,!0)}),[e,n,t,s]}const[su,ou,iu,lu]=nu();function Jo(e,t){const n=t?e?lu:iu:e?ou:su;return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(ge(n,o)&&o in s?n:s,o,i)}const ru={get:Jo(!1,!1)},au={get:Jo(!1,!0)},uu={get:Jo(!0,!1)},Zl=new WeakMap,ql=new WeakMap,Ql=new WeakMap,cu=new WeakMap;function fu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function du(e){return e.__v_skip||!Object.isExtensible(e)?0:fu($a(e))}function ls(e){return Cn(e)?e:ei(e,!1,Yl,ru,Zl)}function hu(e){return ei(e,!1,tu,au,ql)}function Xl(e){return ei(e,!0,eu,uu,Ql)}function ei(e,t,n,s,o){if(!Ae(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const l=du(e);if(l===0)return e;const r=new Proxy(e,l===2?s:n);return o.set(e,r),r}function bn(e){return Cn(e)?bn(e.__v_raw):!!(e&&e.__v_isReactive)}function Cn(e){return!!(e&&e.__v_isReadonly)}function As(e){return!!(e&&e.__v_isShallow)}function Jl(e){return bn(e)||Cn(e)}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function er(e){return Ss(e,"__v_skip",!0),e}const Jn=e=>Ae(e)?ls(e):e,ti=e=>Ae(e)?Xl(e):e;function tr(e){Ft&&ft&&(e=be(e),jl(e.dep||(e.dep=Zo())))}function nr(e,t){e=be(e),e.dep&&mo(e.dep)}function Ke(e){return!!(e&&e.__v_isRef===!0)}function K(e){return sr(e,!1)}function pu(e){return sr(e,!0)}function sr(e,t){return Ke(e)?e:new gu(e,t)}class gu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:be(t),this._value=n?t:Jn(t)}get value(){return tr(this),this._value}set value(t){const n=this.__v_isShallow||As(t)||Cn(t);t=n?t:be(t),Qn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Jn(t),nr(this))}}function ue(e){return Ke(e)?e.value:e}const mu={get:(e,t,n)=>ue(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Ke(o)&&!Ke(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function or(e){return bn(e)?e:new Proxy(e,mu)}function _u(e){const t=te(e)?new Array(e.length):{};for(const n in e)t[n]=yu(e,n);return t}class vu{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function yu(e,t,n){const s=e[t];return Ke(s)?s:new vu(e,t,n)}var ir;class wu{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[ir]=!1,this._dirty=!0,this.effect=new qo(t,()=>{this._dirty||(this._dirty=!0,nr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=be(this);return tr(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}ir="__v_isReadonly";function Eu(e,t,n=!1){let s,o;const i=ae(e);return i?(s=e,o=pt):(s=e.get,o=e.set),new wu(s,o,i||!o,n)}function jt(e,t,n,s){let o;try{o=s?e(...s):e()}catch(i){Hs(i,t,n)}return o}function at(e,t,n,s){if(ae(e)){const i=jt(e,t,n,s);return i&&Vl(i)&&i.catch(l=>{Hs(l,t,n)}),i}const o=[];for(let i=0;i<e.length;i++)o.push(at(e[i],t,n,s));return o}function Hs(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const l=t.proxy,r=n;for(;i;){const c=i.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,r)===!1)return}i=i.parent}const u=t.appContext.config.errorHandler;if(u){jt(u,null,10,[e,l,r]);return}}bu(e,n,o,s)}function bu(e,t,n,s=!0){console.error(e)}let es=!1,_o=!1;const qe=[];let Pt=0;const Pn=[];let Ot=null,en=0;const lr=Promise.resolve();let ni=null;function si(e){const t=ni||lr;return e?t.then(this?e.bind(this):e):t}function Pu(e){let t=Pt+1,n=qe.length;for(;t<n;){const s=t+n>>>1;ts(qe[s])<e?t=s+1:n=s}return t}function oi(e){(!qe.length||!qe.includes(e,es&&e.allowRecurse?Pt+1:Pt))&&(e.id==null?qe.push(e):qe.splice(Pu(e.id),0,e),rr())}function rr(){!es&&!_o&&(_o=!0,ni=lr.then(ur))}function Tu(e){const t=qe.indexOf(e);t>Pt&&qe.splice(t,1)}function xu(e){te(e)?Pn.push(...e):(!Ot||!Ot.includes(e,e.allowRecurse?en+1:en))&&Pn.push(e),rr()}function Bi(e,t=es?Pt+1:0){for(;t<qe.length;t++){const n=qe[t];n&&n.pre&&(qe.splice(t,1),t--,n())}}function ar(e){if(Pn.length){const t=[...new Set(Pn)];if(Pn.length=0,Ot){Ot.push(...t);return}for(Ot=t,Ot.sort((n,s)=>ts(n)-ts(s)),en=0;en<Ot.length;en++)Ot[en]();Ot=null,en=0}}const ts=e=>e.id==null?1/0:e.id,Cu=(e,t)=>{const n=ts(e)-ts(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function ur(e){_o=!1,es=!0,qe.sort(Cu);const t=pt;try{for(Pt=0;Pt<qe.length;Pt++){const n=qe[Pt];n&&n.active!==!1&&jt(n,null,14)}}finally{Pt=0,qe.length=0,ar(),es=!1,ni=null,(qe.length||Pn.length)&&ur()}}function Su(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Oe;let o=n;const i=t.startsWith("update:"),l=i&&t.slice(7);if(l&&l in s){const f=`${l==="modelValue"?"model":l}Modifiers`,{number:p,trim:h}=s[f]||Oe;h&&(o=n.map(_=>Ve(_)?_.trim():_)),p&&(o=n.map(Xn))}let r,u=s[r=eo(t)]||s[r=eo(xt(t))];!u&&i&&(u=s[r=eo(dn(t))]),u&&at(u,e,6,o);const c=s[r+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,at(c,e,6,o)}}function cr(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let l={},r=!1;if(!ae(e)){const u=c=>{const f=cr(c,t,!0);f&&(r=!0,Qe(l,f))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!r?(Ae(e)&&s.set(e,null),null):(te(i)?i.forEach(u=>l[u]=null):Qe(l,i),Ae(e)&&s.set(e,l),l)}function Fs(e,t){return!e||!Vs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,dn(t))||ge(e,t))}let Ye=null,fr=null;function Os(e){const t=Ye;return Ye=e,fr=e&&e.type.__scopeId||null,t}function $e(e,t=Ye,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&qi(-1);const i=Os(t);let l;try{l=e(...o)}finally{Os(i),s._d&&qi(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function to(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:i,propsOptions:[l],slots:r,attrs:u,emit:c,render:f,renderCache:p,data:h,setupState:_,ctx:C,inheritAttrs:E}=e;let A,v;const m=Os(e);try{if(n.shapeFlag&4){const x=o||s;A=bt(f.call(x,x,p,i,_,h,C)),v=u}else{const x=t;A=bt(x.length>1?x(i,{attrs:u,slots:r,emit:c}):x(i,null)),v=t.props?u:Au(u)}}catch(x){Wn.length=0,Hs(x,e,1),A=N(ut)}let w=A;if(v&&E!==!1){const x=Object.keys(v),{shapeFlag:F}=w;x.length&&F&7&&(l&&x.some(Wo)&&(v=Ou(v,l)),w=Kt(w,v))}return n.dirs&&(w=Kt(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),A=w,Os(m),A}const Au=e=>{let t;for(const n in e)(n==="class"||n==="style"||Vs(n))&&((t||(t={}))[n]=e[n]);return t},Ou=(e,t)=>{const n={};for(const s in e)(!Wo(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Ru(e,t,n){const{props:s,children:o,component:i}=e,{props:l,children:r,patchFlag:u}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?zi(s,l,c):!!l;if(u&8){const f=t.dynamicProps;for(let p=0;p<f.length;p++){const h=f[p];if(l[h]!==s[h]&&!Fs(c,h))return!0}}}else return(o||r)&&(!r||!r.$stable)?!0:s===l?!1:s?l?zi(s,l,c):!0:!!l;return!1}function zi(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Fs(n,i))return!0}return!1}function ku({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Nu=e=>e.__isSuspense;function Mu(e,t){t&&t.pendingBranch?te(e)?t.effects.push(...e):t.effects.push(e):xu(e)}function Es(e,t){if(Ge){let n=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===n&&(n=Ge.provides=Object.create(s)),n[e]=t}}function gt(e,t,n=!1){const s=Ge||Ye;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&ae(t)?t.call(s.proxy):t}}const hs={};function ze(e,t,n){return dr(e,t,n)}function dr(e,t,{immediate:n,deep:s,flush:o,onTrack:i,onTrigger:l}=Oe){const r=Ge;let u,c=!1,f=!1;if(Ke(e)?(u=()=>e.value,c=As(e)):bn(e)?(u=()=>e,s=!0):te(e)?(f=!0,c=e.some(w=>bn(w)||As(w)),u=()=>e.map(w=>{if(Ke(w))return w.value;if(bn(w))return on(w);if(ae(w))return jt(w,r,2)})):ae(e)?t?u=()=>jt(e,r,2):u=()=>{if(!(r&&r.isUnmounted))return p&&p(),at(e,r,3,[h])}:u=pt,t&&s){const w=u;u=()=>on(w())}let p,h=w=>{p=v.onStop=()=>{jt(w,r,4)}},_;if(ss)if(h=pt,t?n&&at(t,r,3,[u(),f?[]:void 0,h]):u(),o==="sync"){const w=Oc();_=w.__watcherHandles||(w.__watcherHandles=[])}else return pt;let C=f?new Array(e.length).fill(hs):hs;const E=()=>{if(!!v.active)if(t){const w=v.run();(s||c||(f?w.some((x,F)=>Qn(x,C[F])):Qn(w,C)))&&(p&&p(),at(t,r,3,[w,C===hs?void 0:f&&C[0]===hs?[]:C,h]),C=w)}else v.run()};E.allowRecurse=!!t;let A;o==="sync"?A=E:o==="post"?A=()=>st(E,r&&r.suspense):(E.pre=!0,r&&(E.id=r.uid),A=()=>oi(E));const v=new qo(u,A);t?n?E():C=v.run():o==="post"?st(v.run.bind(v),r&&r.suspense):v.run();const m=()=>{v.stop(),r&&r.scope&&Ko(r.scope.effects,v)};return _&&_.push(m),m}function Uu(e,t,n){const s=this.proxy,o=Ve(e)?e.includes(".")?hr(s,e):()=>s[e]:e.bind(s,s);let i;ae(t)?i=t:(i=t.handler,n=t);const l=Ge;Sn(this);const r=dr(o,i.bind(s),n);return l?Sn(l):rn(),r}function hr(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function on(e,t){if(!Ae(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ke(e))on(e.value,t);else if(te(e))for(let n=0;n<e.length;n++)on(e[n],t);else if(Nn(e)||En(e))e.forEach(n=>{on(n,t)});else if(zl(e))for(const n in e)on(e[n],t);return e}function Lu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xe(()=>{e.isMounted=!0}),ii(()=>{e.isUnmounting=!0}),e}const lt=[Function,Array],$u={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:lt,onEnter:lt,onAfterEnter:lt,onEnterCancelled:lt,onBeforeLeave:lt,onLeave:lt,onAfterLeave:lt,onLeaveCancelled:lt,onBeforeAppear:lt,onAppear:lt,onAfterAppear:lt,onAppearCancelled:lt},setup(e,{slots:t}){const n=Ec(),s=Lu();let o;return()=>{const i=t.default&&gr(t.default(),!0);if(!i||!i.length)return;let l=i[0];if(i.length>1){for(const E of i)if(E.type!==ut){l=E;break}}const r=be(e),{mode:u}=r;if(s.isLeaving)return no(l);const c=Gi(l);if(!c)return no(l);const f=vo(c,r,s,n);yo(c,f);const p=n.subTree,h=p&&Gi(p);let _=!1;const{getTransitionKey:C}=c.type;if(C){const E=C();o===void 0?o=E:E!==o&&(o=E,_=!0)}if(h&&h.type!==ut&&(!tn(c,h)||_)){const E=vo(h,r,s,n);if(yo(h,E),u==="out-in")return s.isLeaving=!0,E.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&n.update()},no(l);u==="in-out"&&c.type!==ut&&(E.delayLeave=(A,v,m)=>{const w=pr(s,h);w[String(h.key)]=h,A._leaveCb=()=>{v(),A._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=m})}return l}}},Iu=$u;function pr(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function vo(e,t,n,s){const{appear:o,mode:i,persisted:l=!1,onBeforeEnter:r,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:p,onLeave:h,onAfterLeave:_,onLeaveCancelled:C,onBeforeAppear:E,onAppear:A,onAfterAppear:v,onAppearCancelled:m}=t,w=String(e.key),x=pr(n,e),F=(D,ie)=>{D&&at(D,s,9,ie)},R=(D,ie)=>{const Q=ie[1];F(D,ie),te(D)?D.every(X=>X.length<=1)&&Q():D.length<=1&&Q()},Y={mode:i,persisted:l,beforeEnter(D){let ie=r;if(!n.isMounted)if(o)ie=E||r;else return;D._leaveCb&&D._leaveCb(!0);const Q=x[w];Q&&tn(e,Q)&&Q.el._leaveCb&&Q.el._leaveCb(),F(ie,[D])},enter(D){let ie=u,Q=c,X=f;if(!n.isMounted)if(o)ie=A||u,Q=v||c,X=m||f;else return;let V=!1;const q=D._enterCb=le=>{V||(V=!0,le?F(X,[D]):F(Q,[D]),Y.delayedLeave&&Y.delayedLeave(),D._enterCb=void 0)};ie?R(ie,[D,q]):q()},leave(D,ie){const Q=String(e.key);if(D._enterCb&&D._enterCb(!0),n.isUnmounting)return ie();F(p,[D]);let X=!1;const V=D._leaveCb=q=>{X||(X=!0,ie(),q?F(C,[D]):F(_,[D]),D._leaveCb=void 0,x[Q]===e&&delete x[Q])};x[Q]=e,h?R(h,[D,V]):V()},clone(D){return vo(D,t,n,s)}};return Y}function no(e){if(js(e))return e=Kt(e),e.children=null,e}function Gi(e){return js(e)?e.children?e.children[0]:void 0:e}function yo(e,t){e.shapeFlag&6&&e.component?yo(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function gr(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let l=e[i];const r=n==null?l.key:String(n)+String(l.key!=null?l.key:i);l.type===pe?(l.patchFlag&128&&o++,s=s.concat(gr(l.children,t,r))):(t||l.type!==ut)&&s.push(r!=null?Kt(l,{key:r}):l)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function me(e){return ae(e)?{setup:e,name:e.name}:e}const Fn=e=>!!e.type.__asyncLoader,js=e=>e.type.__isKeepAlive;function Du(e,t){mr(e,"a",t)}function Vu(e,t){mr(e,"da",t)}function mr(e,t,n=Ge){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ws(t,s,n),n){let o=n.parent;for(;o&&o.parent;)js(o.parent.vnode)&&Bu(s,t,n,o),o=o.parent}}function Bu(e,t,n,s){const o=Ws(t,e,s,!0);Ln(()=>{Ko(s[t],o)},n)}function Ws(e,t,n=Ge,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...l)=>{if(n.isUnmounted)return;Mn(),Sn(n);const r=at(t,n,e,l);return rn(),Un(),r});return s?o.unshift(i):o.push(i),i}}const Lt=e=>(t,n=Ge)=>(!ss||e==="sp")&&Ws(e,(...s)=>t(...s),n),zu=Lt("bm"),Xe=Lt("m"),Gu=Lt("bu"),Hu=Lt("u"),ii=Lt("bum"),Ln=Lt("um"),Fu=Lt("sp"),ju=Lt("rtg"),Wu=Lt("rtc");function Ku(e,t=Ge){Ws("ec",e,t)}function Ce(e,t){const n=Ye;if(n===null)return e;const s=Zs(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[l,r,u,c=Oe]=t[i];l&&(ae(l)&&(l={mounted:l,updated:l}),l.deep&&on(r),o.push({dir:l,instance:s,value:r,oldValue:void 0,arg:u,modifiers:c}))}return e}function Zt(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let l=0;l<o.length;l++){const r=o[l];i&&(r.oldValue=i[l].value);let u=r.dir[s];u&&(Mn(),at(u,n,8,[e.el,r,e,t]),Un())}}const _r="components";function Be(e,t){return Zu(_r,e,!0,t)||e}const Yu=Symbol();function Zu(e,t,n=!0,s=!1){const o=Ye||Ge;if(o){const i=o.type;if(e===_r){const r=Cc(i,!1);if(r&&(r===t||r===xt(t)||r===zs(xt(t))))return i}const l=Hi(o[e]||i[e],t)||Hi(o.appContext[e],t);return!l&&s?i:l}}function Hi(e,t){return e&&(e[t]||e[xt(t)]||e[zs(xt(t))])}function Ze(e,t,n,s){let o;const i=n&&n[s];if(te(e)||Ve(e)){o=new Array(e.length);for(let l=0,r=e.length;l<r;l++)o[l]=t(e[l],l,void 0,i&&i[l])}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,i&&i[l])}else if(Ae(e))if(e[Symbol.iterator])o=Array.from(e,(l,r)=>t(l,r,void 0,i&&i[r]));else{const l=Object.keys(e);o=new Array(l.length);for(let r=0,u=l.length;r<u;r++){const c=l[r];o[r]=t(e[c],c,r,i&&i[r])}}else o=[];return n&&(n[s]=o),o}function vr(e,t,n={},s,o){if(Ye.isCE||Ye.parent&&Fn(Ye.parent)&&Ye.parent.isCE)return t!=="default"&&(n.name=t),N("slot",n,s&&s());let i=e[t];i&&i._c&&(i._d=!1),S();const l=i&&yr(i(n)),r=ve(pe,{key:n.key||l&&l.key||`_${t}`},l||(s?s():[]),l&&e._===1?64:-2);return!o&&r.scopeId&&(r.slotScopeIds=[r.scopeId+"-s"]),i&&i._c&&(i._d=!0),r}function yr(e){return e.some(t=>ks(t)?!(t.type===ut||t.type===pe&&!yr(t.children)):!0)?e:null}const wo=e=>e?Rr(e)?Zs(e)||e.proxy:wo(e.parent):null,jn=Qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wo(e.parent),$root:e=>wo(e.root),$emit:e=>e.emit,$options:e=>li(e),$forceUpdate:e=>e.f||(e.f=()=>oi(e.update)),$nextTick:e=>e.n||(e.n=si.bind(e.proxy)),$watch:e=>Uu.bind(e)}),so=(e,t)=>e!==Oe&&!e.__isScriptSetup&&ge(e,t),qu={get({_:e},t){const{ctx:n,setupState:s,data:o,props:i,accessCache:l,type:r,appContext:u}=e;let c;if(t[0]!=="$"){const _=l[t];if(_!==void 0)switch(_){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(so(s,t))return l[t]=1,s[t];if(o!==Oe&&ge(o,t))return l[t]=2,o[t];if((c=e.propsOptions[0])&&ge(c,t))return l[t]=3,i[t];if(n!==Oe&&ge(n,t))return l[t]=4,n[t];Eo&&(l[t]=0)}}const f=jn[t];let p,h;if(f)return t==="$attrs"&&it(e,"get",t),f(e);if((p=r.__cssModules)&&(p=p[t]))return p;if(n!==Oe&&ge(n,t))return l[t]=4,n[t];if(h=u.config.globalProperties,ge(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return so(o,t)?(o[t]=n,!0):s!==Oe&&ge(s,t)?(s[t]=n,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i}},l){let r;return!!n[l]||e!==Oe&&ge(e,l)||so(t,l)||(r=i[0])&&ge(r,l)||ge(s,l)||ge(jn,l)||ge(o.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ge(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Eo=!0;function Qu(e){const t=li(e),n=e.proxy,s=e.ctx;Eo=!1,t.beforeCreate&&Fi(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:l,watch:r,provide:u,inject:c,created:f,beforeMount:p,mounted:h,beforeUpdate:_,updated:C,activated:E,deactivated:A,beforeDestroy:v,beforeUnmount:m,destroyed:w,unmounted:x,render:F,renderTracked:R,renderTriggered:Y,errorCaptured:D,serverPrefetch:ie,expose:Q,inheritAttrs:X,components:V,directives:q,filters:le}=t;if(c&&Xu(c,s,null,e.appContext.config.unwrapInjectedRef),l)for(const ye in l){const Pe=l[ye];ae(Pe)&&(s[ye]=Pe.bind(n))}if(o){const ye=o.call(n,n);Ae(ye)&&(e.data=ls(ye))}if(Eo=!0,i)for(const ye in i){const Pe=i[ye],Fe=ae(Pe)?Pe.bind(n,n):ae(Pe.get)?Pe.get.bind(n,n):pt,_t=!ae(Pe)&&ae(Pe.set)?Pe.set.bind(n):pt,Je=fe({get:Fe,set:_t});Object.defineProperty(s,ye,{enumerable:!0,configurable:!0,get:()=>Je.value,set:je=>Je.value=je})}if(r)for(const ye in r)wr(r[ye],s,n,ye);if(u){const ye=ae(u)?u.call(n):u;Reflect.ownKeys(ye).forEach(Pe=>{Es(Pe,ye[Pe])})}f&&Fi(f,e,"c");function de(ye,Pe){te(Pe)?Pe.forEach(Fe=>ye(Fe.bind(n))):Pe&&ye(Pe.bind(n))}if(de(zu,p),de(Xe,h),de(Gu,_),de(Hu,C),de(Du,E),de(Vu,A),de(Ku,D),de(Wu,R),de(ju,Y),de(ii,m),de(Ln,x),de(Fu,ie),te(Q))if(Q.length){const ye=e.exposed||(e.exposed={});Q.forEach(Pe=>{Object.defineProperty(ye,Pe,{get:()=>n[Pe],set:Fe=>n[Pe]=Fe})})}else e.exposed||(e.exposed={});F&&e.render===pt&&(e.render=F),X!=null&&(e.inheritAttrs=X),V&&(e.components=V),q&&(e.directives=q)}function Xu(e,t,n=pt,s=!1){te(e)&&(e=bo(e));for(const o in e){const i=e[o];let l;Ae(i)?"default"in i?l=gt(i.from||o,i.default,!0):l=gt(i.from||o):l=gt(i),Ke(l)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:r=>l.value=r}):t[o]=l}}function Fi(e,t,n){at(te(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function wr(e,t,n,s){const o=s.includes(".")?hr(n,s):()=>n[s];if(Ve(e)){const i=t[e];ae(i)&&ze(o,i)}else if(ae(e))ze(o,e.bind(n));else if(Ae(e))if(te(e))e.forEach(i=>wr(i,t,n,s));else{const i=ae(e.handler)?e.handler.bind(n):t[e.handler];ae(i)&&ze(o,i,e)}}function li(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:l}}=e.appContext,r=i.get(t);let u;return r?u=r:!o.length&&!n&&!s?u=t:(u={},o.length&&o.forEach(c=>Rs(u,c,l,!0)),Rs(u,t,l)),Ae(t)&&i.set(t,u),u}function Rs(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&Rs(e,i,n,!0),o&&o.forEach(l=>Rs(e,l,n,!0));for(const l in t)if(!(s&&l==="expose")){const r=Ju[l]||n&&n[l];e[l]=r?r(e[l],t[l]):t[l]}return e}const Ju={data:ji,props:Qt,emits:Qt,methods:Qt,computed:Qt,beforeCreate:tt,created:tt,beforeMount:tt,mounted:tt,beforeUpdate:tt,updated:tt,beforeDestroy:tt,beforeUnmount:tt,destroyed:tt,unmounted:tt,activated:tt,deactivated:tt,errorCaptured:tt,serverPrefetch:tt,components:Qt,directives:Qt,watch:tc,provide:ji,inject:ec};function ji(e,t){return t?e?function(){return Qe(ae(e)?e.call(this,this):e,ae(t)?t.call(this,this):t)}:t:e}function ec(e,t){return Qt(bo(e),bo(t))}function bo(e){if(te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function tt(e,t){return e?[...new Set([].concat(e,t))]:t}function Qt(e,t){return e?Qe(Qe(Object.create(null),e),t):t}function tc(e,t){if(!e)return t;if(!t)return e;const n=Qe(Object.create(null),e);for(const s in t)n[s]=tt(e[s],t[s]);return n}function nc(e,t,n,s=!1){const o={},i={};Ss(i,Ys,1),e.propsDefaults=Object.create(null),Er(e,t,o,i);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);n?e.props=s?o:hu(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function sc(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:l}}=e,r=be(o),[u]=e.propsOptions;let c=!1;if((s||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let p=0;p<f.length;p++){let h=f[p];if(Fs(e.emitsOptions,h))continue;const _=t[h];if(u)if(ge(i,h))_!==i[h]&&(i[h]=_,c=!0);else{const C=xt(h);o[C]=Po(u,r,C,_,e,!1)}else _!==i[h]&&(i[h]=_,c=!0)}}}else{Er(e,t,o,i)&&(c=!0);let f;for(const p in r)(!t||!ge(t,p)&&((f=dn(p))===p||!ge(t,f)))&&(u?n&&(n[p]!==void 0||n[f]!==void 0)&&(o[p]=Po(u,r,p,void 0,e,!0)):delete o[p]);if(i!==r)for(const p in i)(!t||!ge(t,p)&&!0)&&(delete i[p],c=!0)}c&&Ut(e,"set","$attrs")}function Er(e,t,n,s){const[o,i]=e.propsOptions;let l=!1,r;if(t)for(let u in t){if(ys(u))continue;const c=t[u];let f;o&&ge(o,f=xt(u))?!i||!i.includes(f)?n[f]=c:(r||(r={}))[f]=c:Fs(e.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,l=!0)}if(i){const u=be(n),c=r||Oe;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Po(o,u,p,c[p],e,!ge(c,p))}}return l}function Po(e,t,n,s,o,i){const l=e[n];if(l!=null){const r=ge(l,"default");if(r&&s===void 0){const u=l.default;if(l.type!==Function&&ae(u)){const{propsDefaults:c}=o;n in c?s=c[n]:(Sn(o),s=c[n]=u.call(null,t),rn())}else s=u}l[0]&&(i&&!r?s=!1:l[1]&&(s===""||s===dn(n))&&(s=!0))}return s}function br(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const i=e.props,l={},r=[];let u=!1;if(!ae(e)){const f=p=>{u=!0;const[h,_]=br(p,t,!0);Qe(l,h),_&&r.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!i&&!u)return Ae(e)&&s.set(e,wn),wn;if(te(i))for(let f=0;f<i.length;f++){const p=xt(i[f]);Wi(p)&&(l[p]=Oe)}else if(i)for(const f in i){const p=xt(f);if(Wi(p)){const h=i[f],_=l[p]=te(h)||ae(h)?{type:h}:Object.assign({},h);if(_){const C=Zi(Boolean,_.type),E=Zi(String,_.type);_[0]=C>-1,_[1]=E<0||C<E,(C>-1||ge(_,"default"))&&r.push(p)}}}const c=[l,r];return Ae(e)&&s.set(e,c),c}function Wi(e){return e[0]!=="$"}function Ki(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Yi(e,t){return Ki(e)===Ki(t)}function Zi(e,t){return te(t)?t.findIndex(n=>Yi(n,e)):ae(t)&&Yi(t,e)?0:-1}const Pr=e=>e[0]==="_"||e==="$stable",ri=e=>te(e)?e.map(bt):[bt(e)],oc=(e,t,n)=>{if(t._n)return t;const s=$e((...o)=>ri(t(...o)),n);return s._c=!1,s},Tr=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Pr(o))continue;const i=e[o];if(ae(i))t[o]=oc(o,i,s);else if(i!=null){const l=ri(i);t[o]=()=>l}}},xr=(e,t)=>{const n=ri(t);e.slots.default=()=>n},ic=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=be(t),Ss(t,"_",n)):Tr(t,e.slots={})}else e.slots={},t&&xr(e,t);Ss(e.slots,Ys,1)},lc=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,l=Oe;if(s.shapeFlag&32){const r=t._;r?n&&r===1?i=!1:(Qe(o,t),!n&&r===1&&delete o._):(i=!t.$stable,Tr(t,o)),l=t}else t&&(xr(e,t),l={default:1});if(i)for(const r in o)!Pr(r)&&!(r in l)&&delete o[r]};function Cr(){return{app:null,config:{isNativeTag:Ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rc=0;function ac(e,t){return function(s,o=null){ae(s)||(s=Object.assign({},s)),o!=null&&!Ae(o)&&(o=null);const i=Cr(),l=new Set;let r=!1;const u=i.app={_uid:rc++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:Rc,get config(){return i.config},set config(c){},use(c,...f){return l.has(c)||(c&&ae(c.install)?(l.add(c),c.install(u,...f)):ae(c)&&(l.add(c),c(u,...f))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,f){return f?(i.components[c]=f,u):i.components[c]},directive(c,f){return f?(i.directives[c]=f,u):i.directives[c]},mount(c,f,p){if(!r){const h=N(s,o);return h.appContext=i,f&&t?t(h,c):e(h,c,p),r=!0,u._container=c,c.__vue_app__=u,Zs(h.component)||h.component.proxy}},unmount(){r&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return i.provides[c]=f,u}};return u}}function To(e,t,n,s,o=!1){if(te(e)){e.forEach((h,_)=>To(h,t&&(te(t)?t[_]:t),n,s,o));return}if(Fn(s)&&!o)return;const i=s.shapeFlag&4?Zs(s.component)||s.component.proxy:s.el,l=o?null:i,{i:r,r:u}=e,c=t&&t.r,f=r.refs===Oe?r.refs={}:r.refs,p=r.setupState;if(c!=null&&c!==u&&(Ve(c)?(f[c]=null,ge(p,c)&&(p[c]=null)):Ke(c)&&(c.value=null)),ae(u))jt(u,r,12,[l,f]);else{const h=Ve(u),_=Ke(u);if(h||_){const C=()=>{if(e.f){const E=h?ge(p,u)?p[u]:f[u]:u.value;o?te(E)&&Ko(E,i):te(E)?E.includes(i)||E.push(i):h?(f[u]=[i],ge(p,u)&&(p[u]=f[u])):(u.value=[i],e.k&&(f[e.k]=u.value))}else h?(f[u]=l,ge(p,u)&&(p[u]=l)):_&&(u.value=l,e.k&&(f[e.k]=l))};l?(C.id=-1,st(C,n)):C()}}}const st=Mu;function uc(e){return cc(e)}function cc(e,t){const n=Va();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:l,createText:r,createComment:u,setText:c,setElementText:f,parentNode:p,nextSibling:h,setScopeId:_=pt,insertStaticContent:C}=e,E=(d,g,T,O=null,M=null,z=null,W=!1,y=null,b=!!g.dynamicChildren)=>{if(d===g)return;d&&!tn(d,g)&&(O=j(d),je(d,M,z,!0),d=null),g.patchFlag===-2&&(b=!1,g.dynamicChildren=null);const{type:P,ref:B,shapeFlag:I}=g;switch(P){case Ks:A(d,g,T,O);break;case ut:v(d,g,T,O);break;case bs:d==null&&m(g,T,O,W);break;case pe:V(d,g,T,O,M,z,W,y,b);break;default:I&1?F(d,g,T,O,M,z,W,y,b):I&6?q(d,g,T,O,M,z,W,y,b):(I&64||I&128)&&P.process(d,g,T,O,M,z,W,y,b,he)}B!=null&&M&&To(B,d&&d.ref,z,g||d,!g)},A=(d,g,T,O)=>{if(d==null)s(g.el=r(g.children),T,O);else{const M=g.el=d.el;g.children!==d.children&&c(M,g.children)}},v=(d,g,T,O)=>{d==null?s(g.el=u(g.children||""),T,O):g.el=d.el},m=(d,g,T,O)=>{[d.el,d.anchor]=C(d.children,g,T,O,d.el,d.anchor)},w=({el:d,anchor:g},T,O)=>{let M;for(;d&&d!==g;)M=h(d),s(d,T,O),d=M;s(g,T,O)},x=({el:d,anchor:g})=>{let T;for(;d&&d!==g;)T=h(d),o(d),d=T;o(g)},F=(d,g,T,O,M,z,W,y,b)=>{W=W||g.type==="svg",d==null?R(g,T,O,M,z,W,y,b):ie(d,g,M,z,W,y,b)},R=(d,g,T,O,M,z,W,y)=>{let b,P;const{type:B,props:I,shapeFlag:G,transition:H,dirs:se}=d;if(b=d.el=l(d.type,z,I&&I.is,I),G&8?f(b,d.children):G&16&&D(d.children,b,null,O,M,z&&B!=="foreignObject",W,y),se&&Zt(d,null,O,"created"),I){for(const we in I)we!=="value"&&!ys(we)&&i(b,we,null,I[we],z,d.children,O,M,Z);"value"in I&&i(b,"value",null,I.value),(P=I.onVnodeBeforeMount)&&yt(P,O,d)}Y(b,d,d.scopeId,W,O),se&&Zt(d,null,O,"beforeMount");const _e=(!M||M&&!M.pendingBranch)&&H&&!H.persisted;_e&&H.beforeEnter(b),s(b,g,T),((P=I&&I.onVnodeMounted)||_e||se)&&st(()=>{P&&yt(P,O,d),_e&&H.enter(b),se&&Zt(d,null,O,"mounted")},M)},Y=(d,g,T,O,M)=>{if(T&&_(d,T),O)for(let z=0;z<O.length;z++)_(d,O[z]);if(M){let z=M.subTree;if(g===z){const W=M.vnode;Y(d,W,W.scopeId,W.slotScopeIds,M.parent)}}},D=(d,g,T,O,M,z,W,y,b=0)=>{for(let P=b;P<d.length;P++){const B=d[P]=y?Bt(d[P]):bt(d[P]);E(null,B,g,T,O,M,z,W,y)}},ie=(d,g,T,O,M,z,W)=>{const y=g.el=d.el;let{patchFlag:b,dynamicChildren:P,dirs:B}=g;b|=d.patchFlag&16;const I=d.props||Oe,G=g.props||Oe;let H;T&&qt(T,!1),(H=G.onVnodeBeforeUpdate)&&yt(H,T,g,d),B&&Zt(g,d,T,"beforeUpdate"),T&&qt(T,!0);const se=M&&g.type!=="foreignObject";if(P?Q(d.dynamicChildren,P,y,T,O,se,z):W||Pe(d,g,y,null,T,O,se,z,!1),b>0){if(b&16)X(y,g,I,G,T,O,M);else if(b&2&&I.class!==G.class&&i(y,"class",null,G.class,M),b&4&&i(y,"style",I.style,G.style,M),b&8){const _e=g.dynamicProps;for(let we=0;we<_e.length;we++){const Ne=_e[we],et=I[Ne],Ct=G[Ne];(Ct!==et||Ne==="value")&&i(y,Ne,et,Ct,M,d.children,T,O,Z)}}b&1&&d.children!==g.children&&f(y,g.children)}else!W&&P==null&&X(y,g,I,G,T,O,M);((H=G.onVnodeUpdated)||B)&&st(()=>{H&&yt(H,T,g,d),B&&Zt(g,d,T,"updated")},O)},Q=(d,g,T,O,M,z,W)=>{for(let y=0;y<g.length;y++){const b=d[y],P=g[y],B=b.el&&(b.type===pe||!tn(b,P)||b.shapeFlag&70)?p(b.el):T;E(b,P,B,null,O,M,z,W,!0)}},X=(d,g,T,O,M,z,W)=>{if(T!==O){if(T!==Oe)for(const y in T)!ys(y)&&!(y in O)&&i(d,y,T[y],null,W,g.children,M,z,Z);for(const y in O){if(ys(y))continue;const b=O[y],P=T[y];b!==P&&y!=="value"&&i(d,y,P,b,W,g.children,M,z,Z)}"value"in O&&i(d,"value",T.value,O.value)}},V=(d,g,T,O,M,z,W,y,b)=>{const P=g.el=d?d.el:r(""),B=g.anchor=d?d.anchor:r("");let{patchFlag:I,dynamicChildren:G,slotScopeIds:H}=g;H&&(y=y?y.concat(H):H),d==null?(s(P,T,O),s(B,T,O),D(g.children,T,B,M,z,W,y,b)):I>0&&I&64&&G&&d.dynamicChildren?(Q(d.dynamicChildren,G,T,M,z,W,y),(g.key!=null||M&&g===M.subTree)&&Sr(d,g,!0)):Pe(d,g,T,B,M,z,W,y,b)},q=(d,g,T,O,M,z,W,y,b)=>{g.slotScopeIds=y,d==null?g.shapeFlag&512?M.ctx.activate(g,T,O,W,b):le(g,T,O,M,z,W,b):Ie(d,g,b)},le=(d,g,T,O,M,z,W)=>{const y=d.component=wc(d,O,M);if(js(d)&&(y.ctx.renderer=he),bc(y),y.asyncDep){if(M&&M.registerDep(y,de),!d.el){const b=y.subTree=N(ut);v(null,b,g,T)}return}de(y,d,g,T,M,z,W)},Ie=(d,g,T)=>{const O=g.component=d.component;if(Ru(d,g,T))if(O.asyncDep&&!O.asyncResolved){ye(O,g,T);return}else O.next=g,Tu(O.update),O.update();else g.el=d.el,O.vnode=g},de=(d,g,T,O,M,z,W)=>{const y=()=>{if(d.isMounted){let{next:B,bu:I,u:G,parent:H,vnode:se}=d,_e=B,we;qt(d,!1),B?(B.el=se.el,ye(d,B,W)):B=se,I&&ws(I),(we=B.props&&B.props.onVnodeBeforeUpdate)&&yt(we,H,B,se),qt(d,!0);const Ne=to(d),et=d.subTree;d.subTree=Ne,E(et,Ne,p(et.el),j(et),d,M,z),B.el=Ne.el,_e===null&&ku(d,Ne.el),G&&st(G,M),(we=B.props&&B.props.onVnodeUpdated)&&st(()=>yt(we,H,B,se),M)}else{let B;const{el:I,props:G}=g,{bm:H,m:se,parent:_e}=d,we=Fn(g);if(qt(d,!1),H&&ws(H),!we&&(B=G&&G.onVnodeBeforeMount)&&yt(B,_e,g),qt(d,!0),I&&re){const Ne=()=>{d.subTree=to(d),re(I,d.subTree,d,M,null)};we?g.type.__asyncLoader().then(()=>!d.isUnmounted&&Ne()):Ne()}else{const Ne=d.subTree=to(d);E(null,Ne,T,O,d,M,z),g.el=Ne.el}if(se&&st(se,M),!we&&(B=G&&G.onVnodeMounted)){const Ne=g;st(()=>yt(B,_e,Ne),M)}(g.shapeFlag&256||_e&&Fn(_e.vnode)&&_e.vnode.shapeFlag&256)&&d.a&&st(d.a,M),d.isMounted=!0,g=T=O=null}},b=d.effect=new qo(y,()=>oi(P),d.scope),P=d.update=()=>b.run();P.id=d.uid,qt(d,!0),P()},ye=(d,g,T)=>{g.component=d;const O=d.vnode.props;d.vnode=g,d.next=null,sc(d,g.props,O,T),lc(d,g.children,T),Mn(),Bi(),Un()},Pe=(d,g,T,O,M,z,W,y,b=!1)=>{const P=d&&d.children,B=d?d.shapeFlag:0,I=g.children,{patchFlag:G,shapeFlag:H}=g;if(G>0){if(G&128){_t(P,I,T,O,M,z,W,y,b);return}else if(G&256){Fe(P,I,T,O,M,z,W,y,b);return}}H&8?(B&16&&Z(P,M,z),I!==P&&f(T,I)):B&16?H&16?_t(P,I,T,O,M,z,W,y,b):Z(P,M,z,!0):(B&8&&f(T,""),H&16&&D(I,T,O,M,z,W,y,b))},Fe=(d,g,T,O,M,z,W,y,b)=>{d=d||wn,g=g||wn;const P=d.length,B=g.length,I=Math.min(P,B);let G;for(G=0;G<I;G++){const H=g[G]=b?Bt(g[G]):bt(g[G]);E(d[G],H,T,null,M,z,W,y,b)}P>B?Z(d,M,z,!0,!1,I):D(g,T,O,M,z,W,y,b,I)},_t=(d,g,T,O,M,z,W,y,b)=>{let P=0;const B=g.length;let I=d.length-1,G=B-1;for(;P<=I&&P<=G;){const H=d[P],se=g[P]=b?Bt(g[P]):bt(g[P]);if(tn(H,se))E(H,se,T,null,M,z,W,y,b);else break;P++}for(;P<=I&&P<=G;){const H=d[I],se=g[G]=b?Bt(g[G]):bt(g[G]);if(tn(H,se))E(H,se,T,null,M,z,W,y,b);else break;I--,G--}if(P>I){if(P<=G){const H=G+1,se=H<B?g[H].el:O;for(;P<=G;)E(null,g[P]=b?Bt(g[P]):bt(g[P]),T,se,M,z,W,y,b),P++}}else if(P>G)for(;P<=I;)je(d[P],M,z,!0),P++;else{const H=P,se=P,_e=new Map;for(P=se;P<=G;P++){const ot=g[P]=b?Bt(g[P]):bt(g[P]);ot.key!=null&&_e.set(ot.key,P)}let we,Ne=0;const et=G-se+1;let Ct=!1,pn=0;const $n=new Array(et);for(P=0;P<et;P++)$n[P]=0;for(P=H;P<=I;P++){const ot=d[P];if(Ne>=et){je(ot,M,z,!0);continue}let vt;if(ot.key!=null)vt=_e.get(ot.key);else for(we=se;we<=G;we++)if($n[we-se]===0&&tn(ot,g[we])){vt=we;break}vt===void 0?je(ot,M,z,!0):($n[vt-se]=P+1,vt>=pn?pn=vt:Ct=!0,E(ot,g[vt],T,null,M,z,W,y,b),Ne++)}const Oi=Ct?fc($n):wn;for(we=Oi.length-1,P=et-1;P>=0;P--){const ot=se+P,vt=g[ot],Ri=ot+1<B?g[ot+1].el:O;$n[P]===0?E(null,vt,T,Ri,M,z,W,y,b):Ct&&(we<0||P!==Oi[we]?Je(vt,T,Ri,2):we--)}}},Je=(d,g,T,O,M=null)=>{const{el:z,type:W,transition:y,children:b,shapeFlag:P}=d;if(P&6){Je(d.component.subTree,g,T,O);return}if(P&128){d.suspense.move(g,T,O);return}if(P&64){W.move(d,g,T,he);return}if(W===pe){s(z,g,T);for(let I=0;I<b.length;I++)Je(b[I],g,T,O);s(d.anchor,g,T);return}if(W===bs){w(d,g,T);return}if(O!==2&&P&1&&y)if(O===0)y.beforeEnter(z),s(z,g,T),st(()=>y.enter(z),M);else{const{leave:I,delayLeave:G,afterLeave:H}=y,se=()=>s(z,g,T),_e=()=>{I(z,()=>{se(),H&&H()})};G?G(z,se,_e):_e()}else s(z,g,T)},je=(d,g,T,O=!1,M=!1)=>{const{type:z,props:W,ref:y,children:b,dynamicChildren:P,shapeFlag:B,patchFlag:I,dirs:G}=d;if(y!=null&&To(y,null,T,d,!0),B&256){g.ctx.deactivate(d);return}const H=B&1&&G,se=!Fn(d);let _e;if(se&&(_e=W&&W.onVnodeBeforeUnmount)&&yt(_e,g,d),B&6)k(d.component,T,O);else{if(B&128){d.suspense.unmount(T,O);return}H&&Zt(d,null,g,"beforeUnmount"),B&64?d.type.remove(d,g,T,M,he,O):P&&(z!==pe||I>0&&I&64)?Z(P,g,T,!1,!0):(z===pe&&I&384||!M&&B&16)&&Z(b,g,T),O&&ct(d)}(se&&(_e=W&&W.onVnodeUnmounted)||H)&&st(()=>{_e&&yt(_e,g,d),H&&Zt(d,null,g,"unmounted")},T)},ct=d=>{const{type:g,el:T,anchor:O,transition:M}=d;if(g===pe){De(T,O);return}if(g===bs){x(d);return}const z=()=>{o(T),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(d.shapeFlag&1&&M&&!M.persisted){const{leave:W,delayLeave:y}=M,b=()=>W(T,z);y?y(d.el,z,b):b()}else z()},De=(d,g)=>{let T;for(;d!==g;)T=h(d),o(d),d=T;o(g)},k=(d,g,T)=>{const{bum:O,scope:M,update:z,subTree:W,um:y}=d;O&&ws(O),M.stop(),z&&(z.active=!1,je(W,d,g,T)),y&&st(y,g),st(()=>{d.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Z=(d,g,T,O=!1,M=!1,z=0)=>{for(let W=z;W<d.length;W++)je(d[W],g,T,O,M)},j=d=>d.shapeFlag&6?j(d.component.subTree):d.shapeFlag&128?d.suspense.next():h(d.anchor||d.el),J=(d,g,T)=>{d==null?g._vnode&&je(g._vnode,null,null,!0):E(g._vnode||null,d,g,null,null,null,T),Bi(),ar(),g._vnode=d},he={p:E,um:je,m:Je,r:ct,mt:le,mc:D,pc:Pe,pbc:Q,n:j,o:e};let Te,re;return t&&([Te,re]=t(he)),{render:J,hydrate:Te,createApp:ac(J,Te)}}function qt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Sr(e,t,n=!1){const s=e.children,o=t.children;if(te(s)&&te(o))for(let i=0;i<s.length;i++){const l=s[i];let r=o[i];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=o[i]=Bt(o[i]),r.el=l.el),n||Sr(l,r)),r.type===Ks&&(r.el=l.el)}}function fc(e){const t=e.slice(),n=[0];let s,o,i,l,r;const u=e.length;for(s=0;s<u;s++){const c=e[s];if(c!==0){if(o=n[n.length-1],e[o]<c){t[s]=o,n.push(s);continue}for(i=0,l=n.length-1;i<l;)r=i+l>>1,e[n[r]]<c?i=r+1:l=r;c<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,l=n[i-1];i-- >0;)n[i]=l,l=t[l];return n}const dc=e=>e.__isTeleport,pe=Symbol(void 0),Ks=Symbol(void 0),ut=Symbol(void 0),bs=Symbol(void 0),Wn=[];let ht=null;function S(e=!1){Wn.push(ht=e?null:[])}function hc(){Wn.pop(),ht=Wn[Wn.length-1]||null}let ns=1;function qi(e){ns+=e}function Ar(e){return e.dynamicChildren=ns>0?ht||wn:null,hc(),ns>0&&ht&&ht.push(e),e}function U(e,t,n,s,o,i){return Ar(a(e,t,n,s,o,i,!0))}function ve(e,t,n,s,o){return Ar(N(e,t,n,s,o,!0))}function ks(e){return e?e.__v_isVNode===!0:!1}function tn(e,t){return e.type===t.type&&e.key===t.key}const Ys="__vInternal",Or=({key:e})=>e!=null?e:null,Ps=({ref:e,ref_key:t,ref_for:n})=>e!=null?Ve(e)||Ke(e)||ae(e)?{i:Ye,r:e,k:t,f:!!n}:e:null;function a(e,t=null,n=null,s=0,o=null,i=e===pe?0:1,l=!1,r=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Or(t),ref:t&&Ps(t),scopeId:fr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ye};return r?(ai(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Ve(n)?8:16),ns>0&&!l&&ht&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ht.push(u),u}const N=pc;function pc(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===Yu)&&(e=ut),ks(e)){const r=Kt(e,t,!0);return n&&ai(r,n),ns>0&&!i&&ht&&(r.shapeFlag&6?ht[ht.indexOf(e)]=r:ht.push(r)),r.patchFlag|=-2,r}if(Sc(e)&&(e=e.__vccOpts),t){t=gc(t);let{class:r,style:u}=t;r&&!Ve(r)&&(t.class=Tt(r)),Ae(u)&&(Jl(u)&&!te(u)&&(u=Qe({},u)),t.style=Mt(u))}const l=Ve(e)?1:Nu(e)?128:dc(e)?64:Ae(e)?4:ae(e)?2:0;return a(e,t,n,s,o,l,i,!0)}function gc(e){return e?Jl(e)||Ys in e?Qe({},e):e:null}function Kt(e,t,n=!1){const{props:s,ref:o,patchFlag:i,children:l}=e,r=t?_c(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&Or(r),ref:t&&t.ref?n&&o?te(o)?o.concat(Ps(t)):[o,Ps(t)]:Ps(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Kt(e.ssContent),ssFallback:e.ssFallback&&Kt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function $(e=" ",t=0){return N(Ks,null,e,t)}function mc(e,t){const n=N(bs,null,e);return n.staticCount=t,n}function oe(e="",t=!1){return t?(S(),ve(ut,null,e)):N(ut,null,e)}function bt(e){return e==null||typeof e=="boolean"?N(ut):te(e)?N(pe,null,e.slice()):typeof e=="object"?Bt(e):N(Ks,null,String(e))}function Bt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Kt(e)}function ai(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(te(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),ai(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(Ys in t)?t._ctx=Ye:o===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ae(t)?(t={default:t,_ctx:Ye},n=32):(t=String(t),s&64?(n=16,t=[$(t)]):n=8);e.children=t,e.shapeFlag|=n}function _c(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Tt([t.class,s.class]));else if(o==="style")t.style=Mt([t.style,s.style]);else if(Vs(o)){const i=t[o],l=s[o];l&&i!==l&&!(te(i)&&i.includes(l))&&(t[o]=i?[].concat(i,l):l)}else o!==""&&(t[o]=s[o])}return t}function yt(e,t,n,s=null){at(e,t,7,[n,s])}const vc=Cr();let yc=0;function wc(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||vc,i={uid:yc++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ba(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:br(s,o),emitsOptions:cr(s,o),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:s.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Su.bind(null,i),e.ce&&e.ce(i),i}let Ge=null;const Ec=()=>Ge||Ye,Sn=e=>{Ge=e,e.scope.on()},rn=()=>{Ge&&Ge.scope.off(),Ge=null};function Rr(e){return e.vnode.shapeFlag&4}let ss=!1;function bc(e,t=!1){ss=t;const{props:n,children:s}=e.vnode,o=Rr(e);nc(e,n,o,t),ic(e,s);const i=o?Pc(e,t):void 0;return ss=!1,i}function Pc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=er(new Proxy(e.ctx,qu));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?xc(e):null;Sn(e),Mn();const i=jt(s,e,0,[e.props,o]);if(Un(),rn(),Vl(i)){if(i.then(rn,rn),t)return i.then(l=>{Qi(e,l,t)}).catch(l=>{Hs(l,e,0)});e.asyncDep=i}else Qi(e,i,t)}else kr(e,t)}function Qi(e,t,n){ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ae(t)&&(e.setupState=or(t)),kr(e,n)}let Xi;function kr(e,t,n){const s=e.type;if(!e.render){if(!t&&Xi&&!s.render){const o=s.template||li(e).template;if(o){const{isCustomElement:i,compilerOptions:l}=e.appContext.config,{delimiters:r,compilerOptions:u}=s,c=Qe(Qe({isCustomElement:i,delimiters:r},l),u);s.render=Xi(o,c)}}e.render=s.render||pt}Sn(e),Mn(),Qu(e),Un(),rn()}function Tc(e){return new Proxy(e.attrs,{get(t,n){return it(e,"get","$attrs"),t[n]}})}function xc(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=Tc(e))},slots:e.slots,emit:e.emit,expose:t}}function Zs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(or(er(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in jn)return jn[n](e)},has(t,n){return n in t||n in jn}}))}function Cc(e,t=!0){return ae(e)?e.displayName||e.name:e.name||t&&e.__name}function Sc(e){return ae(e)&&"__vccOpts"in e}const fe=(e,t)=>Eu(e,t,ss);function Nr(e,t,n){const s=arguments.length;return s===2?Ae(t)&&!te(t)?ks(t)?N(e,null,[t]):N(e,t):N(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ks(n)&&(n=[n]),N(e,t,n))}const Ac=Symbol(""),Oc=()=>gt(Ac),Rc="3.2.45",kc="http://www.w3.org/2000/svg",nn=typeof document!="undefined"?document:null,Ji=nn&&nn.createElement("template"),Nc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?nn.createElementNS(kc,e):nn.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>nn.createTextNode(e),createComment:e=>nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const l=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Ji.innerHTML=s?`<svg>${e}</svg>`:e;const r=Ji.content;if(s){const u=r.firstChild;for(;u.firstChild;)r.appendChild(u.firstChild);r.removeChild(u)}t.insertBefore(r,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Mc(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Uc(e,t,n){const s=e.style,o=Ve(n);if(n&&!o){for(const i in n)xo(s,i,n[i]);if(t&&!Ve(t))for(const i in t)n[i]==null&&xo(s,i,"")}else{const i=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=i)}}const el=/\s*!important$/;function xo(e,t,n){if(te(n))n.forEach(s=>xo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Lc(e,t);el.test(n)?e.setProperty(dn(s),n.replace(el,""),"important"):e[s]=n}}const tl=["Webkit","Moz","ms"],oo={};function Lc(e,t){const n=oo[t];if(n)return n;let s=xt(t);if(s!=="filter"&&s in e)return oo[t]=s;s=zs(s);for(let o=0;o<tl.length;o++){const i=tl[o]+s;if(i in e)return oo[t]=i}return t}const nl="http://www.w3.org/1999/xlink";function $c(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(nl,t.slice(6,t.length)):e.setAttributeNS(nl,t,n);else{const i=ka(t);n==null||i&&!Il(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Ic(e,t,n,s,o,i,l){if(t==="innerHTML"||t==="textContent"){s&&l(s,o,i),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const u=n==null?"":n;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),n==null&&e.removeAttribute(t);return}let r=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=Il(n):n==null&&u==="string"?(n="",r=!0):u==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(t)}function Rt(e,t,n,s){e.addEventListener(t,n,s)}function Dc(e,t,n,s){e.removeEventListener(t,n,s)}function Vc(e,t,n,s,o=null){const i=e._vei||(e._vei={}),l=i[t];if(s&&l)l.value=s;else{const[r,u]=Bc(t);if(s){const c=i[t]=Hc(s,o);Rt(e,r,c,u)}else l&&(Dc(e,r,l,u),i[t]=void 0)}}const sl=/(?:Once|Passive|Capture)$/;function Bc(e){let t;if(sl.test(e)){t={};let s;for(;s=e.match(sl);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):dn(e.slice(2)),t]}let io=0;const zc=Promise.resolve(),Gc=()=>io||(zc.then(()=>io=0),io=Date.now());function Hc(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;at(Fc(s,n.value),t,5,[s])};return n.value=e,n.attached=Gc(),n}function Fc(e,t){if(te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const ol=/^on[a-z]/,jc=(e,t,n,s,o=!1,i,l,r,u)=>{t==="class"?Mc(e,s,o):t==="style"?Uc(e,n,s):Vs(t)?Wo(t)||Vc(e,t,n,s,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wc(e,t,s,o))?Ic(e,t,s,i,l,r,u):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),$c(e,t,s,o))};function Wc(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&ol.test(t)&&ae(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ol.test(t)&&Ve(n)?!1:t in e}const Kc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Iu.props;const Yt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return te(t)?n=>ws(t,n):t};function Yc(e){e.target.composing=!0}function il(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Nt={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=Yt(o);const i=s||o.props&&o.props.type==="number";Rt(e,t?"change":"input",l=>{if(l.target.composing)return;let r=e.value;n&&(r=r.trim()),i&&(r=Xn(r)),e._assign(r)}),n&&Rt(e,"change",()=>{e.value=e.value.trim()}),t||(Rt(e,"compositionstart",Yc),Rt(e,"compositionend",il),Rt(e,"change",il))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},i){if(e._assign=Yt(i),e.composing||document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&Xn(e.value)===t))return;const l=t==null?"":t;e.value!==l&&(e.value=l)}},sn={deep:!0,created(e,t,n){e._assign=Yt(n),Rt(e,"change",()=>{const s=e._modelValue,o=An(e),i=e.checked,l=e._assign;if(te(s)){const r=jo(s,o),u=r!==-1;if(i&&!u)l(s.concat(o));else if(!i&&u){const c=[...s];c.splice(r,1),l(c)}}else if(Nn(s)){const r=new Set(s);i?r.add(o):r.delete(o),l(r)}else l(Mr(e,i))})},mounted:ll,beforeUpdate(e,t,n){e._assign=Yt(n),ll(e,t,n)}};function ll(e,{value:t,oldValue:n},s){e._modelValue=t,te(t)?e.checked=jo(t,s.props.value)>-1:Nn(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=cn(t,Mr(e,!0)))}const Et={created(e,{value:t},n){e.checked=cn(t,n.props.value),e._assign=Yt(n),Rt(e,"change",()=>{e._assign(An(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e._assign=Yt(s),t!==n&&(e.checked=cn(t,s.props.value))}},Zc={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=Nn(t);Rt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?Xn(An(l)):An(l));e._assign(e.multiple?o?new Set(i):i:i[0])}),e._assign=Yt(s)},mounted(e,{value:t}){rl(e,t)},beforeUpdate(e,t,n){e._assign=Yt(n)},updated(e,{value:t}){rl(e,t)}};function rl(e,t){const n=e.multiple;if(!(n&&!te(t)&&!Nn(t))){for(let s=0,o=e.options.length;s<o;s++){const i=e.options[s],l=An(i);if(n)te(t)?i.selected=jo(t,l)>-1:i.selected=t.has(l);else if(cn(An(i),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function An(e){return"_value"in e?e._value:e.value}function Mr(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const qc=["ctrl","shift","alt","meta"],Qc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qc.some(n=>e[`${n}Key`]&&!t.includes(n))},Ns=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const i=Qc[t[o]];if(i&&i(n,t))return}return e(n,...s)},Xc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Co=(e,t)=>n=>{if(!("key"in n))return;const s=dn(n.key);if(t.some(o=>o===s||Xc[o]===s))return e(n)},Ur={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):In(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),In(e,!0),s.enter(e)):s.leave(e,()=>{In(e,!1)}):In(e,t))},beforeUnmount(e,{value:t}){In(e,t)}};function In(e,t){e.style.display=t?e._vod:"none"}const Jc=Qe({patchProp:jc},Nc);let al;function ef(){return al||(al=uc(Jc))}const tf=(...e)=>{const t=ef().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=nf(s);if(!o)return;const i=t._component;!ae(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const l=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function nf(e){return Ve(e)?document.querySelector(e):e}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const mn=typeof window!="undefined";function sf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const xe=Object.assign;function lo(e,t){const n={};for(const s in t){const o=t[s];n[s]=mt(o)?o.map(e):e(o)}return n}const Kn=()=>{},mt=Array.isArray,of=/\/$/,lf=e=>e.replace(of,"");function ro(e,t,n="/"){let s,o={},i="",l="";const r=t.indexOf("#");let u=t.indexOf("?");return r<u&&r>=0&&(u=-1),u>-1&&(s=t.slice(0,u),i=t.slice(u+1,r>-1?r:t.length),o=e(i)),r>-1&&(s=s||t.slice(0,r),l=t.slice(r,t.length)),s=cf(s!=null?s:t,n),{fullPath:s+(i&&"?")+i+l,path:s,query:o,hash:l}}function rf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ul(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function af(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&On(t.matched[s],n.matched[o])&&Lr(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function On(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Lr(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!uf(e[n],t[n]))return!1;return!0}function uf(e,t){return mt(e)?cl(e,t):mt(t)?cl(t,e):e===t}function cl(e,t){return mt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function cf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let o=n.length-1,i,l;for(i=0;i<s.length;i++)if(l=s[i],l!==".")if(l==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var os;(function(e){e.pop="pop",e.push="push"})(os||(os={}));var Yn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Yn||(Yn={}));function ff(e){if(!e)if(mn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),lf(e)}const df=/^[^#]+#/;function hf(e,t){return e.replace(df,"#")+t}function pf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const qs=()=>({left:window.pageXOffset,top:window.pageYOffset});function gf(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=pf(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function fl(e,t){return(history.state?history.state.position-t:-1)+e}const So=new Map;function mf(e,t){So.set(e,t)}function _f(e){const t=So.get(e);return So.delete(e),t}let vf=()=>location.protocol+"//"+location.host;function $r(e,t){const{pathname:n,search:s,hash:o}=t,i=e.indexOf("#");if(i>-1){let r=o.includes(e.slice(i))?e.slice(i).length:1,u=o.slice(r);return u[0]!=="/"&&(u="/"+u),ul(u,"")}return ul(n,e)+s+o}function yf(e,t,n,s){let o=[],i=[],l=null;const r=({state:h})=>{const _=$r(e,location),C=n.value,E=t.value;let A=0;if(h){if(n.value=_,t.value=h,l&&l===C){l=null;return}A=E?h.position-E.position:0}else s(_);o.forEach(v=>{v(n.value,C,{delta:A,type:os.pop,direction:A?A>0?Yn.forward:Yn.back:Yn.unknown})})};function u(){l=n.value}function c(h){o.push(h);const _=()=>{const C=o.indexOf(h);C>-1&&o.splice(C,1)};return i.push(_),_}function f(){const{history:h}=window;!h.state||h.replaceState(xe({},h.state,{scroll:qs()}),"")}function p(){for(const h of i)h();i=[],window.removeEventListener("popstate",r),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",r),window.addEventListener("beforeunload",f),{pauseListeners:u,listen:c,destroy:p}}function dl(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?qs():null}}function wf(e){const{history:t,location:n}=window,s={value:$r(e,n)},o={value:t.state};o.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(u,c,f){const p=e.indexOf("#"),h=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+u:vf()+e+u;try{t[f?"replaceState":"pushState"](c,"",h),o.value=c}catch(_){console.error(_),n[f?"replace":"assign"](h)}}function l(u,c){const f=xe({},t.state,dl(o.value.back,u,o.value.forward,!0),c,{position:o.value.position});i(u,f,!0),s.value=u}function r(u,c){const f=xe({},o.value,t.state,{forward:u,scroll:qs()});i(f.current,f,!0);const p=xe({},dl(s.value,u,null),{position:f.position+1},c);i(u,p,!1),s.value=u}return{location:s,state:o,push:r,replace:l}}function Ef(e){e=ff(e);const t=wf(e),n=yf(e,t.state,t.location,t.replace);function s(i,l=!0){l||n.pauseListeners(),history.go(i)}const o=xe({location:"",base:e,go:s,createHref:hf.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function bf(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Ef(e)}function Pf(e){return typeof e=="string"||e&&typeof e=="object"}function Ir(e){return typeof e=="string"||typeof e=="symbol"}const Dt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Dr=Symbol("");var hl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(hl||(hl={}));function Rn(e,t){return xe(new Error,{type:e,[Dr]:!0},t)}function St(e,t){return e instanceof Error&&Dr in e&&(t==null||!!(e.type&t))}const pl="[^/]+?",Tf={sensitive:!1,strict:!1,start:!0,end:!0},xf=/[.+*?^${}()[\]/\\]/g;function Cf(e,t){const n=xe({},Tf,t),s=[];let o=n.start?"^":"";const i=[];for(const c of e){const f=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let p=0;p<c.length;p++){const h=c[p];let _=40+(n.sensitive?.25:0);if(h.type===0)p||(o+="/"),o+=h.value.replace(xf,"\\$&"),_+=40;else if(h.type===1){const{value:C,repeatable:E,optional:A,regexp:v}=h;i.push({name:C,repeatable:E,optional:A});const m=v||pl;if(m!==pl){_+=10;try{new RegExp(`(${m})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${C}" (${m}): `+x.message)}}let w=E?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;p||(w=A&&c.length<2?`(?:/${w})`:"/"+w),A&&(w+="?"),o+=w,_+=20,A&&(_+=-8),E&&(_+=-20),m===".*"&&(_+=-50)}f.push(_)}s.push(f)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function r(c){const f=c.match(l),p={};if(!f)return null;for(let h=1;h<f.length;h++){const _=f[h]||"",C=i[h-1];p[C.name]=_&&C.repeatable?_.split("/"):_}return p}function u(c){let f="",p=!1;for(const h of e){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of h)if(_.type===0)f+=_.value;else if(_.type===1){const{value:C,repeatable:E,optional:A}=_,v=C in c?c[C]:"";if(mt(v)&&!E)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const m=mt(v)?v.join("/"):v;if(!m)if(A)h.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=m}}return f||"/"}return{re:l,score:s,keys:i,parse:r,stringify:u}}function Sf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Af(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const i=Sf(s[n],o[n]);if(i)return i;n++}if(Math.abs(o.length-s.length)===1){if(gl(s))return 1;if(gl(o))return-1}return o.length-s.length}function gl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Of={type:0,value:""},Rf=/[a-zA-Z0-9_]/;function kf(e){if(!e)return[[]];if(e==="/")return[[Of]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${c}": ${_}`)}let n=0,s=n;const o=[];let i;function l(){i&&o.push(i),i=[]}let r=0,u,c="",f="";function p(){!c||(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=u}for(;r<e.length;){if(u=e[r++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&p(),l()):u===":"?(p(),n=1):h();break;case 4:h(),n=s;break;case 1:u==="("?n=2:Rf.test(u)?h():(p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&r--);break;case 2:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:n=3:f+=u;break;case 3:p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&r--,f="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),p(),l(),o}function Nf(e,t,n){const s=Cf(kf(e.path),n),o=xe(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Mf(e,t){const n=[],s=new Map;t=vl({strict:!1,end:!0,sensitive:!1},t);function o(f){return s.get(f)}function i(f,p,h){const _=!h,C=Uf(f);C.aliasOf=h&&h.record;const E=vl(t,f),A=[C];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const x of w)A.push(xe({},C,{components:h?h.record.components:C.components,path:x,aliasOf:h?h.record:C}))}let v,m;for(const w of A){const{path:x}=w;if(p&&x[0]!=="/"){const F=p.record.path,R=F[F.length-1]==="/"?"":"/";w.path=p.record.path+(x&&R+x)}if(v=Nf(w,p,E),h?h.alias.push(v):(m=m||v,m!==v&&m.alias.push(v),_&&f.name&&!_l(v)&&l(f.name)),C.children){const F=C.children;for(let R=0;R<F.length;R++)i(F[R],v,h&&h.children[R])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&u(v)}return m?()=>{l(m)}:Kn}function l(f){if(Ir(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(l),p.alias.forEach(l))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(l),f.alias.forEach(l))}}function r(){return n}function u(f){let p=0;for(;p<n.length&&Af(f,n[p])>=0&&(f.record.path!==n[p].record.path||!Vr(f,n[p]));)p++;n.splice(p,0,f),f.record.name&&!_l(f)&&s.set(f.record.name,f)}function c(f,p){let h,_={},C,E;if("name"in f&&f.name){if(h=s.get(f.name),!h)throw Rn(1,{location:f});E=h.record.name,_=xe(ml(p.params,h.keys.filter(m=>!m.optional).map(m=>m.name)),f.params&&ml(f.params,h.keys.map(m=>m.name))),C=h.stringify(_)}else if("path"in f)C=f.path,h=n.find(m=>m.re.test(C)),h&&(_=h.parse(C),E=h.record.name);else{if(h=p.name?s.get(p.name):n.find(m=>m.re.test(p.path)),!h)throw Rn(1,{location:f,currentLocation:p});E=h.record.name,_=xe({},p.params,f.params),C=h.stringify(_)}const A=[];let v=h;for(;v;)A.unshift(v.record),v=v.parent;return{name:E,path:C,params:_,matched:A,meta:$f(A)}}return e.forEach(f=>i(f)),{addRoute:i,resolve:c,removeRoute:l,getRoutes:r,getRecordMatcher:o}}function ml(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Uf(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Lf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Lf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function _l(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function $f(e){return e.reduce((t,n)=>xe(t,n.meta),{})}function vl(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Vr(e,t){return t.children.some(n=>n===e||Vr(e,n))}const Br=/#/g,If=/&/g,Df=/\//g,Vf=/=/g,Bf=/\?/g,zr=/\+/g,zf=/%5B/g,Gf=/%5D/g,Gr=/%5E/g,Hf=/%60/g,Hr=/%7B/g,Ff=/%7C/g,Fr=/%7D/g,jf=/%20/g;function ui(e){return encodeURI(""+e).replace(Ff,"|").replace(zf,"[").replace(Gf,"]")}function Wf(e){return ui(e).replace(Hr,"{").replace(Fr,"}").replace(Gr,"^")}function Ao(e){return ui(e).replace(zr,"%2B").replace(jf,"+").replace(Br,"%23").replace(If,"%26").replace(Hf,"`").replace(Hr,"{").replace(Fr,"}").replace(Gr,"^")}function Kf(e){return Ao(e).replace(Vf,"%3D")}function Yf(e){return ui(e).replace(Br,"%23").replace(Bf,"%3F")}function Zf(e){return e==null?"":Yf(e).replace(Df,"%2F")}function Ms(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function qf(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const i=s[o].replace(zr," "),l=i.indexOf("="),r=Ms(l<0?i:i.slice(0,l)),u=l<0?null:Ms(i.slice(l+1));if(r in t){let c=t[r];mt(c)||(c=t[r]=[c]),c.push(u)}else t[r]=u}return t}function yl(e){let t="";for(let n in e){const s=e[n];if(n=Kf(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(mt(s)?s.map(i=>i&&Ao(i)):[s&&Ao(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Qf(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=mt(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const Xf=Symbol(""),wl=Symbol(""),Qs=Symbol(""),ci=Symbol(""),Oo=Symbol("");function Dn(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function zt(e,t,n,s,o){const i=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((l,r)=>{const u=p=>{p===!1?r(Rn(4,{from:n,to:t})):p instanceof Error?r(p):Pf(p)?r(Rn(2,{from:t,to:p})):(i&&s.enterCallbacks[o]===i&&typeof p=="function"&&i.push(p),l())},c=e.call(s&&s.instances[o],t,n,u);let f=Promise.resolve(c);e.length<3&&(f=f.then(u)),f.catch(p=>r(p))})}function ao(e,t,n,s){const o=[];for(const i of e)for(const l in i.components){let r=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(Jf(r)){const c=(r.__vccOpts||r)[t];c&&o.push(zt(c,n,s,i,l))}else{let u=r();o.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${i.path}"`));const f=sf(c)?c.default:c;i.components[l]=f;const h=(f.__vccOpts||f)[t];return h&&zt(h,n,s,i,l)()}))}}return o}function Jf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function El(e){const t=gt(Qs),n=gt(ci),s=fe(()=>t.resolve(ue(e.to))),o=fe(()=>{const{matched:u}=s.value,{length:c}=u,f=u[c-1],p=n.matched;if(!f||!p.length)return-1;const h=p.findIndex(On.bind(null,f));if(h>-1)return h;const _=bl(u[c-2]);return c>1&&bl(f)===_&&p[p.length-1].path!==_?p.findIndex(On.bind(null,u[c-2])):h}),i=fe(()=>o.value>-1&&sd(n.params,s.value.params)),l=fe(()=>o.value>-1&&o.value===n.matched.length-1&&Lr(n.params,s.value.params));function r(u={}){return nd(u)?t[ue(e.replace)?"replace":"push"](ue(e.to)).catch(Kn):Promise.resolve()}return{route:s,href:fe(()=>s.value.href),isActive:i,isExactActive:l,navigate:r}}const ed=me({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:El,setup(e,{slots:t}){const n=ls(El(e)),{options:s}=gt(Qs),o=fe(()=>({[Pl(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Pl(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Nr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),td=ed;function nd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function sd(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!mt(o)||o.length!==s.length||s.some((i,l)=>i!==o[l]))return!1}return!0}function bl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pl=(e,t,n)=>e!=null?e:t!=null?t:n,od=me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=gt(Oo),o=fe(()=>e.route||s.value),i=gt(wl,0),l=fe(()=>{let c=ue(i);const{matched:f}=o.value;let p;for(;(p=f[c])&&!p.components;)c++;return c}),r=fe(()=>o.value.matched[l.value]);Es(wl,fe(()=>l.value+1)),Es(Xf,r),Es(Oo,o);const u=K();return ze(()=>[u.value,r.value,e.name],([c,f,p],[h,_,C])=>{f&&(f.instances[p]=c,_&&_!==f&&c&&c===h&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),c&&f&&(!_||!On(f,_)||!h)&&(f.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=o.value,f=e.name,p=r.value,h=p&&p.components[f];if(!h)return Tl(n.default,{Component:h,route:c});const _=p.props[f],C=_?_===!0?c.params:typeof _=="function"?_(c):_:null,A=Nr(h,xe({},C,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(p.instances[f]=null)},ref:u}));return Tl(n.default,{Component:A,route:c})||A}}});function Tl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const id=od;function ld(e){const t=Mf(e.routes,e),n=e.parseQuery||qf,s=e.stringifyQuery||yl,o=e.history,i=Dn(),l=Dn(),r=Dn(),u=pu(Dt);let c=Dt;mn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=lo.bind(null,k=>""+k),p=lo.bind(null,Zf),h=lo.bind(null,Ms);function _(k,Z){let j,J;return Ir(k)?(j=t.getRecordMatcher(k),J=Z):J=k,t.addRoute(J,j)}function C(k){const Z=t.getRecordMatcher(k);Z&&t.removeRoute(Z)}function E(){return t.getRoutes().map(k=>k.record)}function A(k){return!!t.getRecordMatcher(k)}function v(k,Z){if(Z=xe({},Z||u.value),typeof k=="string"){const d=ro(n,k,Z.path),g=t.resolve({path:d.path},Z),T=o.createHref(d.fullPath);return xe(d,g,{params:h(g.params),hash:Ms(d.hash),redirectedFrom:void 0,href:T})}let j;if("path"in k)j=xe({},k,{path:ro(n,k.path,Z.path).path});else{const d=xe({},k.params);for(const g in d)d[g]==null&&delete d[g];j=xe({},k,{params:p(k.params)}),Z.params=p(Z.params)}const J=t.resolve(j,Z),he=k.hash||"";J.params=f(h(J.params));const Te=rf(s,xe({},k,{hash:Wf(he),path:J.path})),re=o.createHref(Te);return xe({fullPath:Te,hash:he,query:s===yl?Qf(k.query):k.query||{}},J,{redirectedFrom:void 0,href:re})}function m(k){return typeof k=="string"?ro(n,k,u.value.path):xe({},k)}function w(k,Z){if(c!==k)return Rn(8,{from:Z,to:k})}function x(k){return Y(k)}function F(k){return x(xe(m(k),{replace:!0}))}function R(k){const Z=k.matched[k.matched.length-1];if(Z&&Z.redirect){const{redirect:j}=Z;let J=typeof j=="function"?j(k):j;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=m(J):{path:J},J.params={}),xe({query:k.query,hash:k.hash,params:"path"in J?{}:k.params},J)}}function Y(k,Z){const j=c=v(k),J=u.value,he=k.state,Te=k.force,re=k.replace===!0,d=R(j);if(d)return Y(xe(m(d),{state:typeof d=="object"?xe({},he,d.state):he,force:Te,replace:re}),Z||j);const g=j;g.redirectedFrom=Z;let T;return!Te&&af(s,J,j)&&(T=Rn(16,{to:g,from:J}),_t(J,J,!0,!1)),(T?Promise.resolve(T):ie(g,J)).catch(O=>St(O)?St(O,2)?O:Fe(O):ye(O,g,J)).then(O=>{if(O){if(St(O,2))return Y(xe({replace:re},m(O.to),{state:typeof O.to=="object"?xe({},he,O.to.state):he,force:Te}),Z||g)}else O=X(g,J,!0,re,he);return Q(g,J,O),O})}function D(k,Z){const j=w(k,Z);return j?Promise.reject(j):Promise.resolve()}function ie(k,Z){let j;const[J,he,Te]=rd(k,Z);j=ao(J.reverse(),"beforeRouteLeave",k,Z);for(const d of J)d.leaveGuards.forEach(g=>{j.push(zt(g,k,Z))});const re=D.bind(null,k,Z);return j.push(re),gn(j).then(()=>{j=[];for(const d of i.list())j.push(zt(d,k,Z));return j.push(re),gn(j)}).then(()=>{j=ao(he,"beforeRouteUpdate",k,Z);for(const d of he)d.updateGuards.forEach(g=>{j.push(zt(g,k,Z))});return j.push(re),gn(j)}).then(()=>{j=[];for(const d of k.matched)if(d.beforeEnter&&!Z.matched.includes(d))if(mt(d.beforeEnter))for(const g of d.beforeEnter)j.push(zt(g,k,Z));else j.push(zt(d.beforeEnter,k,Z));return j.push(re),gn(j)}).then(()=>(k.matched.forEach(d=>d.enterCallbacks={}),j=ao(Te,"beforeRouteEnter",k,Z),j.push(re),gn(j))).then(()=>{j=[];for(const d of l.list())j.push(zt(d,k,Z));return j.push(re),gn(j)}).catch(d=>St(d,8)?d:Promise.reject(d))}function Q(k,Z,j){for(const J of r.list())J(k,Z,j)}function X(k,Z,j,J,he){const Te=w(k,Z);if(Te)return Te;const re=Z===Dt,d=mn?history.state:{};j&&(J||re?o.replace(k.fullPath,xe({scroll:re&&d&&d.scroll},he)):o.push(k.fullPath,he)),u.value=k,_t(k,Z,j,re),Fe()}let V;function q(){V||(V=o.listen((k,Z,j)=>{if(!De.listening)return;const J=v(k),he=R(J);if(he){Y(xe(he,{replace:!0}),J).catch(Kn);return}c=J;const Te=u.value;mn&&mf(fl(Te.fullPath,j.delta),qs()),ie(J,Te).catch(re=>St(re,12)?re:St(re,2)?(Y(re.to,J).then(d=>{St(d,20)&&!j.delta&&j.type===os.pop&&o.go(-1,!1)}).catch(Kn),Promise.reject()):(j.delta&&o.go(-j.delta,!1),ye(re,J,Te))).then(re=>{re=re||X(J,Te,!1),re&&(j.delta&&!St(re,8)?o.go(-j.delta,!1):j.type===os.pop&&St(re,20)&&o.go(-1,!1)),Q(J,Te,re)}).catch(Kn)}))}let le=Dn(),Ie=Dn(),de;function ye(k,Z,j){Fe(k);const J=Ie.list();return J.length?J.forEach(he=>he(k,Z,j)):console.error(k),Promise.reject(k)}function Pe(){return de&&u.value!==Dt?Promise.resolve():new Promise((k,Z)=>{le.add([k,Z])})}function Fe(k){return de||(de=!k,q(),le.list().forEach(([Z,j])=>k?j(k):Z()),le.reset()),k}function _t(k,Z,j,J){const{scrollBehavior:he}=e;if(!mn||!he)return Promise.resolve();const Te=!j&&_f(fl(k.fullPath,0))||(J||!j)&&history.state&&history.state.scroll||null;return si().then(()=>he(k,Z,Te)).then(re=>re&&gf(re)).catch(re=>ye(re,k,Z))}const Je=k=>o.go(k);let je;const ct=new Set,De={currentRoute:u,listening:!0,addRoute:_,removeRoute:C,hasRoute:A,getRoutes:E,resolve:v,options:e,push:x,replace:F,go:Je,back:()=>Je(-1),forward:()=>Je(1),beforeEach:i.add,beforeResolve:l.add,afterEach:r.add,onError:Ie.add,isReady:Pe,install(k){const Z=this;k.component("RouterLink",td),k.component("RouterView",id),k.config.globalProperties.$router=Z,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(u)}),mn&&!je&&u.value===Dt&&(je=!0,x(o.location).catch(he=>{}));const j={};for(const he in Dt)j[he]=fe(()=>u.value[he]);k.provide(Qs,Z),k.provide(ci,ls(j)),k.provide(Oo,u);const J=k.unmount;ct.add(k),k.unmount=function(){ct.delete(k),ct.size<1&&(c=Dt,V&&V(),V=null,u.value=Dt,je=!1,de=!1),J()}}};return De}function gn(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function rd(e,t){const n=[],s=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let l=0;l<i;l++){const r=t.matched[l];r&&(e.matched.find(c=>On(c,r))?s.push(r):n.push(r));const u=e.matched[l];u&&(t.matched.find(c=>On(c,u))||o.push(u))}return[n,s,o]}function ad(){return gt(Qs)}function fi(){return gt(ci)}function di(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s?s.push(n):e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&(n?s.splice(s.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var s=e.get(t);s&&s.slice().map(function(o){o(n)}),(s=e.get("*"))&&s.slice().map(function(o){o(t,n)})}}}class Xs{constructor(t){this.rand_high=t||3735929054,this.rand_low=t^1231121986}random(t,n){this.rand_high=(this.rand_high<<16)+(this.rand_high>>16)+this.rand_low&4294967295,this.rand_low=this.rand_low+this.rand_high&4294967295;const s=(this.rand_high>>>0)/4294967295;return t+s*(n-t+1)|0}choice(t){return t[this.random(0,t.length-1)]}shuffle(t){const n=t.slice();for(let s=0;s<=n.length-2;s++){const o=this.random(s,n.length-1),i=n[s];n[s]=n[o],n[o]=i}return n}static serialize(t){return{rand_high:t.rand_high,rand_low:t.rand_low}}static unserialize(t){const n=new Xs(0);return n.rand_high=t.rand_high,n.rand_low=t.rand_low,n}}const ud=e=>{let t=e.toLowerCase();return t=t.replace(/[^a-z0-9]+/g,"-"),t=t.replace(/^-|-$/,""),t},Ts=(e,t)=>{const n=`${e}`;return n.length>=t.length?n:t.substr(0,t.length-n.length)+n},hi=(...e)=>{const t=n=>(...s)=>{const o=new Date,i=Ts(o.getHours(),"00"),l=Ts(o.getMinutes(),"00"),r=Ts(o.getSeconds(),"00");console[n](`${i}:${l}:${r}`,...e,...s)};return{log:t("log"),error:t("error"),info:t("info")}},cd=()=>Date.now().toString(36)+Math.random().toString(36).substring(2);function fd(e){return e.top+1<<0|e.right+1<<2|e.bottom+1<<4|e.left+1<<6}function dd(e){return{top:(e>>0&3)-1,right:(e>>2&3)-1,bottom:(e>>4&3)-1,left:(e>>6&3)-1}}function hd(e){return[e.idx,e.pos.x,e.pos.y,e.z,e.owner,e.group]}function pd(e){return{idx:e[0],pos:{x:e[1],y:e[2]},z:e[3],owner:e[4],group:e[5]}}function gd(e){return[e.id,e.x,e.y,e.d,e.name,e.color,e.bgcolor,e.points,e.ts]}function md(e){return{id:e[0],x:e[1],y:e[2],d:e[3],name:e[4],color:e[5],bgcolor:e[6],points:e[7],ts:e[8]}}function _d(e){return[e.id,e.rng.type||"",Xs.serialize(e.rng.obj),e.puzzle,e.players,e.scoreMode,e.shapeMode,e.snapMode,e.creatorUserId,e.hasReplay,e.gameVersion,e.private]}function vd(e){return{id:e[0],rng:{type:e[1],obj:Xs.unserialize(e[2])},puzzle:e[3],players:e[4],scoreMode:e[5],shapeMode:e[6],snapMode:e[7],creatorUserId:e[8],hasReplay:e[9],gameVersion:e[10],private:e[11]}}function yd(e,t){const n=e.width/e.tileSize;return{x:t%n,y:Math.floor(t/n)}}function wd(e,t){const n=e.width/e.pieceSize;return{x:t%n,y:Math.floor(t/n)}}const Ed=e=>{let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t=(t<<5)-t+s,t|=0}return t};function bd(e){const t=[];for(const n in e){const s=[n,e[n]].map(encodeURIComponent);t.push(s.join("="))}return t.length===0?"":`?${t.join("&")}`}var Ee={hash:Ed,slug:ud,pad:Ts,uniqId:cd,encodeShape:fd,decodeShape:dd,encodePiece:hd,decodePiece:pd,encodePlayer:gd,decodePlayer:md,encodeGame:_d,decodeGame:vd,coordByPieceIdxDeprecated:yd,coordByPieceIdx:wd,asQueryArgs:bd};const pi=(e,t)=>{localStorage.setItem(e,t)},gi=e=>localStorage.getItem(e),Pd=(e,t)=>{pi(e,`${t}`)},Td=(e,t)=>{const n=gi(e);if(n===null)return t;const s=parseInt(n,10);return isNaN(s)?t:s},xd=(e,t)=>{pi(e,t?"1":"0")},Cd=(e,t)=>{const n=gi(e);return n===null?t:n==="1"},Sd=(e,t)=>{pi(e,t)},Ad=(e,t)=>{const n=gi(e);return n===null?t:n};var Se={setInt:Pd,getInt:Td,setBool:xd,getBool:Cd,setStr:Sd,getStr:Ad};let zn="",xs="";const ps=async(e,t,n)=>new Promise((s,o)=>{const i=new window.XMLHttpRequest;i.open(e,t,!0),i.withCredentials=!0;for(const l in n.headers||{})i.setRequestHeader(l,n.headers[l]);i.setRequestHeader("Client-Id",zn),i.setRequestHeader("Client-Secret",xs),i.addEventListener("load",function(l){s({status:this.status,text:this.responseText,json:async()=>JSON.parse(this.responseText)})}),i.addEventListener("error",function(l){o(new Error("xhr error"))}),i.upload&&n.onUploadProgress&&i.upload.addEventListener("progress",function(l){n.onUploadProgress&&n.onUploadProgress(l)}),i.send(n.body||null)}),gs=e=>{let t=Se.getStr(e,"");return t||(t=Ee.uniqId(),Se.setStr(e,t)),t};var He={init:()=>{zn=gs("ID"),xs=gs("SECRET"),Re.eventBus.on("login",()=>{const e=Re.getMe();e&&(zn=e.clientId,xs=e.clientSecret)}),Re.eventBus.on("logout",()=>{zn=gs("ID"),xs=gs("SECRET")})},request:ps,get:(e,t)=>ps("get",e,t),delete:(e,t)=>ps("delete",e,t),post:(e,t)=>ps("post",e,t),clientId:()=>zn};const Od=async()=>await(await He.get("/admin/api/games",{})).json(),Rd=async e=>await(await He.delete(`/admin/api/games/${e}`,{})).json(),kd=async()=>await(await He.get("/admin/api/users",{})).json(),Nd=async()=>await(await He.get("/admin/api/images",{})).json(),Md=async e=>await(await He.delete(`/admin/api/images/${e}`,{})).json(),Ud=async()=>await(await He.get("/admin/api/groups",{})).json();var Ld={getGames:Od,deleteGame:Rd,getUsers:kd,getImages:Nd,deleteImage:Md,getGroups:Ud};const $d=async(e,t)=>await He.post("/api/auth",{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:e,pass:t})}),Id=async()=>await He.post("/api/logout",{headers:{Accept:"application/json","Content-Type":"application/json"},body:{}}),Dd=async()=>He.get("/api/conf",{}),Vd=async()=>He.get("/api/me",{}),Bd=async()=>He.get("/api/index-data",{}),zd=async e=>He.get(`/api/newgame-data${Ee.asQueryArgs(e.filters)}`,{}),Gd=async e=>He.get(`/api/replay-data${Ee.asQueryArgs(e)}`,{}),Hd=async e=>He.post("/api/save-image",{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e.id,title:e.title,tags:e.tags})}),Fd=async e=>He.post("/api/newgame",{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.gameSettings)}),jd=async e=>{const t=new FormData;return t.append("file",e.file,e.file.name),t.append("title",e.title),t.append("tags",e.tags),t.append("private",e.isPrivate),He.post("/api/upload",{body:t,onUploadProgress:n=>{e.onProgress(n.loaded/n.total)}})};var Wd={auth:$d,logout:Id,config:Dd,me:Vd,indexData:Bd,newgameData:zd,replayData:Gd,saveImage:Hd,newGame:Fd,upload:jd},Ue={pub:Wd,admin:Ld,init:He.init,clientId:He.clientId};let Us=null;const Ls=di();async function jr(){const e=await Ue.pub.me();Us=e.status===200?await e.json():null,Us?(console.log("loggedin"),Ls.emit("login")):(console.log("loggedout"),Ls.emit("logout"))}async function Kd(){return(await(await Ue.pub.logout()).json()).success?(Us=null,console.log("loggedout"),Ls.emit("logout"),{error:!1}):{error:"[2021-09-25 18:36]"}}async function Yd(e,t){const n=await Ue.pub.auth(e,t);return n.status===200?(await jr(),{error:!1}):n.status===401?{error:(await n.json()).reason}:{error:"Unknown error"}}var Re={getMe:()=>Us,eventBus:Ls,logout:Kd,login:Yd,init:jr};const Zd={key:0,class:"nav"},qd={href:"https://stand-with-ukraine.pp.ua/",class:"btn btn-ukraine",target:"_blank"},Qd={key:0,style:{float:"right"}},Xd={key:1,style:{float:"right"}},Jd=me({__name:"Nav",setup(e){const t=fi(),n=fe(()=>!["game","replay"].includes(String(t.name))),s=K(!1);async function o(){await Re.logout()}return Xe(async()=>{s.value=!!Re.getMe(),Re.eventBus.on("login",()=>{console.log("login"),s.value=!0}),Re.eventBus.on("logout",()=>{console.log("logout"),s.value=!1})}),(i,l)=>{const r=Be("router-link"),u=Be("icon");return ue(n)?(S(),U("ul",Zd,[a("li",null,[N(r,{class:"btn",to:{name:"index"}},{default:$e(()=>[$("Games overview")]),_:1})]),a("li",null,[N(r,{class:"btn",to:{name:"new-game"}},{default:$e(()=>[$("New game")]),_:1})]),a("li",null,[a("a",qd,[N(u,{icon:"ukraine-heart"}),$(" Stand with Ukraine "),N(u,{icon:"ukraine-heart"})])]),s.value?(S(),U("li",Qd,[a("span",{class:"btn",onClick:o},"Logout")])):oe("",!0),s.value?(S(),U("li",Xd,[N(r,{class:"btn",to:{name:"admin"}},{default:$e(()=>[$("Admin")]),_:1})])):oe("",!0)])):oe("",!0)}}}),eh={id:"app"},th=me({__name:"App",setup(e){return(t,n)=>{const s=Be("router-view");return S(),U("div",eh,[N(Jd),N(s)])}}}),Wr=1,mi=Wr*1e3,$s=mi*60,Is=$s*60,Ro=Is*24,nh=()=>{const e=new Date;return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},Kr=e=>{const t=Math.floor(e/Ro);e=e%Ro;const n=Math.floor(e/Is);e=e%Is;const s=Math.floor(e/$s);e=e%$s;const o=Math.floor(e/mi);return`${t}d ${n}h ${s}m ${o}s`},sh=(e,t)=>Kr(t-e);var kt={MS:Wr,SEC:mi,MIN:$s,HOUR:Is,DAY:Ro,timestamp:nh,timeDiffStr:sh,durationStr:Kr};const oh={class:"game-teaser"},ih={class:"game-info-text"},lh=a("br",null,null,-1),rh=a("br",null,null,-1),ah=a("br",null,null,-1),xl=me({__name:"GameTeaser",props:{game:null},setup(e){const s={"background-image":`url("${e.game.imageUrl.replace("uploads/","uploads/r/")+"-375x210.webp"}")`},o=(i,l)=>{const r=i,u=l||kt.timestamp();return`${kt.timeDiffStr(r,u)}`};return(i,l)=>{const r=Be("icon"),u=Be("router-link");return S(),U("div",oh,[a("div",{class:"game-teaser-inner",style:s},[N(u,{class:"game-info",to:{name:"game",params:{id:e.game.id}}},{default:$e(()=>[a("span",ih,[N(r,{icon:"puzzle-piece"}),$(" "+ee(e.game.piecesFinished)+"/"+ee(e.game.piecesTotal),1),lh,N(r,{icon:"sillouette"}),$(" "+ee(e.game.players),1),rh,e.game.finished?(S(),ve(r,{key:1,icon:"flag"})):(S(),ve(r,{key:0,icon:"clock"})),$(" "+ee(o(e.game.started,e.game.finished)),1),ah])]),_:1},8,["to"]),e.game.hasReplay?(S(),ve(u,{key:0,class:"game-replay",to:{name:"replay",params:{id:e.game.id}}},{default:$e(()=>[N(r,{icon:"replay"}),$(" Watch replay ")]),_:1},8,["to"])):oe("",!0)])])}}}),uh=a("h1",null,"Running games",-1),ch=a("h1",null,"Finished games",-1),fh=me({__name:"Index",setup(e){const t=K([]),n=K([]);return Xe(async()=>{const o=await(await Ue.pub.indexData()).json();t.value=o.gamesRunning,n.value=o.gamesFinished}),(s,o)=>(S(),U("div",null,[uh,(S(!0),U(pe,null,Ze(t.value,(i,l)=>(S(),ve(xl,{key:l,game:i},null,8,["game"]))),128)),ch,(S(!0),U(pe,null,Ze(n.value,(i,l)=>(S(),ve(xl,{key:l,game:i},null,8,["game"]))),128))]))}}),dh={class:"input-holder"},hh=["onKeydown"],ph={key:0,class:"enter-hint color-highlight"},gh={key:0,class:"autocomplete"},mh=["onClick"],_h=["onClick"],Yr=me({__name:"TagsInput",props:{modelValue:null,autocompleteTags:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=K(""),o=K(n.modelValue),i=K({idx:-1,values:[]}),l=K(),r=p=>{if(p.code==="ArrowDown"&&i.value.values.length>0)return i.value.idx<i.value.values.length-1&&i.value.idx++,p.stopPropagation(),!1;if(p.code==="ArrowUp"&&i.value.values.length>0)return i.value.idx>0&&i.value.idx--,p.stopPropagation(),!1;if(p.key===",")return c(),p.stopPropagation(),!1;if(p.code==="Escape")return i.value.values=[],i.value.idx=-1,p.stopPropagation(),!1;s.value&&n.autocompleteTags?(i.value.values=n.autocompleteTags(s.value,o.value),i.value.idx=-1):(i.value.values=[],i.value.idx=-1)},u=p=>{const h=p.replace(/,/g,"").trim();!h||(o.value.includes(h)||o.value.push(h),s.value="",i.value.values=[],i.value.idx=-1,t("update:modelValue",o.value),l.value.focus())},c=()=>{const p=i.value.idx>=0?i.value.values[i.value.idx]:s.value;u(p)},f=p=>{o.value=o.value.filter(h=>h!==p),t("update:modelValue",o.value)};return ze(()=>n.modelValue,p=>{o.value=p}),(p,h)=>(S(),U("div",null,[a("div",dh,[Ce(a("input",{ref_key:"inputEl",ref:l,class:"input",type:"text","onUpdate:modelValue":h[0]||(h[0]=_=>s.value=_),placeholder:"Plants, People",onKeydown:[Co(Ns(c,["prevent"]),["enter"]),Co(Ns(c,["prevent"]),["tab"])],onKeyup:r},null,40,hh),[[Nt,s.value]]),s.value?(S(),U("div",ph,"[Press ENTER/TAB to add]")):oe("",!0)]),i.value.values?(S(),U("div",gh,[a("ul",null,[(S(!0),U(pe,null,Ze(i.value.values,(_,C)=>(S(),U("li",{key:C,class:Tt({active:C===i.value.idx}),onClick:E=>u(_)},ee(_),11,mh))),128))])])):oe("",!0),(S(!0),U(pe,null,Ze(o.value,(_,C)=>(S(),U("span",{key:C,class:"bit is-clickable",onClick:E=>f(_)},ee(_)+" \u2716",9,_h))),128))]))}}),vh={class:"overlay-content"},$t=me({__name:"Overlay",emits:["bgclick","close"],setup(e,{emit:t}){const n=K(),s=o=>{o.code==="Escape"&&window.getComputedStyle(n.value).display!=="none"&&t("close")};return Xe(()=>{window.addEventListener("keyup",s)}),Ln(()=>{window.removeEventListener("keyup",s)}),(o,i)=>(S(),U("div",{class:"overlay",ref_key:"el",ref:n},[a("div",{class:"overlay-background",onClick:i[0]||(i[0]=l=>t("bgclick"))}),a("div",vh,[vr(o.$slots,"default")])],512))}}),yh=["title"],_i=me({__name:"ResponsiveImage",props:{src:null,title:{default:""},height:{default:"100%"},width:{default:"100%"}},setup(e){const t=e,n=fe(()=>({display:"inline-block",verticalAlign:"text-bottom",backgroundImage:`url('${t.src}')`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:t.width,height:t.height}));return(s,o)=>(S(),U("div",{style:Mt(ue(n)),title:e.title},null,12,yh))}}),wh=a("div",{class:"drop-target"},null,-1),Eh={key:0,class:"has-image"},bh={key:1},Ph={class:"upload"},Th=a("div",{class:"upload-content"},[$(" How to upload an image? Choose any of the following methods: "),a("ul",null,[a("li",null,"Click this area to select an image for upload "),a("li",null,"Drag and drop an image into the area"),a("li",null,"Paste an image URL"),a("li",null,"Paste an image")]),a("div",{class:"hint"},` Don't worry, the image will not show up in the gallery unless "Post to gallery" was clicked. `)],-1),xh={class:"area-settings"},Ch=a("td",null,[a("label",null,"Title")],-1),Sh=a("tr",null,[a("td",{colspan:"2"},[a("div",{class:"hint"},"Feel free to leave a credit to the artist/photographer in the title :)")])],-1),Ah=a("td",null,[a("label",null,"Private Image")],-1),Oh={class:"checkbox-only"},Rh=a("tr",null,[a("td",{colspan:"2"},[a("div",{class:"hint"},"Private images won't show up in the gallery.")])],-1),kh=a("td",null,[a("label",null,"Tags")],-1),Nh={class:"area-buttons"},Mh=["disabled"],Uh=["disabled"],Lh=a("br",null,null,-1),$h=me({__name:"NewImageDialog",props:{autocompleteTags:null,uploadProgress:null,uploading:null},emits:["setupGameClick","postToGalleryClick","close"],setup(e,{emit:t}){const n=e,s=async X=>{const V=await i(X),q=await o(V);return l(q.toDataURL())},o=async X=>{const V=document.createElement("canvas"),q=V.getContext("2d");return V.width=X.width,V.height=X.height,q.drawImage(X,0,0),V},i=async X=>new Promise((V,q)=>{const le=new Image;le.crossOrigin="anonymous",le.onload=()=>{V(le)},le.onerror=Ie=>{q(Ie)},le.src=X});function l(X){const V=X.split(","),q=V[0].match(/:(.*?);/);if(!q)return null;const le=q[1],Ie=atob(V[1]);let de=Ie.length;const ye=new Uint8Array(de);for(;de--;)ye[de]=Ie.charCodeAt(de);return new Blob([ye],{type:le})}const r=K(""),u=K(null),c=K(""),f=K([]),p=K(!1),h=K(!1),_=K(!1),C=fe(()=>n.uploadProgress?Math.round(n.uploadProgress*100):0),E=fe(()=>n.uploading?!1:!!(r.value&&u.value)),A=fe(()=>n.uploading?!1:!!(r.value&&u.value)),v=()=>{r.value="",u.value=null,c.value="",f.value=[],p.value=!1,h.value=!1},m=X=>{var le;const V=(le=X.dataTransfer)==null?void 0:le.items;if(!V||V.length===0)return null;const q=V[0];return q.type.startsWith("image/")?q:null},w=async X=>{if(!X.clipboardData)return;const V=X.clipboardData.getData("text");if(V){if(_.value)return;if(V.match(/^https?:\/\//)){const le="/api/proxy?"+new URLSearchParams({url:V});try{const Ie=await s(le);Ie?F(Ie):console.error("unable to transform image data url into blob")}catch(Ie){console.error("unable to transform image http url into blob",Ie)}}else if(V.match(/^data:image\/([a-z]+);base64,/))try{const le=l(V);le?F(le):console.error("unable to transform image data url into blob")}catch(le){console.error("unable to transform image data url into blob",le)}else console.log(V)}const q=X.clipboardData.files[0];!q||F(q)},x=X=>{const V=X.target;if(!V.files)return;const q=V.files[0];!q||F(q)},F=X=>{if(!X.type.startsWith("image/")){console.error("file type is not supported",X.type);return}const V=new FileReader;V.readAsDataURL(X),V.onload=q=>{r.value=q.target.result,u.value=X}},R=()=>{!u.value||(t("postToGalleryClick",{file:u.value,title:c.value,tags:f.value,isPrivate:p.value}),v())},Y=()=>{!u.value||(t("setupGameClick",{file:u.value,title:c.value,tags:f.value,isPrivate:p.value}),v())},D=X=>{h.value=!1;const V=m(X);if(!V)return!1;const q=V.getAsFile();return q&&(u.value=q,F(q),X.preventDefault()),!1},ie=X=>(m(X)&&(h.value=!0,X.preventDefault()),!1),Q=()=>{h.value=!1};return Xe(()=>{window.addEventListener("paste",w)}),Ln(()=>{window.removeEventListener("paste",w)}),(X,V)=>{const q=Be("icon");return S(),ve($t,{class:"new-image-dialog",onClose:V[7]||(V[7]=le=>t("close"))},{default:$e(()=>[a("div",{class:Tt(["area-image",{"has-image":!!r.value,"no-image":!r.value,droppable:h.value}]),onDrop:D,onDragover:ie,onDragleave:Q},[wh,r.value?(S(),U("div",Eh,[a("span",{class:"remove btn",onClick:V[0]||(V[0]=le=>r.value="")},"X"),N(_i,{src:r.value},null,8,["src"])])):(S(),U("div",bh,[a("label",Ph,[a("input",{type:"file",style:{display:"none"},onChange:x,accept:"image/*"},null,32),Th])]))],34),a("div",xh,[a("table",null,[a("tr",null,[Ch,a("td",null,[Ce(a("input",{type:"text","onUpdate:modelValue":V[1]||(V[1]=le=>c.value=le),placeholder:"Flower by @artist",onFocus:V[2]||(V[2]=le=>_.value=!0),onBlur:V[3]||(V[3]=le=>_.value=!1)},null,544),[[Nt,c.value]])])]),Sh,a("tr",null,[Ah,a("td",Oh,[Ce(a("input",{type:"checkbox","onUpdate:modelValue":V[4]||(V[4]=le=>p.value=le)},null,512),[[sn,p.value]])])]),Rh,a("tr",null,[kh,a("td",null,[N(Yr,{modelValue:f.value,"onUpdate:modelValue":V[5]||(V[5]=le=>f.value=le),autocompleteTags:e.autocompleteTags},null,8,["modelValue","autocompleteTags"])])])])]),a("div",Nh,[p.value?oe("",!0):(S(),U("button",{key:0,class:"btn",disabled:!ue(E),onClick:R},[e.uploading==="postToGallery"?(S(),U(pe,{key:0},[$("Uploading ("+ee(ue(C))+"%)",1)],64)):(S(),U(pe,{key:1},[N(q,{icon:"preview"}),$(" Post to gallery")],64))],8,Mh)),a("button",{class:"btn",disabled:!ue(A),onClick:Y},[e.uploading==="setupGame"?(S(),U(pe,{key:0},[$("Uploading ("+ee(ue(C))+"%)",1)],64)):p.value?(S(),U(pe,{key:1},[N(q,{icon:"puzzle-piece"}),$(" Set up game")],64)):(S(),U(pe,{key:2},[N(q,{icon:"puzzle-piece"}),$(" Post to gallery "),Lh,$(" + set up game")],64))],8,Uh),a("button",{class:"btn",onClick:V[6]||(V[6]=le=>t("close"))},"Cancel")])]),_:1})}}}),Ih={class:"area-image"},Dh={class:"has-image"},Vh={class:"area-settings"},Bh=a("td",null,[a("label",null,"Title")],-1),zh=a("tr",null,[a("td",{colspan:"2"},[a("div",{class:"hint"},"Feel free to leave a credit to the artist/photographer in the title :)")])],-1),Gh=a("td",null,[a("label",null,"Tags")],-1),Hh={class:"area-buttons"},Fh=me({__name:"EditImageDialog",props:{image:null,autocompleteTags:null},emits:["saveClick","close"],setup(e,{emit:t}){const n=e,s=K(""),o=K([]),i=r=>{s.value=r.title,o.value=r.tags.map(u=>u.title)},l=()=>{t("saveClick",{id:n.image.id,title:s.value,tags:o.value})};return i(n.image),ze(()=>n.image,r=>{i(r)}),(r,u)=>{const c=Be("icon");return S(),ve($t,{class:"edit-image-dialog",onClose:u[3]||(u[3]=f=>t("close"))},{default:$e(()=>[a("div",Ih,[a("div",Dh,[N(_i,{src:e.image.url,title:e.image.title},null,8,["src","title"])])]),a("div",Vh,[a("table",null,[a("tr",null,[Bh,a("td",null,[Ce(a("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f),placeholder:"Flower by @artist"},null,512),[[Nt,s.value]])])]),zh,a("tr",null,[Gh,a("td",null,[N(Yr,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=f=>o.value=f),autocompleteTags:e.autocompleteTags},null,8,["modelValue","autocompleteTags"])])])])]),a("div",Hh,[a("button",{class:"btn",onClick:l},[N(c,{icon:"preview"}),$(" Save image")]),a("button",{class:"btn",onClick:u[2]||(u[2]=f=>t("close"))},"Cancel")])]),_:1})}}});var an=(e=>(e[e.FINAL=0]="FINAL",e[e.ANY=1]="ANY",e))(an||{}),Zn=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ANY=1]="ANY",e[e.FLAT=2]="FLAT",e))(Zn||{}),kn=(e=>(e[e.NORMAL=0]="NORMAL",e[e.REAL=1]="REAL",e))(kn||{});const jh={class:"area-image"},Wh={class:"has-image"},Kh={key:0,class:"image-title"},Yh={key:0,class:"image-title-title"},Zh={key:1,class:"image-title-dim"},qh={class:"area-settings"},Qh=a("td",null,[a("label",null,"Pieces")],-1),Xh=a("td",null,[a("label",null,"Scoring: ")],-1),Jh=a("br",null,null,-1),ep=a("td",null,[a("label",null,"Shapes: ")],-1),tp=a("br",null,null,-1),np=a("br",null,null,-1),sp=a("td",null,[a("label",null,"Snapping: ")],-1),op=a("br",null,null,-1),ip=a("td",null,[a("label",null,"Private Game")],-1),lp={class:"checkbox-only"},rp=["disabled"],ap=a("tr",null,[a("td",{colspan:"2"},[a("div",{class:"hint"},"Private games won't show up in the game overview.")])],-1),up={key:0},cp=a("td",null,[a("label",null,"Tags: ")],-1),fp={class:"area-buttons"},dp=["disabled"],hp=me({__name:"NewGameDialog",props:{image:null,forcePrivate:{type:Boolean}},emits:["newGame","close"],setup(e,{emit:t}){const n=e,s=K(1e3),o=K(n.forcePrivate),i=K(an.ANY),l=K(Zn.NORMAL),r=K(kn.NORMAL),u=fe(()=>!(!h.value||!n.image||!n.image.url||![0,1].includes(c.value))),c=fe(()=>parseInt(`${i.value}`,10)),f=fe(()=>parseInt(`${l.value}`,10)),p=fe(()=>parseInt(`${r.value}`,10)),h=fe(()=>parseInt(`${s.value}`,10)),_=()=>{t("newGame",{tiles:h.value,private:o.value,image:n.image,scoreMode:c.value,shapeMode:f.value,snapMode:p.value})};return(C,E)=>{const A=Be("icon");return S(),ve($t,{class:"new-game-dialog",onClose:E[10]||(E[10]=v=>t("close"))},{default:$e(()=>[a("div",jh,[a("div",Wh,[N(_i,{src:e.image.url,title:e.image.title},null,8,["src","title"])]),e.image.title||e.image.width||e.image.height?(S(),U("div",Kh,[e.image.title?(S(),U("span",Yh,'"'+ee(e.image.title)+'"',1)):oe("",!0),e.image.width||e.image.height?(S(),U("span",Zh,"("+ee(e.image.width)+" \u2715 "+ee(e.image.height)+")",1)):oe("",!0)])):oe("",!0)]),a("div",qh,[a("table",null,[a("tr",null,[Qh,a("td",null,[Ce(a("input",{type:"text","onUpdate:modelValue":E[0]||(E[0]=v=>s.value=v)},null,512),[[Nt,s.value]])])]),a("tr",null,[Xh,a("td",null,[a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[1]||(E[1]=v=>i.value=v),value:"1"},null,512),[[Et,i.value]]),$(" Any (Score when pieces are connected to each other or on final location)")]),Jh,a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[2]||(E[2]=v=>i.value=v),value:"0"},null,512),[[Et,i.value]]),$(" Final (Score when pieces are put to their final location)")])])]),a("tr",null,[ep,a("td",null,[a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[3]||(E[3]=v=>l.value=v),value:"0"},null,512),[[Et,l.value]]),$(" Normal")]),tp,a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[4]||(E[4]=v=>l.value=v),value:"1"},null,512),[[Et,l.value]]),$(" Any (Flat pieces can occur anywhere)")]),np,a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[5]||(E[5]=v=>l.value=v),value:"2"},null,512),[[Et,l.value]]),$(" Flat (All pieces flat on all sides)")])])]),a("tr",null,[sp,a("td",null,[a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[6]||(E[6]=v=>r.value=v),value:"0"},null,512),[[Et,r.value]]),$(" Normal (Pieces snap to final destination and to each other)")]),op,a("label",null,[Ce(a("input",{type:"radio","onUpdate:modelValue":E[7]||(E[7]=v=>r.value=v),value:"1"},null,512),[[Et,r.value]]),$(" Real (Pieces snap only to corners, already snapped pieces and to each other)")])])]),a("tr",null,[ip,a("td",lp,[Ce(a("input",{disabled:e.forcePrivate,type:"checkbox","onUpdate:modelValue":E[8]||(E[8]=v=>o.value=v)},null,8,rp),[[sn,o.value]])])]),ap,e.image.tags.length?(S(),U("tr",up,[cp,a("td",null,[(S(!0),U(pe,null,Ze(e.image.tags,(v,m)=>(S(),U("span",{key:m,class:"bit"},ee(v.title),1))),128))])])):oe("",!0)])]),a("div",fp,[a("button",{class:"btn",disabled:!ue(u),onClick:_},[N(A,{icon:"puzzle-piece"}),$(" Generate Puzzle ")],8,dp),a("button",{class:"btn",onClick:E[9]||(E[9]=v=>t("close"))},"Cancel")])]),_:1})}}}),pp=["src"],gp=["onClick"],mp={class:"imageteaser-info"},_p=me({__name:"ImageTeaser",props:{image:{type:Object,required:!0}},emits:["click","editClick"],setup(e,{emit:t}){const n=e,s=K(null),o=fe(()=>n.image.url.replace("uploads/","uploads/r/")+"-375x0.webp"),i=fe(()=>!s.value||!s.value.id?!1:s.value.id===n.image.uploaderUserId),l=()=>{t("click")},r=()=>{t("editClick")};return Xe(async()=>{s.value=Re.getMe()}),(u,c)=>{const f=Be("icon");return S(),U("div",{class:"imageteaser",onClick:l},[a("img",{src:ue(o)},null,8,pp),ue(i)?(S(),U("div",{key:0,class:"btn edit",onClick:Ns(r,["stop"])},[N(f,{icon:"edit"})],8,gp)):oe("",!0),a("div",mp,ee(e.image.gameCount)+"x plays ",1)])}}}),vp=["data-index"],yp=me({__name:"MasonryWall",props:{items:null,columnWidth:{default:400},gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0}},emits:["redraw","redraw-skip"],setup(e,{emit:t}){const n=e,{columnWidth:s,items:o,gap:i,rtl:l,ssrColumns:r}=_u(n),u=K([]),c=K(),f=fe(()=>({display:"flex",flexBasis:0,flexDirection:"column",flexGrow:1,height:["-webkit-max-content","-moz-max-content","max-content"],gap:`${i}px`})),p=()=>{const A=Math.floor((c.value.getBoundingClientRect().width+i.value)/(s.value+i.value));return A>0?A:1},h=A=>[...new Array(A)].map(()=>[]);if(r.value>0){const A=h(r.value);o.value.forEach((v,m)=>A[m%r.value].push(m)),u.value=A}async function _(A){if(A>=o.value.length)return;await si();const v=[...c.value.children];l.value&&v.reverse();const m=v.reduce((w,x)=>x.getBoundingClientRect().height<w.getBoundingClientRect().height?x:w);u.value[+m.dataset.index].push(A),await _(A+1)}async function C(A=!1){if(u.value.length===p()&&!A){t("redraw-skip");return}u.value=h(p());const v=window.scrollY;await _(0),window.scrollTo({top:v}),t("redraw")}const E=new ResizeObserver(()=>C());return Xe(()=>{C(),E.observe(c.value)}),ii(()=>E.unobserve(c.value)),ze([o,l],()=>C(!0)),ze([s,i],()=>C()),(A,v)=>(S(),U("div",{ref_key:"wall",ref:c,class:"masonry-wall",style:Mt({display:"flex",gap:`${ue(i)}px`})},[(S(!0),U(pe,null,Ze(u.value,(m,w)=>(S(),U("div",{key:w,class:"masonry-column","data-index":w,style:Mt(ue(f))},[(S(!0),U(pe,null,Ze(m,x=>(S(),U("div",{key:x,class:"masonry-item"},[vr(A.$slots,"default",{item:ue(o)[x],index:x},()=>[$(ee(ue(o)[x]),1)])]))),128))],12,vp))),128))],4))}}),wp=me({__name:"ImageLibrary",props:{images:null},emits:["imageClicked","imageEditClicked"],setup(e,{emit:t}){return(n,s)=>(S(),ve(yp,{items:e.images,"column-width":320,gap:10},{default:$e(({item:o,index:i})=>[(S(),ve(_p,{image:o,onClick:l=>t("imageClicked",o),onEditClick:l=>t("imageEditClicked",o),key:i},null,8,["image","onClick","onEditClick"]))]),_:1},8,["items"]))}}),Ep=a("div",{class:"hint"},"(The image you upload will be added to the public gallery.)",-1),bp={key:0},Pp=["onClick"],Tp=mc('<option value="date_desc">Newest first</option><option value="date_asc">Oldest first</option><option value="alpha_asc">A-Z</option><option value="alpha_desc">Z-A</option><option value="game_count_asc">Most plays first</option><option value="game_count_desc">Least plays first</option>',6),xp=[Tp],Cp=me({__name:"NewGame",setup(e){const t=ad(),n=K({sort:"date_desc",tags:[]}),s=K([]),o=K([]),i=K({id:0,uploaderUserId:null,filename:"",url:"",title:"",tags:[],created:0,width:0,height:0}),l=K(""),r=K(!1),u=K(""),c=K(0),f=fe(()=>o.value.filter(R=>R.total>0)),p=(R,Y)=>o.value.filter(D=>!Y.includes(D.title)&&D.title.toLowerCase().startsWith(R.toLowerCase())).slice(0,10).map(D=>D.title),h=R=>{n.value.tags.includes(R.slug)?n.value.tags=n.value.tags.filter(Y=>Y!==R.slug):n.value.tags.push(R.slug),C()},_=async()=>{const Y=await(await Ue.pub.newgameData({filters:n.value})).json();s.value=Y.images,o.value=Y.tags},C=async()=>{await _()},E=R=>{i.value=R,r.value=!1,l.value="new-game"},A=R=>{i.value=R,l.value="edit-image"},v=async R=>{c.value=0;const Y=await Ue.pub.upload({file:R.file,title:R.title,tags:R.tags,isPrivate:R.isPrivate,onProgress:D=>{c.value=D}});return c.value=1,await Y.json()},m=async R=>{const D=await(await Ue.pub.saveImage(R)).json();D.ok?(l.value="",await _()):alert(D.error)},w=async R=>{u.value="postToGallery",await v(R),u.value="",l.value="",await _()},x=async R=>{u.value="setupGame";const Y=await v(R);u.value="",_(),Y.value=Y,r.value=R.isPrivate,l.value="new-game"},F=async R=>{const Y=await Ue.pub.newGame({gameSettings:R});if(Y.status===200){const D=await Y.json();t.push({name:"game",params:{id:D.id}})}};return Xe(async()=>{await _()}),(R,Y)=>(S(),U("div",null,[a("div",{class:Tt(["upload-image-teaser",{blurred:l.value!==""}])},[a("div",{class:"btn is-big",onClick:Y[0]||(Y[0]=D=>l.value="new-image")},"Upload your image"),Ep],2),a("div",{class:Tt({blurred:l.value!==""})},[o.value.length>0?(S(),U("label",bp,[$(" Tags: "),(S(!0),U(pe,null,Ze(ue(f),(D,ie)=>(S(),U("span",{class:Tt(["bit is-clickable",{on:n.value.tags.includes(D.slug)}]),key:ie,onClick:Q=>h(D)},ee(D.title)+" ("+ee(D.total)+")",11,Pp))),128))])):oe("",!0),a("label",null,[$(" Sort by: "),Ce(a("select",{"onUpdate:modelValue":Y[1]||(Y[1]=D=>n.value.sort=D),onChange:C},xp,544),[[Zc,n.value.sort]])])],2),N(wp,{class:Tt({blurred:l.value!==""}),images:s.value,onImageClicked:E,onImageEditClicked:A},null,8,["class","images"]),l.value==="new-image"?(S(),ve($h,{key:0,autocompleteTags:p,onClose:Y[2]||(Y[2]=D=>l.value=""),onBgclick:Y[3]||(Y[3]=D=>l.value=""),uploadProgress:c.value,uploading:u.value,onPostToGalleryClick:w,onSetupGameClick:x},null,8,["uploadProgress","uploading"])):oe("",!0),l.value==="edit-image"?(S(),ve(Fh,{key:1,autocompleteTags:p,onClose:Y[4]||(Y[4]=D=>l.value=""),onBgclick:Y[5]||(Y[5]=D=>l.value=""),onSaveClick:m,image:i.value},null,8,["image"])):oe("",!0),i.value&&l.value==="new-game"?(S(),ve(hp,{key:2,onClose:Y[6]||(Y[6]=D=>l.value=""),onBgclick:Y[7]||(Y[7]=D=>l.value=""),onNewGame:F,image:i.value,forcePrivate:r.value},null,8,["image","forcePrivate"])):oe("",!0)]))}}),Sp=e=>{let t=!1;const n=()=>{t=!0},s=e.fps||60,o=e.slow||1,i=e.update,l=e.render,r=window.requestAnimationFrame,u=1/s,c=o*u;let f,p=0,h=window.performance.now();const _=()=>{for(f=window.performance.now(),p=p+Math.min(1,(f-h)/1e3);p>c;)p=p-c,i(u);l(p/o),h=f,t||r(_)};return r(_),{stop:n}};let Cl=.1;const Ap=6,Op=.05;class ko{constructor(t=null){this.x=0,this.y=0,this.curZoom=1,t&&this.fromSnapshot(t)}calculateZoomCapping(t,n,s,o){Cl=Math.max(.1,t/s,n/o)}snapshot(){return{x:this.x,y:this.y,curZoom:this.curZoom}}getCurrentZoom(){return this.curZoom}fromSnapshot(t){this.x=t.x,this.y=t.y,this.curZoom=t.curZoom}reset(){this.x=0,this.y=0,this.curZoom=1}move(t,n){this.x+=t/this.curZoom,this.y+=n/this.curZoom}calculateNewZoom(t){const n=t==="in"?1:-1,s=this.curZoom+Op*this.curZoom*n;return Math.min(Math.max(s,Cl),Ap)}canZoom(t){return this.curZoom!=this.calculateNewZoom(t)}setZoom(t,n){if(this.curZoom==t)return!1;const s=1-this.curZoom/t;return this.move(-n.x*s,-n.y*s),this.curZoom=t,!0}zoom(t,n){return this.setZoom(this.calculateNewZoom(t),n)}viewportToWorld(t){const{x:n,y:s}=this.viewportToWorldRaw(t);return{x:Math.round(n),y:Math.round(s)}}viewportToWorldRaw(t){return{x:t.x/this.curZoom-this.x,y:t.y/this.curZoom-this.y}}worldToViewport(t){const{x:n,y:s}=this.worldToViewportRaw(t);return{x:Math.round(n),y:Math.round(s)}}worldToViewportRaw(t){return{x:(t.x+this.x)*this.curZoom,y:(t.y+this.y)*this.curZoom}}worldDimToViewport(t){const{w:n,h:s}=this.worldDimToViewportRaw(t);return{w:Math.round(n),h:Math.round(s)}}worldDimToViewportRaw(t){return{w:t.w*this.curZoom,h:t.h*this.curZoom}}viewportDimToWorld(t){const{w:n,h:s}=this.viewportDimToWorldRaw(t);return{w:Math.round(n),h:Math.round(s)}}viewportDimToWorldRaw(t){return{w:t.w/this.curZoom,h:t.h/this.curZoom}}}const Rp=hi("Debug.js");let No=0,Zr=0;const kp=e=>{No=performance.now(),Zr=e},Np=e=>{const t=performance.now(),n=t-No;n>Zr&&Rp.log(e+": "+n),No=t};var Vt={checkpoint_start:kp,checkpoint:Np};const Mp=4,Up=1,Lp=4,$p=2,Ip=3,Dp=1,Vp=2,Bp=4,zp=3,Gp=1,Hp=2,Fp=3,jp=4,Wp=5,Kp=6,Yp=7,Zp=8,qp=9,Qp=10,Xp=11,Jp=12,eg=13,tg=14,ng=15,sg=16,og=17,ig=18,lg=19,rg=20,ag=21,ug=22,cg=23,fg=1,dg=2,hg=3,pg=4;var L={EV_SERVER_EVENT:Up,EV_SERVER_INIT:Lp,EV_CLIENT_EVENT:$p,EV_CLIENT_INIT:Ip,GAME_VERSION:Mp,LOG_HEADER:Dp,LOG_ADD_PLAYER:Vp,LOG_UPDATE_PLAYER:Bp,LOG_HANDLE_INPUT:zp,INPUT_EV_MOVE:qp,INPUT_EV_MOUSE_DOWN:Gp,INPUT_EV_MOUSE_UP:Hp,INPUT_EV_MOUSE_MOVE:Fp,INPUT_EV_ZOOM_IN:jp,INPUT_EV_ZOOM_OUT:Wp,INPUT_EV_BG_COLOR:Kp,INPUT_EV_PLAYER_COLOR:Yp,INPUT_EV_PLAYER_NAME:Zp,INPUT_EV_TOGGLE_INTERFACE:cg,INPUT_EV_TOGGLE_PREVIEW:Qp,INPUT_EV_TOGGLE_SOUNDS:Xp,INPUT_EV_REPLAY_TOGGLE_PAUSE:Jp,INPUT_EV_REPLAY_SPEED_UP:eg,INPUT_EV_REPLAY_SPEED_DOWN:tg,INPUT_EV_TOGGLE_PLAYER_NAMES:ng,INPUT_EV_CENTER_FIT_PUZZLE:sg,INPUT_EV_TOGGLE_FIXED_PIECES:og,INPUT_EV_TOGGLE_LOOSE_PIECES:ig,INPUT_EV_TOGGLE_TABLE:ug,INPUT_EV_STORE_POS:lg,INPUT_EV_RESTORE_POS:rg,INPUT_EV_CONNECTION_CLOSE:ag,CHANGE_DATA:fg,CHANGE_PIECE:dg,CHANGE_PLAYER:hg,PLAYER_SNAP:pg};const gg=hi("Communication.js"),mg=1001,vi=4e3,qr=0,Mo=1,yi=2,Qr=3,Xr=4;let dt,Uo=[],Lo=e=>{Uo.push(e)},$o=[],Io=e=>{$o.push(e)};function _g(e){Lo=e;for(const t of Uo)Lo(t);Uo=[]}function vg(e){Io=e;for(const t of $o)Io(t);$o=[]}let Do=qr;const Vn=e=>{Do!==e&&(Do=e,Io(e))};function Jr(e){if(Do===yi)try{dt.send(JSON.stringify(e))}catch{gg.info("unable to send message.. maybe because ws is invalid?")}}let yn,Tn,Vo=0;function ea(e=2e4){dt.readyState==dt.OPEN&&dt.send(""),Vo=setTimeout(ea,e)}function Sl(){Vo&&clearTimeout(Vo)}function yg(e,t,n){return yn=0,Tn={},Vn(Qr),new Promise(s=>{dt=new WebSocket(e,n+"|"+t),dt.onopen=()=>{Vn(yi),Jr([L.EV_CLIENT_INIT]),ea()},dt.onmessage=o=>{const i=JSON.parse(o.data),l=i[0];if(l===L.EV_SERVER_INIT){const r=i[1];s(r)}else if(l===L.EV_SERVER_EVENT){const r=i[1],u=i[2];if(r===n&&Tn[u]){delete Tn[u];return}Lo(i)}else throw`[ 2021-05-09 invalid connect msgType ${l} ]`},dt.onerror=()=>{throw Sl(),Vn(Mo),"[ 2021-05-15 onerror ]"},dt.onclose=o=>{Sl(),o.code===vi||o.code===mg?Vn(Xr):Vn(Mo)}})}async function wg(e,t){return await(await Ue.pub.replayData({gameId:e,offset:t})).json()}function Eg(){dt&&dt.close(vi),yn=0,Tn={}}function bg(e){yn++,Tn[yn]=e,Jr([L.EV_CLIENT_EVENT,yn,Tn[yn]])}var Gt={connect:yg,requestReplayData:wg,disconnect:Eg,sendClientEvent:bg,onServerChange:_g,onConnectionStateChange:vg,CODE_CUSTOM_DISCONNECT:vi,CONN_STATE_NOT_CONNECTED:qr,CONN_STATE_DISCONNECTED:Mo,CONN_STATE_CLOSED:Xr,CONN_STATE_CONNECTED:yi,CONN_STATE_CONNECTING:Qr};function Pg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Tg(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ta(e,t){const n=e.x-t.x,s=e.y-t.y;return Math.sqrt(n*n+s*s)}function xg(e,t){return e.x>=t.x&&e.x<=t.x+t.w&&e.y>=t.y&&e.y<=t.y+t.h}function Bo(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function Cg(e,t,n){return{x:e.x+t,y:e.y+n,w:e.w,h:e.h}}function Sg(e,t){return!(t.x>e.x+e.w||e.x>t.x+t.w||t.y>e.y+e.h||e.y>t.y+t.h)}function Ag(e,t){return ta(Bo(e),Bo(t))}var Me={pointSub:Pg,pointAdd:Tg,pointDistance:ta,pointInBounds:xg,rectCenter:Bo,rectMoved:Cg,rectCenterDistance:Ag,rectsOverlap:Sg};function xn(e=0,t=0){const n=document.createElement("canvas");return n.width=e,n.height=t,n}async function Og(e){return new Promise(t=>{const n=new Image;n.onload=()=>{createImageBitmap(n).then(t)},n.src=e})}async function Rg(e,t,n){const s=xn(t,n);return s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),await createImageBitmap(s)}function kg(e,t,n){if(n==="ukraine"){const i=xn(e.width,e.height),l=i.getContext("2d"),r=t.height/1.75;l.save(),l.drawImage(t,0,0),l.fillStyle="#0057B7",l.globalCompositeOperation="source-in",l.fillRect(0,0,t.width,r),l.restore(),l.save(),l.globalCompositeOperation="destination-over",l.drawImage(e,0,0),l.restore();const u=xn(e.width,e.height/2),c=u.getContext("2d");return c.save(),c.drawImage(t,0,-r),c.fillStyle="#FFDD00",c.globalCompositeOperation="source-in",c.fillRect(0,0,t.width,t.height),c.restore(),c.save(),c.globalCompositeOperation="destination-over",c.drawImage(e,0,-r),c.restore(),l.drawImage(u,0,r),i}const s=xn(e.width,e.height),o=s.getContext("2d");return o.save(),o.drawImage(t,0,0),o.fillStyle=n,o.globalCompositeOperation="source-in",o.fillRect(0,0,t.width,t.height),o.restore(),o.save(),o.globalCompositeOperation="destination-over",o.drawImage(e,0,0),o.restore(),s}function Ng(e,t,n){let o,i;t.w>t.h?(o=Math.min(t.w,10240),i=o*t.h/t.w):(i=Math.min(t.h,10240),o=i*t.w/t.h);const l=xn(o,i),r=e.width*n,u=e.height*n,c=l.getContext("2d");for(let f=0;f<l.width;f+=r)for(let p=0;p<l.height;p+=u)c.drawImage(e,f,p,r,u);return l}var nt={createCanvas:xn,loadImageToBitmap:Og,resizeBitmap:Rg,colorizedCanvas:kg,repeat:Ng};const Al=hi("PuzzleGraphics.js");async function Mg(e,t,n){Al.log("start createPuzzleTileBitmaps");const s=n.tileSize,o=n.tileMarginWidth,i=n.tileDrawSize,l=s/100,r=[0,0,40,15,37,5,37,5,40,0,38,-5,38,-5,20,-20,50,-20,50,-20,80,-20,62,-5,62,-5,60,0,63,5,63,5,65,15,100,0],u=new Array(t.length),c={};function f(E){const A=`${E.top}${E.right}${E.left}${E.bottom}`;if(c[A])return c[A];const v=new Path2D,m={x:o,y:o},w=Me.pointAdd(m,{x:s,y:0}),x=Me.pointAdd(w,{x:0,y:s}),F=Me.pointSub(x,{x:s,y:0});if(v.moveTo(m.x,m.y),E.top!==0)for(let R=0;R<r.length/6;R++){const Y=Me.pointAdd(m,{x:r[R*6+0]*l,y:E.top*r[R*6+1]*l}),D=Me.pointAdd(m,{x:r[R*6+2]*l,y:E.top*r[R*6+3]*l}),ie=Me.pointAdd(m,{x:r[R*6+4]*l,y:E.top*r[R*6+5]*l});v.bezierCurveTo(Y.x,Y.y,D.x,D.y,ie.x,ie.y)}else v.lineTo(w.x,w.y);if(E.right!==0)for(let R=0;R<r.length/6;R++){const Y=Me.pointAdd(w,{x:-E.right*r[R*6+1]*l,y:r[R*6+0]*l}),D=Me.pointAdd(w,{x:-E.right*r[R*6+3]*l,y:r[R*6+2]*l}),ie=Me.pointAdd(w,{x:-E.right*r[R*6+5]*l,y:r[R*6+4]*l});v.bezierCurveTo(Y.x,Y.y,D.x,D.y,ie.x,ie.y)}else v.lineTo(x.x,x.y);if(E.bottom!==0)for(let R=0;R<r.length/6;R++){const Y=Me.pointSub(x,{x:r[R*6+0]*l,y:E.bottom*r[R*6+1]*l}),D=Me.pointSub(x,{x:r[R*6+2]*l,y:E.bottom*r[R*6+3]*l}),ie=Me.pointSub(x,{x:r[R*6+4]*l,y:E.bottom*r[R*6+5]*l});v.bezierCurveTo(Y.x,Y.y,D.x,D.y,ie.x,ie.y)}else v.lineTo(F.x,F.y);if(E.left!==0)for(let R=0;R<r.length/6;R++){const Y=Me.pointSub(F,{x:-E.left*r[R*6+1]*l,y:r[R*6+0]*l}),D=Me.pointSub(F,{x:-E.left*r[R*6+3]*l,y:r[R*6+2]*l}),ie=Me.pointSub(F,{x:-E.left*r[R*6+5]*l,y:r[R*6+4]*l});v.bezierCurveTo(Y.x,Y.y,D.x,D.y,ie.x,ie.y)}else v.lineTo(m.x,m.y);return c[A]=v,v}const p=nt.createCanvas(i,i),h=p.getContext("2d"),_=nt.createCanvas(i,i),C=_.getContext("2d");for(const E of t){const A=Ee.decodePiece(E),v=Ug(n,A.idx),m=f(Ee.decodeShape(n.shapes[A.idx]));h.clearRect(0,0,i,i),h.save(),h.lineWidth=2,h.stroke(m),h.globalCompositeOperation="source-in",h.drawImage(e,v.x-o,v.y-o,i,i,0,0,i,i),h.restore(),h.save(),h.globalCompositeOperation="source-in",h.globalAlpha=.2,h.fillStyle="black",h.fillRect(0,0,p.width,p.height),h.restore(),h.save(),h.clip(m),h.drawImage(e,v.x-o,v.y-o,i,i,0,0,i,i),h.restore(),h.save(),h.clip(m),h.strokeStyle="rgba(0,0,0,.4)",h.lineWidth=0,h.shadowColor="black",h.shadowBlur=2,h.shadowOffsetX=-1,h.shadowOffsetY=-1,h.stroke(m),h.restore(),h.save(),h.clip(m),h.strokeStyle="rgba(255,255,255,.4)",h.lineWidth=0,h.shadowColor="white",h.shadowBlur=2,h.shadowOffsetX=1,h.shadowOffsetY=1,h.stroke(m),h.restore(),C.clearRect(0,0,i,i),C.save(),C.lineWidth=1,C.stroke(m),C.globalCompositeOperation="source-in",C.drawImage(e,v.x-o,v.y-o,i,i,0,0,i,i),C.restore(),h.drawImage(_,0,0),u[A.idx]=await createImageBitmap(p)}return Al.log("end createPuzzleTileBitmaps"),u}function Ug(e,t){const n=Ee.coordByPieceIdxDeprecated(e,t);return{x:n.x*e.tileSize,y:n.y*e.tileSize,w:e.tileSize,h:e.tileSize}}async function Lg(e){const t=await nt.loadImageToBitmap(e.info.image.url),n=await nt.resizeBitmap(t,e.info.width,e.info.height);return await Mg(n,e.tiles,e.info)}var $g={loadPuzzleBitmaps:Lg};const na=30,ne={};function Ig(e){return!!ne[e]||!1}function Dg(e,t){return{id:e,x:0,y:0,d:0,name:null,color:null,bgcolor:null,points:0,ts:t}}function Vg(e,t){ne[e]=t}function Bg(e){delete ne[e]}function Js(e,t){let n=0;for(const s of ne[e].players){if(Ee.decodePlayer(s).id===t)return n;n++}return-1}function zg(e,t){return ne[e].players.length>t?Ee.decodePlayer(ne[e].players[t]).id:null}function fn(e,t){const n=Js(e,t);return n===-1?null:Ee.decodePlayer(ne[e].players[n])}function wi(e,t,n){const s=Js(e,t);s===-1?ne[e].players.push(Ee.encodePlayer(n)):ne[e].players[s]=Ee.encodePlayer(n)}function Gg(e,t,n){ne[e].puzzle.tiles[t]=Ee.encodePiece(n)}function Hg(e,t){ne[e].puzzle.data=t}function sa(e,t){return Js(e,t)!==-1}function Fg(e,t){return da(ne[e],t)}function jg(e,t){return bm(ne[e],t)}function Wg(e,t,n){sa(e,t)?We(e,t,{ts:n}):wi(e,t,Dg(t,n))}function Kg(e){return ne[e]||null}function zo(e){return Ci(ne[e])}function Yg(e){return ha(ne[e])}function uo(e){return ne[e].scoreMode}function oa(e){return ne[e].snapMode}function ia(e){return ne[e].gameVersion}function Go(e){return xi(ne[e])}function Zg(e){return ne[e].puzzle.tiles.map(Ee.decodePiece).sort((n,s)=>n.z-s.z)}function We(e,t,n){const s=fn(e,t);if(s!==null){for(const o of Object.keys(n))s[o]=n[o];wi(e,t,s)}}function ms(e,t){for(const n of Object.keys(t))ne[e].puzzle.data[n]=t[n]}function un(e,t,n){for(const s of Object.keys(n)){const o=Ee.decodePiece(ne[e].puzzle.tiles[t]);o[s]=n[s],ne[e].puzzle.tiles[t]=Ee.encodePiece(o)}}const hn=(e,t)=>Ee.decodePiece(ne[e].puzzle.tiles[t]),Ds=(e,t)=>hn(e,t).group,qg=(e,t)=>{const n=ne[e].puzzle.info;return t===0||t===n.tilesX-1||t===n.tiles-n.tilesX||t===n.tiles-1},la=(e,t)=>{const n=ne[e].puzzle.info,s={x:(n.table.width-n.width)/2,y:(n.table.height-n.height)/2},o=om(e,t);return Me.pointAdd(s,o)},Cs=(e,t)=>hn(e,t).pos,Ei=e=>ia(e)<=3?Xg(e):Qg(e),Qg=e=>({x:0,y:0,w:Pi(e),h:Ti(e)}),Xg=e=>{const t=Pi(e),n=Ti(e),s=Math.round(t/4),o=Math.round(n/4);return{x:0-s,y:0-o,w:t+2*s,h:n+2*o}},Jg=(e,t)=>hn(e,t).z,Gn=(e,t)=>{for(const n of ne[e].puzzle.tiles){const s=Ee.decodePiece(n);if(s.owner===t)return s.idx}return-1},em=(e,t)=>{const n=Gn(e,t);return n<0?null:ne[e].puzzle.tiles[n]},ra=e=>ne[e].puzzle.info.tileDrawOffset,bi=e=>ne[e].puzzle.info.tileDrawSize,tm=e=>ua(ne[e]),nm=e=>ca(ne[e]),Ol=e=>ne[e].puzzle.data.maxGroup,Rl=e=>ne[e].puzzle.data.maxZ,sm=(e,t)=>{let n=0;for(const s of t){const o=Jg(e,s);o>n&&(n=o)}return n};function om(e,t){const n=ne[e].puzzle.info,s=Ee.coordByPieceIdxDeprecated(n,t),o=s.x*n.tileSize,i=s.y*n.tileSize;return{x:o,y:i}}function im(e,t){const n=ne[e].puzzle.info,s=Ee.coordByPieceIdxDeprecated(n,t);return[s.y>0?t-n.tilesX:-1,s.x<n.tilesX-1?t+1:-1,s.y<n.tilesY-1?t+n.tilesX:-1,s.x>0?t-1:-1]}const kl=(e,t,n)=>{for(const s of t)un(e,s,{z:n})},aa=(e,t,n)=>{const s=Cs(e,t),o=Me.pointAdd(s,n);un(e,t,{pos:o})},_s=(e,t,n)=>ia(e)>=3?rm(e,t,n):lm(e,t,n),lm=(e,t,n)=>{const s=bi(e),o=Ei(e),i=n;for(const l of t){const r=hn(e,l);r.pos.x+n.x<o.x?i.x=Math.max(o.x-r.pos.x,i.x):r.pos.x+s+n.x>o.x+o.w&&(i.x=Math.min(o.x+o.w-r.pos.x+s,i.x)),r.pos.y+n.y<o.y?i.y=Math.max(o.y-r.pos.y,i.y):r.pos.y+s+n.y>o.y+o.h&&(i.y=Math.min(o.y+o.h-r.pos.y+s,i.y))}if(!i.x&&!i.y)return!1;for(const l of t)aa(e,l,i);return!0},rm=(e,t,n)=>{const s=Ei(e),o=bi(e)+2*ra(e),i=s.x,l=s.y,r=i+s.w-o,u=l+s.h-o,c=n;for(const f of t){const p=hn(e,f);n.x<0?c.x=Math.max(i-p.pos.x,c.x):c.x=Math.min(r-p.pos.x,c.x),n.y<0?c.y=Math.max(l-p.pos.y,c.y):c.y=Math.min(u-p.pos.y,c.y)}if(!c.x&&!c.y)return!1;for(const f of t)aa(e,f,c);return!0},am=(e,t)=>um(e,t)===-1,um=(e,t)=>hn(e,t).owner,Nl=(e,t)=>{for(const n of t)un(e,n,{owner:-1,z:1})},co=(e,t,n)=>{for(const s of t)un(e,s,{owner:n})};function cm(e,t){return At(e,t).length}function At(e,t){const n=ne[e].puzzle.tiles,s=Ee.decodePiece(n[t]),o=[];if(s.group)for(const i of n){const l=Ee.decodePiece(i);l.group===s.group&&o.push(l.idx)}else o.push(s.idx);return o}const fm=(e,t)=>{const n=ne[e].puzzle.info,s=ne[e].puzzle.tiles;let o=-1,i=-1;for(let l=0;l<s.length;l++){const r=Ee.decodePiece(s[l]);if(r.owner!==0)continue;const u={x:r.pos.x,y:r.pos.y,w:n.tileSize,h:n.tileSize};Me.pointInBounds(t,u)&&(o===-1||r.z>o)&&(o=r.z,i=l)}return i},dm=(e,t)=>{const n=fn(e,t);return n?n.bgcolor:null},hm=(e,t)=>{const n=fn(e,t);return n?n.color:null},pm=(e,t)=>{const n=fn(e,t);return n?n.name:null},Ml=(e,t)=>{const n=fn(e,t);return n?n.points:0},gm=(e,t,n)=>{const s=Ds(e,t),o=Ds(e,n);return!!(s&&s===o)},Pi=e=>ne[e].puzzle.info.table.width,Ti=e=>ne[e].puzzle.info.table.height,mm=e=>ne[e].puzzle,_m=e=>ne[e].rng.obj,vm=e=>ne[e].puzzle.info.width,ym=e=>ne[e].puzzle.info.height,wm=(e,t)=>{if(oa(e)===kn.REAL){for(const n of t)if(qg(e,n))return!0;return!1}return!0};function Em(e,t,n,s){const o=ne[e].puzzle,i=[],l=()=>{i.push([L.CHANGE_DATA,o.data])},r=_=>{i.push([L.CHANGE_PIECE,Ee.encodePiece(hn(e,_))])},u=_=>{for(const C of _)r(C)},c=()=>{const _=fn(e,t);!_||i.push([L.CHANGE_PLAYER,Ee.encodePlayer(_)])};let f=!1;const p=(_,C,E)=>{const A=ne[_].puzzle.tiles,v=Ds(_,C),m=Ds(_,E);let w;const x=[];if(v&&x.push(v),m&&x.push(m),v)w=v;else if(m)w=m;else{const F=Ol(_)+1;ms(_,{maxGroup:F}),l(),w=Ol(_)}if(un(_,C,{group:w}),r(C),un(_,E,{group:w}),r(E),x.length>0)for(const F of A){const R=Ee.decodePiece(F);x.includes(R.group)&&(un(_,R.idx,{group:w}),r(R.idx))}},h=n[0];if(h===L.INPUT_EV_CONNECTION_CLOSE){const _=Gn(e,t);if(_>=0){const C=At(e,_);co(e,C,0),u(C)}}else if(h===L.INPUT_EV_BG_COLOR){const _=n[1];We(e,t,{bgcolor:_,ts:s}),c()}else if(h===L.INPUT_EV_PLAYER_COLOR){const _=n[1];We(e,t,{color:_,ts:s}),c()}else if(h===L.INPUT_EV_PLAYER_NAME){const _=`${n[1]}`.substr(0,16);We(e,t,{name:_,ts:s}),c()}else if(h===L.INPUT_EV_MOVE){const _=n[1],C=n[2],E=fn(e,t);if(E){const A=E.x-_,v=E.y-C;We(e,t,{ts:s,x:A,y:v}),c();const m=Gn(e,t);if(m>=0){const w=At(e,m),x={x:-_,y:-C};_s(e,w,x)&&u(w)}}}else if(h===L.INPUT_EV_MOUSE_DOWN){const _=n[1],C=n[2],E={x:_,y:C};We(e,t,{d:1,ts:s}),c();const A=fm(e,E);if(A>=0){const v=Rl(e)+1;ms(e,{maxZ:v}),l();const m=At(e,A);kl(e,m,Rl(e)),co(e,m,t),u(m)}}else if(h===L.INPUT_EV_MOUSE_MOVE){const _=n[1],C=n[2];if(!n[5])We(e,t,{x:_,y:C,ts:s}),c();else{const A=Gn(e,t);if(A<0)We(e,t,{ts:s}),c();else{const v=n[1],m=n[2],w=n[3],x=n[4];We(e,t,{x:v,y:m,ts:s}),c();const F=At(e,A);_s(e,F,{x:w,y:x})&&u(F)}}}else if(h===L.INPUT_EV_MOUSE_UP){const C=Gn(e,t);if(C>=0){const E=At(e,C);co(e,E,0),u(E);const A=Cs(e,C),v=la(e,C);if(wm(e,E)&&Me.pointDistance(v,A)<o.info.snapDistance){const m=Me.pointSub(v,A);_s(e,E,m),Nl(e,E),u(E);let w=Ml(e,t);uo(e)===an.FINAL?w+=E.length:uo(e)===an.ANY&&(w+=1),We(e,t,{d:0,ts:s,points:w}),c(),Go(e)===zo(e)&&(ms(e,{finished:s}),l()),f=!0}else{const m=(x,F,R,Y)=>{const D=ne[x].puzzle.info;if(R<0||gm(x,F,R))return!1;const ie=Cs(x,F),Q=Me.pointAdd(Cs(x,R),{x:Y[0]*D.tileSize,y:Y[1]*D.tileSize});if(Me.pointDistance(ie,Q)<D.snapDistance){const X=Me.pointSub(Q,ie);let V=At(x,F);if(_s(x,V,X),p(x,F,R),V=At(x,F),am(x,R))Nl(x,V);else{const q=sm(x,V);kl(x,V,q)}return u(V),!0}return!1};let w=!1;for(const x of At(e,C)){const F=im(e,x);if(m(e,x,F[0],[0,1])||m(e,x,F[1],[-1,0])||m(e,x,F[2],[0,-1])||m(e,x,F[3],[1,0])){w=!0;break}}if(w&&uo(e)===an.ANY){const x=Ml(e,t)+1;We(e,t,{d:0,ts:s,points:x}),c()}else We(e,t,{d:0,ts:s}),c();w&&oa(e)===kn.REAL&&Go(e)===zo(e)&&(ms(e,{finished:s}),l()),w&&(f=!0)}}else We(e,t,{d:0,ts:s}),c()}else if(h===L.INPUT_EV_ZOOM_IN){const _=n[1],C=n[2];We(e,t,{x:_,y:C,ts:s}),c()}else if(h===L.INPUT_EV_ZOOM_OUT){const _=n[1],C=n[2];We(e,t,{x:_,y:C,ts:s}),c()}else We(e,t,{ts:s}),c();return f&&i.push([L.PLAYER_SNAP,t]),i}function ua(e){return e.puzzle.data.started}function ca(e){return e.puzzle.data.finished}function xi(e){let t=0;for(const n of e.puzzle.tiles)Ee.decodePiece(n).owner===-1&&t++;return t}function Ci(e){return e.puzzle.tiles.length}function fa(e){return e.players.map(Ee.decodePlayer)}function da(e,t){const n=t-na*kt.SEC;return fa(e).filter(s=>s.ts>=n)}function bm(e,t){const n=t-na*kt.SEC;return fa(e).filter(s=>s.ts<n&&s.points>0)}function ha(e){var n;const t=((n=e.puzzle.info.image)==null?void 0:n.url)||e.puzzle.info.imageUrl;if(!t)throw new Error("[2021-07-11] no image url set");return t}function Pm(e){return xi(e)===Ci(e)}var ce={setGame:Vg,unsetGame:Bg,loaded:Ig,playerExists:sa,getActivePlayers:Fg,getIdlePlayers:jg,addPlayer:Wg,getFinishedPiecesCount:Go,getPieceCount:zo,getImageUrl:Yg,get:Kg,getGroupedPieceCount:cm,getPlayerBgColor:dm,getPlayerColor:hm,getPlayerName:pm,getPlayerIndexById:Js,getPlayerIdByIndex:zg,changePlayer:We,setPlayer:wi,setPiece:Gg,setPuzzleData:Hg,getBounds:Ei,getTableWidth:Pi,getTableHeight:Ti,getPuzzle:mm,getRng:_m,getPuzzleWidth:vm,getPuzzleHeight:ym,getPiecesSortedByZIndex:Zg,getFirstOwnedPiece:em,getPieceDrawOffset:ra,getPieceDrawSize:bi,getFinalPiecePos:la,getStartTs:tm,getFinishTs:nm,handleInput:Em,Game_getStartTs:ua,Game_getFinishTs:ca,Game_getFinishedPiecesCount:xi,Game_getPieceCount:Ci,Game_getActivePlayers:da,Game_getImageUrl:ha,Game_isFinished:Pm};let pa=-10,ga=20,Ho=2,ma=15;const Tm=5,xm=5,Si=1,Cm=200,Ul=10,Sm=100,Am=10,Om=1,Rm=5;function km(e){const t=e.random(0,255),n=e.random(0,255),s=e.random(0,255);return"rgba("+t+","+n+","+s+", 0.8)"}class Ll{constructor(t){this.radius=Ul,this.previousRadius=Ul,this.explodingDuration=Sm,this.hasExploded=!1,this.alive=!0,this.color=km(t),this.px=window.innerWidth/4+Math.random()*window.innerWidth/2,this.py=window.innerHeight,this.vx=pa+Math.random()*ga,this.vy=(Ho+Math.random()*ma)*-1,this.duration=0}update(t){if(this.hasExploded){const n=Cm-this.radius;this.previousRadius=this.radius,this.radius+=n/Am,this.explodingDuration--,this.explodingDuration==0&&(this.alive=!1)}else this.vx+=0,this.vy+=Si,this.vy>=0&&t&&this.explode(t),this.px+=this.vx,this.py+=this.vy}draw(t){t.beginPath(),t.arc(this.px,this.py,this.previousRadius,0,Math.PI*2,!1),this.hasExploded||(t.fillStyle=this.color,t.lineWidth=1,t.fill())}explode(t){this.hasExploded=!0;const n=3+Math.floor(Math.random()*3);for(let s=0;s<n;s++){const o=10+Math.floor(Math.random()*21),i=Tm+Math.random()*xm,l=2*Math.PI/o,r=Math.random()*l;for(let u=0;u<o;u++)t.push(new Nm(this,u*l+r,i))}}}class Nm{constructor(t,n,s){this.px=t.px,this.py=t.py,this.vx=Math.cos(n)*s,this.vy=Math.sin(n)*s,this.color=t.color,this.duration=40+Math.floor(Math.random()*20),this.alive=!0,this.radius=0}update(){this.vx+=0,this.vy+=Si/10,this.px+=this.vx,this.py+=this.vy,this.radius=3,this.duration--,this.duration<=0&&(this.alive=!1)}draw(t){t.beginPath(),t.arc(this.px,this.py,this.radius,0,Math.PI*2,!1),t.fillStyle=this.color,t.lineWidth=1,t.fill()}}class Mm{constructor(t,n){this.canvas=t,this.rng=n,this.ctx=this.canvas.getContext("2d"),this.resize(),this.readyBombs=[],this.explodedBombs=[],this.particles=[],window.addEventListener("resize",()=>{this.resize()})}setSpeedParams(){let t=0,n=0;for(;t<this.canvas.height&&n>=0;)n+=Si,t+=n;Ho=n/2,ma=n-Ho;const s=1/4*this.canvas.width/(n/2);pa=-s,ga=2*s}resize(){this.setSpeedParams()}init(){this.readyBombs=[],this.explodedBombs=[],this.particles=[];for(let t=0;t<Om;t++)this.readyBombs.push(new Ll(this.rng))}update(){Math.random()*100<Rm&&this.readyBombs.push(new Ll(this.rng));const t=[];for(;this.explodedBombs.length>0;){const o=this.explodedBombs.shift();if(!o)break;o.update(),o.alive&&t.push(o)}this.explodedBombs=t;const n=[];for(;this.readyBombs.length>0;){const o=this.readyBombs.shift();if(!o)break;o.update(this.particles),o.hasExploded?this.explodedBombs.push(o):n.push(o)}this.readyBombs=n;const s=[];for(;this.particles.length>0;){const o=this.particles.shift();if(!o)break;o.update(),o.alive&&s.push(o)}this.particles=s}render(){this.ctx.beginPath(),this.ctx.fillStyle="rgba(0, 0, 0, 0.1)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.readyBombs.length;t++)this.readyBombs[t].draw(this.ctx);for(let t=0;t<this.explodedBombs.length;t++)this.explodedBombs[t].draw(this.ctx);for(let t=0;t<this.particles.length;t++)this.particles[t].draw(this.ctx)}}var Um="/assets/click.bb97cb07.mp3",Lm=Object.freeze(Object.defineProperty({__proto__:null,default:Um},Symbol.toStringTag,{value:"Module"})),$m="/assets/click2.98536db5.mp3",Im=Object.freeze(Object.defineProperty({__proto__:null,default:$m},Symbol.toStringTag,{value:"Module"})),Dm="/assets/Oak-none-3275x2565mm-Architextures.cc917130.jpg",Vm=Object.freeze(Object.defineProperty({__proto__:null,default:Dm},Symbol.toStringTag,{value:"Module"})),Bm="/assets/wood-dark.1e21ffc1.jpg",zm=Object.freeze(Object.defineProperty({__proto__:null,default:Bm},Symbol.toStringTag,{value:"Module"})),Gm="/assets/wood-light.ae1bd383.jpg",Hm=Object.freeze(Object.defineProperty({__proto__:null,default:Gm},Symbol.toStringTag,{value:"Module"})),Fm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVQ4je1RywrAIAxLxP//5exixRWlVgZelpOKeTQFfnDypgy3eLIkSLLL8mxGPoHsU2hPAgDHBLvRX6hZZw/fwT0BtlLSONqCbWAmEIqMZOCDDlaDR3N03gOyDCn+y4DWmAAAAABJRU5ErkJggg==",jm=Object.freeze(Object.defineProperty({__proto__:null,default:Fm},Symbol.toStringTag,{value:"Module"})),Wm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAARElEQVQ4jWNgGAU0Af+hmBCbgYGBgYERhwHEAEYGBgYGJtIdiApYyLAZBVDsAqoagC1ACQJyY4ERg0GCISh6KA4DigEAou8LC+LnIJoAAAAASUVORK5CYII=",Km=Object.freeze(Object.defineProperty({__proto__:null,default:Wm},Symbol.toStringTag,{value:"Module"})),Ym="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVQ4ja1TQQ7AIAgD///n7jCozA2Hbk00jbG1KIrcARszTugoBs49qioZj7r2kKACptkyAOCJsJuA+GzglwHjvMSSWFVaENWVASxh5eRLiq5fN/ASjI89VcP2K3hHpq1cEXNaMfnrL3TDZP2tDuoOA6MzCCXWr38AAAAASUVORK5CYII=",Zm=Object.freeze(Object.defineProperty({__proto__:null,default:Ym},Symbol.toStringTag,{value:"Module"})),qm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAU0lEQVQ4jWNgoAH4D8X42HDARKlt5BoAd82AuQAOGLGIYQQUPv0wF5CiCQUge4EsQ5C9QI4BjMguwBYeBAElscCIy1ZivMKIwSDBEBQ9FCckigEAU3QOD7TGvY4AAAAASUVORK5CYII=",Qm=Object.freeze(Object.defineProperty({__proto__:null,default:qm},Symbol.toStringTag,{value:"Module"}));const vs={"./assets/gfx/grab.png":jm,"./assets/gfx/grab_mask.png":Km,"./assets/gfx/hand.png":Zm,"./assets/gfx/hand_mask.png":Qm},fo={"./assets/textures/Oak-none-3275x2565mm-Architextures.jpg":Vm,"./assets/textures/wood-dark.jpg":zm,"./assets/textures/wood-light.jpg":Hm},$l={"./assets/sounds/click.mp3":Lm,"./assets/sounds/click2.mp3":Im};class Xm{async init(){this.Audio={CLICK:new Audio($l["./assets/sounds/click.mp3"].default),CLICK_2:new Audio($l["./assets/sounds/click2.mp3"].default)},this.Gfx={GRAB:await nt.loadImageToBitmap(vs["./assets/gfx/grab.png"].default),HAND:await nt.loadImageToBitmap(vs["./assets/gfx/hand.png"].default),GRAB_MASK:await nt.loadImageToBitmap(vs["./assets/gfx/grab_mask.png"].default),HAND_MASK:await nt.loadImageToBitmap(vs["./assets/gfx/hand_mask.png"].default)},this.Textures={WOOD_DARK:await nt.loadImageToBitmap(fo["./assets/textures/wood-dark.jpg"].default),WOOD_LIGHT:await nt.loadImageToBitmap(fo["./assets/textures/wood-light.jpg"].default),OAK_BROWN:await nt.loadImageToBitmap(fo["./assets/textures/Oak-none-3275x2565mm-Architextures.jpg"].default)}}}class Jm{constructor(t,n,s,o){this.canvas=t,this.window=n,this.viewport=s,this.MODE=o,this.events=[],this.KEYS_ON=!0,this.LEFT=!1,this.RIGHT=!1,this.UP=!1,this.DOWN=!1,this.ZOOM_IN=!1,this.ZOOM_OUT=!1,this.SHIFT=!1,this.mouseDown=!1,this.lastMouseRaw=null,this.lastMouseWorld=null}_toWorldPoint(t,n){const s=this.viewport.viewportToWorld({x:t,y:n});return[s.x,s.y]}_toWorldDim(t,n){const s=this.viewport.viewportDimToWorld({w:t,h:n});return[s.w,s.h]}_mousePos(t){return this._toWorldPoint(t.offsetX,t.offsetY)}_canvasCenter(){return this._toWorldPoint(this.canvas.width/2,this.canvas.height/2)}_key(t,n){!this.KEYS_ON||(n.code==="ShiftLeft"||n.code==="ShiftRight"?this.SHIFT=t:n.code==="ArrowUp"||n.code==="KeyW"?this.UP=t:n.code==="ArrowDown"||n.code==="KeyS"?this.DOWN=t:n.code==="ArrowLeft"||n.code==="KeyA"?this.LEFT=t:n.code==="ArrowRight"||n.code==="KeyD"?this.RIGHT=t:n.code==="KeyQ"?this.ZOOM_OUT=t:n.code==="KeyE"&&(this.ZOOM_IN=t))}_onMouseDown(t){this.lastMouseWorld=this._mousePos(t),this.lastMouseRaw=[t.offsetX,t.offsetY],t.button===0&&(this.mouseDown=!0,this.addEvent([L.INPUT_EV_MOUSE_DOWN,...this.lastMouseWorld]))}_onMouseUp(t){this.lastMouseWorld=this._mousePos(t),this.lastMouseRaw=[t.offsetX,t.offsetY],t.button===0&&(this.mouseDown=!1,this.addEvent([L.INPUT_EV_MOUSE_UP,...this.lastMouseWorld]))}_onMouseMove(t){if(!this.lastMouseRaw)return;this.lastMouseWorld=this._mousePos(t);const n=this._toWorldDim(-(this.lastMouseRaw[0]-t.offsetX),-(this.lastMouseRaw[1]-t.offsetY));this.addEvent([L.INPUT_EV_MOUSE_MOVE,...this.lastMouseWorld,...n,this.mouseDown?1:0]),this.lastMouseRaw=[t.offsetX,t.offsetY]}_onWheel(t){if(this.lastMouseWorld=this._mousePos(t),this.viewport.canZoom(t.deltaY<0?"in":"out")){const n=t.deltaY<0?L.INPUT_EV_ZOOM_IN:L.INPUT_EV_ZOOM_OUT;this.addEvent([n,...this.lastMouseWorld])}}_onKeyUp(t){this._key(!0,t)}_onKeyDown(t){this._key(!1,t)}_onKeyPress(t){if(!!this.KEYS_ON){if(this.MODE===Ht&&(t.code==="KeyI"?this.addEvent([L.INPUT_EV_REPLAY_SPEED_UP]):t.code==="KeyO"?this.addEvent([L.INPUT_EV_REPLAY_SPEED_DOWN]):t.code==="KeyP"&&this.addEvent([L.INPUT_EV_REPLAY_TOGGLE_PAUSE])),t.code==="KeyH")this.addEvent([L.INPUT_EV_TOGGLE_INTERFACE]);else if(t.code==="Space")this.addEvent([L.INPUT_EV_TOGGLE_PREVIEW]);else if(t.code==="KeyF")this.addEvent([L.INPUT_EV_TOGGLE_FIXED_PIECES]);else if(t.code==="KeyG")this.addEvent([L.INPUT_EV_TOGGLE_LOOSE_PIECES]);else if(t.code==="KeyM")this.addEvent([L.INPUT_EV_TOGGLE_SOUNDS]);else if(t.code==="KeyN")this.addEvent([L.INPUT_EV_TOGGLE_PLAYER_NAMES]);else if(t.code==="KeyT")this.addEvent([L.INPUT_EV_TOGGLE_TABLE]);else if(t.code==="KeyC")this.addEvent([L.INPUT_EV_CENTER_FIT_PUZZLE]);else for(let n=0;n<=9;n++)if(t.code===`Digit${n}`){const s=t.shiftKey?L.INPUT_EV_STORE_POS:L.INPUT_EV_RESTORE_POS;this.addEvent([s,n]);break}}}_onWndMouseDown(t){t.target===this.canvas&&t.detail>1&&t.preventDefault()}registerEvents(){this.canvas.addEventListener("mousedown",this._onMouseDown.bind(this)),this.canvas.addEventListener("mouseup",this._onMouseUp.bind(this)),this.canvas.addEventListener("mousemove",this._onMouseMove.bind(this)),this.canvas.addEventListener("wheel",this._onWheel.bind(this)),this.window.addEventListener("keydown",this._onKeyUp.bind(this)),this.window.addEventListener("keyup",this._onKeyDown.bind(this)),this.window.addEventListener("keypress",this._onKeyPress.bind(this)),this.window.addEventListener("mousedown",this._onWndMouseDown.bind(this))}unregisterEvents(){this.canvas.removeEventListener("mousedown",this._onMouseDown.bind(this)),this.canvas.removeEventListener("mouseup",this._onMouseUp.bind(this)),this.canvas.removeEventListener("mousemove",this._onMouseMove.bind(this)),this.canvas.removeEventListener("wheel",this._onWheel.bind(this)),this.window.removeEventListener("keydown",this._onKeyUp.bind(this)),this.window.removeEventListener("keyup",this._onKeyDown.bind(this)),this.window.removeEventListener("keypress",this._onKeyPress.bind(this)),this.window.removeEventListener("mousedown",this._onWndMouseDown.bind(this))}createSnapshotEvents(t,n){if(!this.lastMouseRaw||!this.lastMouseWorld)return;const s=new ko(t).viewportToWorld({x:this.lastMouseRaw[0],y:this.lastMouseRaw[1]}),o=new ko(n).viewportToWorld({x:this.lastMouseRaw[0],y:this.lastMouseRaw[1]}),i=[-(s.x-o.x),-(s.y-o.y)];this.addEvent([L.INPUT_EV_MOUSE_MOVE,...this.lastMouseWorld,...i,this.mouseDown?1:0])}addEvent(t){this.events.push(t)}consumeAll(){if(this.events.length===0)return[];const t=this.events.slice();return this.events=[],t}createKeyEvents(){const t=(this.LEFT?1:0)-(this.RIGHT?1:0),n=(this.UP?1:0)-(this.DOWN?1:0);if(t!==0||n!==0){const s=(this.SHIFT?24:12)*Math.sqrt(this.viewport.getCurrentZoom()),o=this.viewport.viewportDimToWorld({w:t*s,h:n*s});this.addEvent([L.INPUT_EV_MOVE,o.w,o.h]),this.lastMouseWorld&&(this.lastMouseWorld[0]-=o.w,this.lastMouseWorld[1]-=o.h)}if(!(this.ZOOM_IN&&this.ZOOM_OUT)){if(this.ZOOM_IN){if(this.viewport.canZoom("in")){const s=this.lastMouseWorld||this._canvasCenter();this.addEvent([L.INPUT_EV_ZOOM_IN,...s])}}else if(this.ZOOM_OUT&&this.viewport.canZoom("out")){const s=this.lastMouseWorld||this._canvasCenter();this.addEvent([L.INPUT_EV_ZOOM_OUT,...s])}}}setHotkeys(t){this.KEYS_ON=t}}class e_{constructor(t,n,s,o){this.bounds=t,this.assets=n,this.boardPos=s,this.boardDim=o,this.images={}}async init(){this.images.dark=await this._createTableGfx(this.assets.Textures.WOOD_DARK,!0),this.images.light=await this._createTableGfx(this.assets.Textures.WOOD_LIGHT,!1),this.images.brown=await this._createTableGfx(this.assets.Textures.OAK_BROWN,!0)}getImage(t){return this.images[t]}async _createTableGfx(t,n){const s=nt.repeat(t,this.bounds,3),o={w:s.width,h:s.height},i=o.w/this.bounds.w,l=s.getContext("2d");{const c={w:16,h:16};l.fillStyle="rgba(0, 0, 0, .5)",l.fillRect(0,0,o.w,c.h),l.fillRect(0,0+c.h,c.w,o.h-2*c.h),l.fillRect(0+o.w-c.w,0+c.h,c.w,o.h-2*c.h),l.fillRect(0,0+o.h-c.h,o.w,c.w)}const r=-this.bounds.x+this.boardPos.x,u=-this.bounds.y+this.boardPos.y;{const c={w:8,h:8};l.fillStyle="rgba(0, 0, 0, .5)",l.fillRect(i*(r-c.w),i*(u-c.h),i*(this.boardDim.w+2*c.w),i*c.h),l.fillRect(i*(r-c.w),i*u,i*c.h,i*this.boardDim.h),l.fillRect(i*(r+this.boardDim.w),i*u,i*c.w,i*this.boardDim.h),l.fillRect(i*(r-c.w),i*(u+this.boardDim.h),i*(this.boardDim.w+2*c.w),i*c.h)}return l.fillStyle=n?"rgba(0, 0, 0, .3)":"rgba(255, 255, 255, .3)",l.fillRect(i*r,i*u,i*this.boardDim.w,i*this.boardDim.h),await createImageBitmap(s)}}const _n=class{constructor(e,t){this.evts=e,this.viewport=t,this.viewportToggleSlot="",this.viewportSnapshots={}}snap(e){this.viewportSnapshots[e]=this.viewport.snapshot()}remove(e){delete this.viewportSnapshots[e]}handle(e){if(this.viewportSnapshots[_n.LAST]&&this.viewportToggleSlot===e){const t=this.viewport.snapshot(),n=this.viewportSnapshots[_n.LAST];return this.viewport.fromSnapshot(n),this.evts.createSnapshotEvents(t,n),delete this.viewportSnapshots[_n.LAST],_n.LAST}if(this.viewportSnapshots[e]){const t=this.viewportSnapshots[e],n=this.viewport.snapshot();return this.viewportSnapshots[_n.LAST]=n,this.viewportToggleSlot=e,this.viewport.fromSnapshot(t),this.evts.createSnapshotEvents(n,t),e}return null}};let vn=_n;vn.LAST="last";const ke={SOUND_VOLUME:"sound_volume",SOUND_ENABLED:"sound_enabled",OTHER_PLAYER_CLICK_SOUND_ENABLED:"other_player_click_sound_enabled",COLOR_BACKGROUND:"bg_color",SHOW_TABLE:"show_table",TABLE_TEXTURE:"table_texture",PLAYER_COLOR:"player_color",PLAYER_NAME:"player_name",SHOW_PLAYER_NAMES:"show_player_names"},rt={SOUND_VOLUME:100,SOUND_ENABLED:!0,OTHER_PLAYER_CLICK_SOUND_ENABLED:!0,COLOR_BACKGROUND:"#222222",SHOW_TABLE:!0,TABLE_TEXTURE:"dark",PLAYER_COLOR:"#ffffff",PLAYER_NAME:"anon",SHOW_PLAYER_NAMES:!0};class t_{constructor(t,n,s,o){this.MODE=t,this.gameId=n,this.clientId=s,this.eventBus=o}init(){this.settings={},this.settings.soundsVolume=Se.getInt(ke.SOUND_VOLUME,rt.SOUND_VOLUME),this.settings.otherPlayerClickSoundEnabled=Se.getBool(ke.OTHER_PLAYER_CLICK_SOUND_ENABLED,rt.OTHER_PLAYER_CLICK_SOUND_ENABLED),this.settings.soundsEnabled=Se.getBool(ke.SOUND_ENABLED,rt.SOUND_ENABLED),this.settings.showPlayerNames=Se.getBool(ke.SHOW_PLAYER_NAMES,rt.SHOW_PLAYER_NAMES),this.settings.showTable=Se.getBool(ke.SHOW_TABLE,rt.SHOW_TABLE),this.settings.tableTexture=Se.getStr(ke.TABLE_TEXTURE,rt.TABLE_TEXTURE),this.MODE===Ht?(this.settings.background=Se.getStr(ke.COLOR_BACKGROUND,rt.COLOR_BACKGROUND),this.settings.color=Se.getStr(ke.PLAYER_COLOR,rt.PLAYER_COLOR),this.settings.name=Se.getStr(ke.PLAYER_NAME,rt.PLAYER_NAME)):(this.settings.background=ce.getPlayerBgColor(this.gameId,this.clientId)||Se.getStr(ke.COLOR_BACKGROUND,rt.COLOR_BACKGROUND),this.settings.color=ce.getPlayerColor(this.gameId,this.clientId)||Se.getStr(ke.PLAYER_COLOR,rt.PLAYER_COLOR),this.settings.name=ce.getPlayerName(this.gameId,this.clientId)||Se.getStr(ke.PLAYER_NAME,rt.PLAYER_NAME))}showStatusMessage(t,n=void 0){this.eventBus.emit("statusMessage",{what:t,value:n})}setBackground(t){return this.settings.background!==t?(this.settings.background=t,Se.setStr(ke.COLOR_BACKGROUND,t),this.showStatusMessage("Background",t),this.eventBus.emit("onBgChange",t),!0):!1}setTableTexture(t){return this.settings.tableTexture!==t?(this.settings.tableTexture=t,Se.setStr(ke.TABLE_TEXTURE,t),this.showStatusMessage("Table texture",t),this.eventBus.emit("onTableTextureChange",t),!0):!1}setShowTable(t){return this.settings.showTable!==t?(this.settings.showTable=t,Se.setBool(ke.SHOW_TABLE,t),this.showStatusMessage("Table",t),this.eventBus.emit("onShowTableChange",t),!0):!1}setColor(t){return this.settings.color!==t?(this.settings.color=t,Se.setStr(ke.PLAYER_COLOR,t),this.showStatusMessage("Color",t),this.eventBus.emit("onColorChange",t),!0):!1}setName(t){return this.settings.name!==t?(this.settings.name=t,Se.setStr(ke.PLAYER_NAME,t),this.showStatusMessage("Name",t),this.eventBus.emit("onNameChange",t),!0):!1}setOtherPlayerClickSoundEnabled(t){return this.settings.otherPlayerClickSoundEnabled!==t?(this.settings.otherPlayerClickSoundEnabled=t,Se.setBool(ke.OTHER_PLAYER_CLICK_SOUND_ENABLED,t),this.showStatusMessage("Other player sounds",t),this.eventBus.emit("onOtherPlayerClickSoundEnabledChange",t),!0):!1}setSoundsEnabled(t){return this.settings.soundsEnabled!==t?(this.settings.soundsEnabled=t,Se.setBool(ke.SOUND_ENABLED,t),this.showStatusMessage("Sounds",t),this.eventBus.emit("onSoundsEnabledChange",t),!0):!1}setSoundsVolume(t){return this.settings.soundsVolume!==t?(this.settings.soundsVolume=t,Se.setInt(ke.SOUND_VOLUME,t),this.showStatusMessage("Volume",t),this.eventBus.emit("onSoundsVolumeChange",t),!0):!1}setShowPlayerNames(t){return this.settings.showPlayerNames!==t?(this.settings.showPlayerNames=t,Se.setBool(ke.SHOW_PLAYER_NAMES,t),this.showStatusMessage("Player names",t),this.eventBus.emit("onShowPlayerNamesChange",t),!0):!1}toggleSoundsEnabled(){this.settings.soundsEnabled=!this.settings.soundsEnabled;const t=this.settings.soundsEnabled;this.eventBus.emit("toggleSoundsEnabled",t),Se.setBool(ke.SOUND_ENABLED,t),this.showStatusMessage("Sounds",t)}togglePlayerNames(){this.settings.showPlayerNames=!this.settings.showPlayerNames;const t=this.settings.showPlayerNames;this.eventBus.emit("togglePlayerNames",t),Se.setBool(ke.SHOW_PLAYER_NAMES,t),this.showStatusMessage("Player names",t)}toggleShowTable(){this.settings.showTable=!this.settings.showTable;const t=this.settings.showTable;this.eventBus.emit("toggleShowTable",t),Se.setBool(ke.SHOW_TABLE,t),this.showStatusMessage("Table",t)}showTable(){return this.settings.showTable}tableTexture(){return this.settings.tableTexture}soundsVolume(){return this.settings.soundsVolume}background(){return this.settings.background}color(){return this.settings.color}name(){return this.settings.name}otherPlayerClickSoundEnabled(){return this.settings.otherPlayerClickSoundEnabled}soundsEnabled(){return this.settings.soundsEnabled}showPlayerNames(){return this.settings.showPlayerNames}}class n_{constructor(t,n){this.assets=t,this.playerSettings=n}playPieceConnected(){const t=this.playerSettings.soundsVolume();this.assets.Audio.CLICK.volume=t/100,this.assets.Audio.CLICK.play()}playOtherPieceConnected(){const t=this.playerSettings.soundsVolume();this.assets.Audio.CLICK_2.volume=t/100,this.assets.Audio.CLICK_2.play()}}class s_{constructor(t,n){this.gameId=t,this.eventBus=n}update(t){const n=ce.getStartTs(this.gameId),s=ce.getFinishTs(this.gameId);this.eventBus.emit("status",{finished:!!s,duration:(s||t)-n,piecesDone:ce.getFinishedPiecesCount(this.gameId),piecesTotal:ce.getPieceCount(this.gameId)}),this.eventBus.emit("players",{active:ce.getActivePlayers(this.gameId,t),idle:ce.getIdlePlayers(this.gameId,t)})}}class o_{constructor(t,n){this.canvas=t,this.assets=n,this.cursorImages={},this.cursorDown="",this.cursor="",this.cursorState=!1,this.CURSOR_W=n.Gfx.GRAB.width,this.CURSOR_W_2=Math.round(this.CURSOR_W/2),this.CURSOR_H=n.Gfx.GRAB.height,this.CURSOR_H_2=Math.round(this.CURSOR_H/2)}async get(t){const n=t.color+" "+t.d;if(!this.cursorImages[n]){const s=t.d?this.assets.Gfx.GRAB:this.assets.Gfx.HAND;if(t.color){const o=t.d?this.assets.Gfx.GRAB_MASK:this.assets.Gfx.HAND_MASK;this.cursorImages[n]=await createImageBitmap(nt.colorizedCanvas(s,o,t.color))}else this.cursorImages[n]=s}return this.cursorImages[n]}updatePlayerCursorState(t){this.cursorState=t;const[n,s]=t?[this.cursorDown,"grab"]:[this.cursor,"default"];this.canvas.style.cursor=`url('${n}') ${this.CURSOR_W_2} ${this.CURSOR_H_2}, ${s}`}updatePlayerCursorColor(t){this.cursorDown=nt.colorizedCanvas(this.assets.Gfx.GRAB,this.assets.Gfx.GRAB_MASK,t).toDataURL(),this.cursor=nt.colorizedCanvas(this.assets.Gfx.HAND,this.assets.Gfx.HAND_MASK,t).toDataURL(),this.updatePlayerCursorState(this.cursorState)}}const Hn="play",Ht="replay";let Xt=!0,Jt=!0;const i_=e=>e.owner===-1?Xt:Jt;let Le=!0;async function _a(e,t,n,s,o,i){typeof window.DEBUG=="undefined"&&(window.DEBUG=!1);const l=y=>s===Ht||y.id!==t,r=new Xm;await r.init();const u=o,c=new o_(u,r),f={final:!1,log:[],logPointer:0,speeds:[.5,1,2,5,10,20,50,100,250,500],speedIdx:1,paused:!1,lastRealTs:0,lastGameTs:0,gameStartTs:0,skipNonActionPhases:!0,dataOffset:0};Gt.onConnectionStateChange(y=>{i.emit("connectionState",y)});const p=async y=>{const b=f.dataOffset;f.dataOffset+=1e4;const P=await Gt.requestReplayData(y,b);return f.log=f.log.slice(f.logPointer),f.logPointer=0,f.log.push(...P.log),P.log.length===0&&(f.final=!0),P};let h=()=>0;const _=async()=>{if(s===Hn){const y=await Gt.connect(n,e,t),b=Ee.decodeGame(y);ce.setGame(b.id,b),h=()=>kt.timestamp()}else if(s===Ht){const y=await p(e);if(!y.game)throw"[ 2021-05-29 no game received ]";const b=Ee.decodeGame(y.game);ce.setGame(b.id,b),f.lastRealTs=kt.timestamp(),f.gameStartTs=parseInt(y.log[0][4],10),f.lastGameTs=f.gameStartTs,h=()=>f.lastGameTs}else throw"[ 2020-12-22 MODE invalid, must be play|replay ]";Le=!0};await _();const C=ce.getPieceDrawOffset(e),E=ce.getPieceDrawSize(e),A=ce.getPuzzleWidth(e),v=ce.getPuzzleHeight(e),m=ce.getTableWidth(e),w=ce.getTableHeight(e),x={x:(m-A)/2,y:(w-v)/2},F={w:A,h:v},R={w:E,h:E},Y=ce.getBounds(e),D=new e_(Y,r,x,F);await D.init();const ie=await $g.loadPuzzleBitmaps(ce.getPuzzle(e)),Q=new ko,X=new Jm(u,window,Q,s),V=new vn(X,Q),q=new t_(s,e,t,i);q.init();const le=new n_(r,q),Ie=new Mm(u,ce.getRng(e));Ie.init();const de=u.getContext("2d");u.classList.add("loaded"),i.emit("puzzleCut"),Q.calculateZoomCapping(window.innerWidth,window.innerHeight,m,w);const ye=()=>{Q.reset(),Q.move(-(m-u.width)/2,-(w-u.height)/2);const y=Q.worldDimToViewportRaw(F),b=20,P=u.width-b*2,B=u.height-b*2;if(y.w>P||y.h>B||y.w<P&&y.h<B){const I=Math.min(P/y.w,B/y.h),G={x:u.width/2,y:u.height/2};Q.setZoom(I,G)}};X.registerEvents(),ye(),V.snap("center");const Pe=ce.getImageUrl(e),Fe=new s_(e,i);Fe.update(h());const _t=!!ce.getFinishTs(e);let Je=_t;const je=()=>Je&&!_t;X.addEvent([L.INPUT_EV_BG_COLOR,q.background()]),X.addEvent([L.INPUT_EV_PLAYER_COLOR,q.color()]),X.addEvent([L.INPUT_EV_PLAYER_NAME,q.name()]),c.updatePlayerCursorColor(q.color());const ct=()=>{i.emit("replaySpeed",f.speeds[f.speedIdx]),i.emit("replayPaused",f.paused)},De=(y,b=void 0)=>{i.emit("statusMessage",{what:y,value:b})},k=()=>{f.speedIdx+1<f.speeds.length&&(f.speedIdx++,ct(),De("Speed Up"))},Z=()=>{f.speedIdx>=1&&(f.speedIdx--,ct(),De("Speed Down"))},j=()=>{f.paused=!f.paused,ct(),De(f.paused?"Paused":"Playing")};let J=!0;const he=()=>{J=!J,i.emit("toggleInterface",J),De("Interface",J)};let Te=!1;const re=()=>{Te=!Te,i.emit("togglePreview",Te)};i.on("replayOnSpeedUp",()=>{k()}),i.on("replayOnSpeedDown",()=>{Z()}),i.on("replayOnPauseToggle",()=>{j()}),i.on("onPreviewChange",y=>{Te!==y&&(Te=y)}),i.on("onBgChange",y=>{X.addEvent([L.INPUT_EV_BG_COLOR,y])}),i.on("onTableTextureChange",()=>{Le=!0}),i.on("onShowTableChange",()=>{Le=!0}),i.on("onColorChange",y=>{X.addEvent([L.INPUT_EV_PLAYER_COLOR,y])}),i.on("onNameChange",y=>{X.addEvent([L.INPUT_EV_PLAYER_NAME,y])}),i.on("onSoundsVolumeChange",()=>{le.playPieceConnected()}),i.on("setHotkeys",y=>{X.setHotkeys(y)}),i.on("requireRerender",()=>{Le=!0});const d=[];let g;const T=()=>{d.forEach(y=>{clearInterval(y)}),g&&clearTimeout(g)};if(s===Hn?d.push(setInterval(()=>{Fe.update(h())},1e3)):s===Ht&&ct(),s===Hn)Gt.onServerChange(y=>{y[0],y[1],y[2];const b=y[3];let P=!1,B=!1;for(const[I,G]of b)switch(I){case L.CHANGE_PLAYER:{const H=Ee.decodePlayer(G);H.id!==t&&(ce.setPlayer(e,H.id,H),P=!0)}break;case L.CHANGE_PIECE:{const H=Ee.decodePiece(G);ce.setPiece(e,H.idx,H),P=!0}break;case L.CHANGE_DATA:ce.setPuzzleData(e,G),P=!0;break;case L.PLAYER_SNAP:G!==t&&(B=!0);break}B&&q.soundsEnabled()&&q.otherPlayerClickSoundEnabled()&&le.playOtherPieceConnected(),P&&(Le=!0),Je=!!ce.getFinishTs(e)});else if(s===Ht){const y=(B,I)=>{const G=B;if(G[0]===L.LOG_ADD_PLAYER){const H=G[1];return ce.addPlayer(e,H,I),!0}if(G[0]===L.LOG_UPDATE_PLAYER){const H=ce.getPlayerIdByIndex(e,G[1]);if(!H)throw"[ 2021-05-17 player not found (update player) ]";return ce.addPlayer(e,H,I),!0}if(G[0]===L.LOG_HANDLE_INPUT){const H=ce.getPlayerIdByIndex(e,G[1]);if(!H)throw"[ 2021-05-17 player not found (handle input) ]";const se=G[2];return ce.handleInput(e,H,se,I),!0}return!1};let b=f.lastGameTs;const P=async()=>{f.logPointer+1>=f.log.length&&await p(e);const B=kt.timestamp();if(f.paused){f.lastRealTs=B,g=setTimeout(P,50);return}const G=(B-f.lastRealTs)*f.speeds[f.speedIdx];let H=f.lastGameTs+G,se=!0;do if(f.paused)se=!1;else{const _e=f.logPointer+1;if(_e>=f.log.length)se=!1;else{const we=f.log[f.logPointer],Ne=b+we[we.length-1],et=f.log[_e],Ct=et[et.length-1],pn=Ne+Ct;pn>H?(H+500*kt.MS<pn&&(H+=Ct),se=!1):(b=Ne,y(et,pn)&&(Le=!0),f.logPointer=_e)}}while(se);f.lastRealTs=B,f.lastGameTs=H,Fe.update(h()),f.final||(g=setTimeout(P,50))};P()}const z=Sp({update:()=>{X.createKeyEvents();for(const y of X.consumeAll())if(s===Hn){const b=y[0];if(b===L.INPUT_EV_MOVE){const I=Q.worldDimToViewportRaw({w:y[1],h:y[2]});Le=!0,Q.move(I.w,I.h),V.remove(vn.LAST)}else if(b===L.INPUT_EV_MOUSE_MOVE){if(y[5]&&!ce.getFirstOwnedPiece(e,t)){const G=Q.worldDimToViewportRaw({w:y[3],h:y[4]});Le=!0,Q.move(G.w,G.h),V.remove(vn.LAST)}}else if(b===L.INPUT_EV_PLAYER_COLOR)c.updatePlayerCursorColor(y[1]);else if(b===L.INPUT_EV_MOUSE_DOWN)c.updatePlayerCursorState(!0);else if(b===L.INPUT_EV_MOUSE_UP)c.updatePlayerCursorState(!1);else if(b===L.INPUT_EV_ZOOM_IN){const I={x:y[1],y:y[2]};Le=!0,Q.zoom("in",Q.worldToViewportRaw(I)),V.remove(vn.LAST)}else if(b===L.INPUT_EV_ZOOM_OUT){const I={x:y[1],y:y[2]};Le=!0,Q.zoom("out",Q.worldToViewportRaw(I)),V.remove(vn.LAST)}else if(b===L.INPUT_EV_TOGGLE_INTERFACE)he();else if(b===L.INPUT_EV_TOGGLE_PREVIEW)re();else if(b===L.INPUT_EV_TOGGLE_SOUNDS)q.toggleSoundsEnabled();else if(b===L.INPUT_EV_TOGGLE_PLAYER_NAMES)q.togglePlayerNames();else if(b===L.INPUT_EV_CENTER_FIT_PUZZLE){const I="center",G=V.handle(I);De(G?`Restored position "${G}"`:`Position "${I}" not set`)}else if(b===L.INPUT_EV_TOGGLE_FIXED_PIECES)Xt=!Xt,De(`${Xt?"Showing":"Hiding"} finished pieces`),Le=!0;else if(b===L.INPUT_EV_TOGGLE_LOOSE_PIECES)Jt=!Jt,De(`${Jt?"Showing":"Hiding"} unfinished pieces`),Le=!0;else if(b===L.INPUT_EV_TOGGLE_TABLE)q.toggleShowTable();else if(b===L.INPUT_EV_STORE_POS){const I=`${y[1]}`;V.snap(I),De(`Stored position ${I}`)}else if(b===L.INPUT_EV_RESTORE_POS){const I=`${y[1]}`,G=V.handle(I);De(G?`Restored position "${G}"`:`Position "${I}" not set`)}const P=h(),B=ce.handleInput(e,t,y,P);q.soundsEnabled()&&B.find(I=>I[0]===L.PLAYER_SNAP)&&le.playPieceConnected(),B.length>0&&(Le=!0),Gt.sendClientEvent(y)}else if(s===Ht){const b=y[0];if(b===L.INPUT_EV_REPLAY_TOGGLE_PAUSE)j();else if(b===L.INPUT_EV_REPLAY_SPEED_DOWN)Z();else if(b===L.INPUT_EV_REPLAY_SPEED_UP)k();else if(b===L.INPUT_EV_MOVE){const P=Q.worldDimToViewportRaw({w:y[1],h:y[2]});Le=!0,Q.move(P.w,P.h)}else if(b===L.INPUT_EV_MOUSE_MOVE){if(y[5]){const B=Q.worldDimToViewportRaw({w:y[3],h:y[4]});Le=!0,Q.move(B.w,B.h)}}else if(b===L.INPUT_EV_PLAYER_COLOR)c.updatePlayerCursorColor(y[1]);else if(b===L.INPUT_EV_MOUSE_DOWN)c.updatePlayerCursorState(!0);else if(b===L.INPUT_EV_MOUSE_UP)c.updatePlayerCursorState(!1);else if(b===L.INPUT_EV_ZOOM_IN){const P={x:y[1],y:y[2]};Le=!0,Q.zoom("in",Q.worldToViewportRaw(P))}else if(b===L.INPUT_EV_ZOOM_OUT){const P={x:y[1],y:y[2]};Le=!0,Q.zoom("out",Q.worldToViewportRaw(P))}else if(b===L.INPUT_EV_TOGGLE_INTERFACE)he();else if(b===L.INPUT_EV_TOGGLE_PREVIEW)re();else if(b===L.INPUT_EV_TOGGLE_SOUNDS)q.toggleSoundsEnabled();else if(b===L.INPUT_EV_TOGGLE_PLAYER_NAMES)q.togglePlayerNames();else if(b===L.INPUT_EV_CENTER_FIT_PUZZLE){const P="center",B=V.handle(P);De(B?`Restored position "${B}"`:`Position "${P}" not set`)}else if(b===L.INPUT_EV_TOGGLE_FIXED_PIECES)Xt=!Xt,De(`${Xt?"Showing":"Hiding"} finished pieces`),Le=!0;else if(b===L.INPUT_EV_TOGGLE_LOOSE_PIECES)Jt=!Jt,De(`${Jt?"Showing":"Hiding"} unfinished pieces`),Le=!0;else if(b===L.INPUT_EV_TOGGLE_TABLE)q.toggleShowTable();else if(b===L.INPUT_EV_STORE_POS){const P=`${y[1]}`;V.snap(P),De(`Stored position ${P}`)}else if(b===L.INPUT_EV_RESTORE_POS){const P=`${y[1]}`,B=V.handle(P);De(B?`Restored position "${B}"`:`Position "${P}" not set`)}}Je=!!ce.getFinishTs(e),je()&&(Ie.update(),Le=!0)},render:async()=>{if(!Le)return;const y=h();let b,P,B;if(window.DEBUG&&Vt.checkpoint_start(0),de.fillStyle=q.background(),de.fillRect(0,0,u.width,u.height),window.DEBUG&&Vt.checkpoint("clear done"),q.showTable()){const H=D.getImage(q.tableTexture());H&&(b=Q.worldToViewportRaw(Y),P=Q.worldDimToViewportRaw(Y),de.drawImage(H,b.x,b.y,P.w,P.h))}window.DEBUG&&Vt.checkpoint("table done"),q.showTable()||(b=Q.worldToViewportRaw(x),P=Q.worldDimToViewportRaw(F),de.fillStyle="rgba(255, 255, 255, .3)",de.fillRect(b.x,b.y,P.w,P.h)),window.DEBUG&&Vt.checkpoint("board done");const I=ce.getPiecesSortedByZIndex(e);window.DEBUG&&Vt.checkpoint("get pieces done"),P=Q.worldDimToViewportRaw(R);for(const H of I)!i_(H)||(B=ie[H.idx],b=Q.worldToViewportRaw({x:C+H.pos.x,y:C+H.pos.y}),de.drawImage(B,0,0,B.width,B.height,b.x,b.y,P.w,P.h));window.DEBUG&&Vt.checkpoint("pieces done");const G=[];for(const H of ce.getActivePlayers(e,y))l(H)&&(B=await c.get(H),b=Q.worldToViewport(H),de.drawImage(B,b.x-c.CURSOR_W_2,b.y-c.CURSOR_H_2),q.showPlayerNames()&&G.push([`${H.name} (${H.points})`,b.x,b.y+c.CURSOR_H]));de.fillStyle="white",de.textAlign="center";for(const[H,se,_e]of G)de.fillText(H,se,_e);window.DEBUG&&Vt.checkpoint("players done"),Fe.update(y),window.DEBUG&&Vt.checkpoint("HUD done"),je()&&Ie.render(),Le=!1}}),W=()=>{T(),z.stop(),X&&X.unregisterEvents()};return{previewImageUrl:Pe,playerSettings:q,puzzleStatus:Fe,game:ce.get(e),disconnect:Gt.disconnect,connect:_,unload:W}}let va;const l_=async()=>{va=await(await Ue.pub.config()).json()},r_=()=>va;var Ai={init:l_,get:r_};const a_={key:0},u_={key:2},c_=me({__name:"ConnectionOverlay",props:{connectionState:null},emits:["reconnect","close"],setup(e,{emit:t}){const n=e,s=fe(()=>n.connectionState===Gt.CONN_STATE_DISCONNECTED),o=fe(()=>n.connectionState===Gt.CONN_STATE_CONNECTING),i=fe(()=>!!(s.value||o.value));return(l,r)=>{const u=Be("icon");return Ce((S(),ve($t,{class:"connection-lost",onClose:r[1]||(r[1]=c=>t("close"))},{default:$e(()=>[ue(s)?(S(),U("div",a_,[N(u,{icon:"disconnect"}),$(" LOST CONNECTION "),N(u,{icon:"disconnect"})])):oe("",!0),ue(s)?(S(),U("span",{key:1,class:"btn",onClick:r[0]||(r[0]=c=>t("reconnect"))},"Reconnect")):oe("",!0),ue(o)?(S(),U("div",u_,"Connecting...")):oe("",!0)]),_:1},512)),[[Ur,ue(i)]])}}}),f_={class:"help"},d_=a("kbd",null,"W",-1),h_=a("kbd",null,"\u2191",-1),p_=a("kbd",null,"S",-1),g_=a("kbd",null,"\u2193",-1),m_=a("kbd",null,"A",-1),__=a("kbd",null,"\u2190",-1),v_=a("kbd",null,"D",-1),y_=a("kbd",null,"\u2192",-1),w_=a("tr",null,[a("td"),a("td",null,[a("div",null,[$("Move faster by holding "),a("kbd",null,"Shift")])])],-1),E_=a("kbd",null,"E",-1),b_=a("kbd",null,"Q",-1),P_=a("td",null,[a("div",null,[a("kbd",null,"Space")])],-1),T_=a("td",null,[a("div",null,[a("kbd",null,"C")])],-1),x_=a("td",null,[a("div",null,[a("kbd",null,"F")])],-1),C_=a("td",null,[a("div",null,[a("kbd",null,"G")])],-1),S_=a("td",null,[a("div",null,[a("kbd",null,"T")])],-1),A_=a("td",null,[a("div",null,[a("kbd",null,"H")])],-1),O_=a("td",null,[a("div",null,[a("kbd",null,"N")])],-1),R_=a("td",null,[a("div",null,[a("kbd",null,"M")])],-1),k_=a("td",null,[a("div",null,[a("kbd",null,"Shift"),$(" + "),a("kbd",null,"0"),$("-"),a("kbd",null,"9")])],-1),N_=a("td",null,[a("div",null,[a("kbd",null,"0"),$("-"),a("kbd",null,"9")])],-1),M_=a("td",null,[a("div",null,[a("kbd",null,"I")])],-1),U_=a("td",null,[a("div",null,[a("kbd",null,"O")])],-1),L_=a("td",null,[a("div",null,[a("kbd",null,"P")])],-1),ya=me({__name:"HelpOverlay",emits:["close"],setup(e,{emit:t}){return(n,s)=>{const o=Be("icon");return S(),ve($t,{class:"transparent",onClose:s[0]||(s[0]=i=>t("close"))},{default:$e(()=>[a("table",f_,[a("tr",null,[a("td",null,[N(o,{icon:"arrow-up"}),$(" Move up:")]),a("td",null,[a("div",null,[d_,$("/"),h_,$("/"),N(o,{icon:"mouse-left"})])])]),a("tr",null,[a("td",null,[N(o,{icon:"arrow-down"}),$(" Move down:")]),a("td",null,[a("div",null,[p_,$("/"),g_,$("/"),N(o,{icon:"mouse-left"})])])]),a("tr",null,[a("td",null,[N(o,{icon:"arrow-left"}),$(" Move left:")]),a("td",null,[a("div",null,[m_,$("/"),__,$("/"),N(o,{icon:"mouse-left"})])])]),a("tr",null,[a("td",null,[N(o,{icon:"arrow-right"}),$(" Move right:")]),a("td",null,[a("div",null,[v_,$("/"),y_,$("/"),N(o,{icon:"mouse-left"})])])]),w_,a("tr",null,[a("td",null,[N(o,{icon:"zoom-in"}),$(" Zoom in:")]),a("td",null,[a("div",null,[E_,$("/"),N(o,{icon:"mouse-wheel"})])])]),a("tr",null,[a("td",null,[N(o,{icon:"zoom-out"}),$(" Zoom out:")]),a("td",null,[a("div",null,[b_,$("/"),N(o,{icon:"mouse-wheel"})])])]),a("tr",null,[a("td",null,[N(o,{icon:"preview"}),$(" Toggle preview:")]),P_]),a("tr",null,[a("td",null,[N(o,{icon:"center"}),$(" Center puzzle in screen:")]),T_]),a("tr",null,[a("td",null,[N(o,{icon:"puzzle-piece-locked"}),$(" Toggle fixed pieces:")]),x_]),a("tr",null,[a("td",null,[N(o,{icon:"puzzle-piece-free"}),$(" Toggle loose pieces:")]),C_]),a("tr",null,[a("td",null,[N(o,{icon:"table"}),$(" Toggle table:")]),S_]),a("tr",null,[a("td",null,[N(o,{icon:"eye"}),$(" Toggle interface:")]),A_]),a("tr",null,[a("td",null,[N(o,{icon:"player-name"}),$(" Toggle player names:")]),O_]),a("tr",null,[a("td",null,[N(o,{icon:"volume-up"}),$(" Toggle sounds:")]),R_]),a("tr",null,[a("td",null,[N(o,{icon:"save-pos"}),$(" Store position [0-9]:")]),k_]),a("tr",null,[a("td",null,[N(o,{icon:"load-pos"}),$(" Restore position [0-9]:")]),N_]),a("tr",null,[a("td",null,[N(o,{icon:"speed-up"}),$(" Speed up (replay):")]),M_]),a("tr",null,[a("td",null,[N(o,{icon:"speed-down"}),$(" Speed down (replay):")]),U_]),a("tr",null,[a("td",null,[N(o,{icon:"pause"}),$(" Pause (replay):")]),L_])])]),_:1})}}}),$_={class:"help"},I_=a("tr",null,[a("td",{colspan:"2"},"Info about this puzzle")],-1),D_=a("td",null,"Image Title: ",-1),V_=a("td",null,"Scoring: ",-1),B_=["title"],z_=a("td",null,"Shapes: ",-1),G_=["title"],H_=a("td",null,"Snapping: ",-1),F_=["title"],wa=me({__name:"InfoOverlay",props:{game:null},emits:["close"],setup(e,{emit:t}){const n=e,s=fe(()=>{switch(n.game.scoreMode){case an.ANY:return["Any","Score when pieces are connected to each other or on final location"];case an.FINAL:default:return["Final","Score when pieces are put to their final location"]}}),o=fe(()=>{switch(n.game.shapeMode){case Zn.FLAT:return["Flat","All pieces flat on all sides"];case Zn.ANY:return["Any","Flat pieces can occur anywhere"];case Zn.NORMAL:default:return["Normal",""]}}),i=fe(()=>{switch(n.game.snapMode){case kn.REAL:return["Real","Pieces snap only to corners, already snapped pieces and to each other"];case kn.NORMAL:default:return["Normal","Pieces snap to final destination and to each other"]}});return(l,r)=>(S(),ve($t,{class:"transparent",onClose:r[0]||(r[0]=u=>t("close"))},{default:$e(()=>{var u;return[a("table",$_,[I_,a("tr",null,[D_,a("td",null,ee((u=e.game.puzzle.info.image)==null?void 0:u.title),1)]),a("tr",null,[V_,a("td",null,[a("span",{title:ue(i)[1]},ee(ue(s)[0]),9,B_)])]),a("tr",null,[z_,a("td",null,[a("span",{title:ue(i)[1]},ee(ue(o)[0]),9,G_)])]),a("tr",null,[H_,a("td",null,[a("span",{title:ue(i)[1]},ee(ue(i)[0]),9,F_)])])])]}),_:1}))}}),j_={class:"preview"},Ea=me({__name:"PreviewOverlay",props:{img:null},emits:["close"],setup(e,{emit:t}){const n=e,s=fe(()=>({backgroundImage:`url('${n.img}')`}));return(o,i)=>(S(),ve($t,{class:"preview-overlay",onClose:i[0]||(i[0]=l=>t("close"))},{default:$e(()=>[a("div",j_,[a("div",{class:"img",style:Mt(ue(s))},null,4)])]),_:1}))}}),W_={class:"puzzle-status"},ba=me({__name:"PuzzleStatus",props:{status:null},setup(e){const t=e,n=fe(()=>kt.durationStr(t.status.duration));return(s,o)=>{const i=Be("icon");return S(),U("div",W_,[a("div",null,[N(i,{icon:"puzzle-piece"}),$(" "+ee(e.status.piecesDone)+"/"+ee(e.status.piecesTotal),1)]),a("div",null,[e.status.finished?(S(),ve(i,{key:1,icon:"flag"})):(S(),ve(i,{key:0,icon:"clock"})),$(" "+ee(ue(n)),1)])])}}}),K_={class:"scores"},Y_=a("div",null,"Scores",-1),Pa=me({__name:"Scores",props:{players:null},setup(e){const t=e,n=fe(()=>(t.players.active.sort((i,l)=>l.points-i.points),t.players.active)),s=fe(()=>(t.players.idle.sort((i,l)=>l.points-i.points),t.players.idle)),o=i=>i.color==="ukraine"?{backgroundImage:"linear-gradient(180deg, rgba(0,87,183,1) 0%, rgba(0,87,183,1) 50%, rgba(255,221,0,1) 50%)","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"}:{color:i.color};return(i,l)=>{const r=Be("icon");return S(),U("div",K_,[Y_,a("table",null,[(S(!0),U(pe,null,Ze(ue(n),(u,c)=>(S(),U("tr",{key:c,style:Mt(o(u))},[a("td",null,[N(r,{icon:"lightning"})]),a("td",null,ee(u.name),1),a("td",null,ee(u.points),1)],4))),128)),(S(!0),U(pe,null,Ze(ue(s),(u,c)=>(S(),U("tr",{key:c,style:Mt(o(u))},[a("td",null,[N(r,{icon:"zzz"})]),a("td",null,ee(u.name),1),a("td",null,ee(u.points),1)],4))),128))])])}}}),Z_={class:"settings"},q_=a("td",null,[a("label",null,"Background: ")],-1),Q_=a("td",null,[a("label",null,"Table: ")],-1),X_={key:0},J_={key:1},ev={key:2},tv=a("td",null,[a("label",null,"Color: ")],-1),nv=a("td",null,[a("label",null,"Name: ")],-1),sv=a("td",null,[a("label",null,"Sounds: ")],-1),ov=a("td",null,[a("label",null,"Piece connect sounds of others: ")],-1),iv=["disabled"],lv=a("td",null,[a("label",null,"Sounds Volume: ")],-1),rv={class:"sound-volume"},av=["disabled","value"],uv=a("td",null,[a("label",null,"Show player names: ")],-1),Ta=me({__name:"SettingsOverlay",props:{settings:null},emits:["close"],setup(e,{emit:t}){const n=e,s=K(n.settings.showTable()),o=K(n.settings.tableTexture()),i=K(n.settings.background()),l=K(n.settings.color()),r=K(l.value==="ukraine"),u=K(n.settings.name()),c=K(n.settings.soundsEnabled()),f=K(n.settings.otherPlayerClickSoundEnabled()),p=K(n.settings.soundsVolume()),h=K(n.settings.showPlayerNames()),_=v=>{const m=parseInt(v.target.value);p.value=m},C=()=>{p.value=Math.max(0,p.value-5)},E=()=>{p.value=Math.min(100,p.value+5)},A=()=>{n.settings.setShowTable(s.value),n.settings.setTableTexture(o.value),n.settings.setBackground(i.value),n.settings.setColor(r.value?"ukraine":l.value),n.settings.setName(u.value),n.settings.setSoundsEnabled(c.value),n.settings.setOtherPlayerClickSoundEnabled(f.value),n.settings.setSoundsVolume(p.value),n.settings.setShowPlayerNames(h.value)};return ze(r,A),ze(i,A),ze(s,A),ze(o,A),ze(l,A),ze(u,A),ze(c,A),ze(f,A),ze(p,A),ze(h,A),(v,m)=>{const w=Be("icon");return S(),ve($t,{class:"transparent",onClose:m[11]||(m[11]=x=>t("close"))},{default:$e(()=>[a("table",Z_,[a("tr",null,[q_,a("td",null,[Ce(a("input",{type:"color","onUpdate:modelValue":m[0]||(m[0]=x=>i.value=x)},null,512),[[Nt,i.value]])])]),a("tr",null,[Q_,a("td",null,[a("label",null,[Ce(a("input",{type:"checkbox","onUpdate:modelValue":m[1]||(m[1]=x=>s.value=x)},null,512),[[sn,s.value]]),$("Show")]),s.value?(S(),U("label",X_,[Ce(a("input",{type:"radio","onUpdate:modelValue":m[2]||(m[2]=x=>o.value=x),value:"dark"},null,512),[[Et,o.value]]),$(" Dark")])):oe("",!0),s.value?(S(),U("label",J_,[Ce(a("input",{type:"radio","onUpdate:modelValue":m[3]||(m[3]=x=>o.value=x),value:"brown"},null,512),[[Et,o.value]]),$(" Brown")])):oe("",!0),s.value?(S(),U("label",ev,[Ce(a("input",{type:"radio","onUpdate:modelValue":m[4]||(m[4]=x=>o.value=x),value:"light"},null,512),[[Et,o.value]]),$(" Light")])):oe("",!0)])]),a("tr",null,[tv,a("td",null,[r.value?oe("",!0):Ce((S(),U("input",{key:0,type:"color","onUpdate:modelValue":m[5]||(m[5]=x=>l.value=x)},null,512)),[[Nt,l.value]]),a("label",null,[Ce(a("input",{type:"checkbox","onUpdate:modelValue":m[6]||(m[6]=x=>r.value=x)},null,512),[[sn,r.value]]),N(w,{icon:"ukraine-heart"})])])]),a("tr",null,[nv,a("td",null,[Ce(a("input",{type:"text",maxLength:"16","onUpdate:modelValue":m[7]||(m[7]=x=>u.value=x)},null,512),[[Nt,u.value]])])]),a("tr",null,[sv,a("td",null,[Ce(a("input",{type:"checkbox","onUpdate:modelValue":m[8]||(m[8]=x=>c.value=x)},null,512),[[sn,c.value]])])]),a("tr",null,[ov,a("td",null,[Ce(a("input",{type:"checkbox",disabled:!c.value,"onUpdate:modelValue":m[9]||(m[9]=x=>f.value=x)},null,8,iv),[[sn,f.value]])])]),a("tr",null,[lv,a("td",rv,[a("span",{onClick:C},[N(w,{icon:"volume-down"})]),a("input",{disabled:!c.value,type:"range",min:"0",max:"100",value:p.value,onChange:_},null,40,av),a("span",{onClick:E},[N(w,{icon:"volume-up"})])])]),a("tr",null,[uv,a("td",null,[Ce(a("input",{type:"checkbox","onUpdate:modelValue":m[10]||(m[10]=x=>h.value=x)},null,512),[[sn,h.value]])])])])]),_:1})}}}),cv={id:"game"},fv={key:4,class:"menu-left"},dv={key:0,class:"switch-game-replay"},hv={key:5,class:"menu"},pv={class:"opener",href:"https://stand-with-ukraine.pp.ua/",target:"_blank"},gv={key:6,class:"menu-right"},mv={key:7,class:"status-messages"},_v=me({__name:"Game",setup(e){const t=K([]),n=K({active:[],idle:[]}),s=K({finished:!1,duration:0,piecesDone:0,piecesTotal:0}),o=K(""),i=K(0),l=K(!0),r=K(!0),u=K(),c=di(),f=K({playerSettings:null,game:null,previewImageUrl:"",connect:()=>{},disconnect:()=>{},unload:()=>{}}),p=fi(),h=(v,m)=>{typeof m=="undefined"?t.value.push(`${v}`):m===!0||m===!1?t.value.push(`${v} ${m?"enabled":"disabled"}`):t.value.push(`${v} changed to ${m}`),setTimeout(()=>{t.value.shift()},3e3)},_=()=>{u.value.width=window.innerWidth,u.value.height=window.innerHeight,c.emit("requireRerender")},C=()=>{f.value.connect()},E=(v,m,w)=>{m===!1?(o.value="",w&&c.emit("setHotkeys",!0)):(o.value=v,w&&c.emit("setHotkeys",!1))},A=(v,m)=>{o.value===""?(o.value=v,m&&c.emit("setHotkeys",!1)):(o.value="",m&&c.emit("setHotkeys",!0)),v==="preview"&&c.emit("onPreviewChange",o.value==="preview")};return Xe(async()=>{!p.params.id||(c.on("puzzleCut",()=>{l.value=!1}),c.on("players",v=>{n.value=v}),c.on("status",v=>{s.value=v}),c.on("connectionState",v=>{i.value=v}),c.on("togglePreview",v=>{E("preview",v,!1)}),c.on("toggleInterface",v=>{r.value=!!v}),u.value.width=window.innerWidth,u.value.height=window.innerHeight,window.addEventListener("resize",_),f.value=await _a(`${p.params.id}`,Ue.clientId(),Ai.get().WS_ADDRESS,Hn,u.value,c),c.on("statusMessage",v=>{h(v.what,v.value)}))}),Ln(()=>{f.value.unload(),f.value.disconnect(),window.removeEventListener("resize",_)}),(v,m)=>{const w=Be("icon"),x=Be("router-link");return S(),U("div",cv,[o.value==="settings"&&f.value.playerSettings?(S(),ve(Ta,{key:0,onClose:m[0]||(m[0]=F=>A("settings",!0)),onBgclick:m[1]||(m[1]=F=>A("settings",!0)),settings:f.value.playerSettings},null,8,["settings"])):oe("",!0),o.value==="preview"?(S(),ve(Ea,{key:1,onClose:m[2]||(m[2]=F=>A("preview",!1)),onClick:m[3]||(m[3]=F=>A("preview",!1)),img:f.value.previewImageUrl},null,8,["img"])):oe("",!0),f.value.game&&o.value==="info"?(S(),ve(wa,{key:2,onClose:m[4]||(m[4]=F=>A("info",!0)),onBgclick:m[5]||(m[5]=F=>A("info",!0)),game:f.value.game},null,8,["game"])):oe("",!0),o.value==="help"?(S(),ve(ya,{key:3,onClose:m[6]||(m[6]=F=>A("help",!0)),onBgclick:m[7]||(m[7]=F=>A("help",!0))})):oe("",!0),Ce(N($t,null,{default:$e(()=>[a("div",null,[N(w,{icon:"hourglass"}),$(" Cutting puzzle, please wait... "),N(w,{icon:"hourglass"})])]),_:1},512),[[Ur,l.value]]),N(c_,{connectionState:i.value,onReconnect:C},null,8,["connectionState"]),r.value?(S(),U("div",fv,[N(ba,{status:s.value},null,8,["status"]),f.value.game&&f.value.game.hasReplay?(S(),U("div",dv,[N(x,{to:{name:"replay",params:{id:f.value.game.id}}},{default:$e(()=>[N(w,{icon:"replay"}),$(" Watch replay")]),_:1},8,["to"])])):oe("",!0)])):oe("",!0),r.value?(S(),U("div",hv,[N(x,{class:"opener",to:{name:"index"},target:"_blank"},{default:$e(()=>[N(w,{icon:"puzzle-piece"}),$(" Puzzles")]),_:1}),a("div",{class:"opener",onClick:m[8]||(m[8]=F=>A("preview",!1))},[N(w,{icon:"preview"}),$(" Preview")]),a("div",{class:"opener",onClick:m[9]||(m[9]=F=>A("settings",!0))},[N(w,{icon:"settings"}),$(" Settings")]),a("div",{class:"opener",onClick:m[10]||(m[10]=F=>A("info",!0))},[N(w,{icon:"info"}),$(" Info")]),a("div",{class:"opener",onClick:m[11]||(m[11]=F=>A("help",!0))},[N(w,{icon:"hotkey"}),$(" Hotkeys")]),a("a",pv,[N(w,{icon:"ukraine-heart"}),$(" Stand with Ukraine ")])])):oe("",!0),r.value?(S(),U("div",gv,[N(Pa,{players:n.value},null,8,["players"])])):oe("",!0),t.value.length?(S(),U("div",mv,[(S(!0),U(pe,null,Ze(t.value,(F,R)=>(S(),U("div",{key:R},ee(F),1))),128))])):oe("",!0),a("canvas",{ref_key:"canvasEl",ref:u},null,512)])}}}),vv={id:"replay"},yv={key:4,class:"overlay"},wv={class:"overlay-content"},Ev={key:5,class:"menu-left"},bv={class:"playback-control"},Pv={key:0,class:"switch-game-replay"},Tv={key:6,class:"menu"},xv={class:"opener",href:"https://stand-with-ukraine.pp.ua/",target:"_blank"},Cv={key:7,class:"menu-right"},Sv={key:8,class:"status-messages"},Av=me({__name:"Replay",setup(e){const t=K([]),n=K({active:[],idle:[]}),s=K({finished:!1,duration:0,piecesDone:0,piecesTotal:0}),o=K(""),i=K(0),l=K(!0),r=K(!0),u=K(),c=di(),f=K({playerSettings:null,game:null,previewImageUrl:"",connect:()=>{},disconnect:()=>{},unload:()=>{}}),p=K({speed:1,paused:!1}),h=fi(),_=fe(()=>"Replay-Speed: "+(p.value.speed+"x")+(p.value.paused?" Paused":"")),C=(m,w)=>{typeof w=="undefined"?t.value.push(`${m}`):w===!0||w===!1?t.value.push(`${m} ${w?"enabled":"disabled"}`):t.value.push(`${m} changed to ${w}`),setTimeout(()=>{t.value.shift()},3e3)},E=()=>{u.value.width=window.innerWidth,u.value.height=window.innerHeight,c.emit("requireRerender")},A=(m,w,x)=>{w===!1?(o.value="",x&&c.emit("setHotkeys",!0)):(o.value=m,x&&c.emit("setHotkeys",!1))},v=(m,w)=>{o.value===""?(o.value=m,w&&c.emit("setHotkeys",!1)):(o.value="",w&&c.emit("setHotkeys",!0)),m==="preview"&&c.emit("onPreviewChange",o.value==="preview")};return Xe(async()=>{!h.params.id||(c.on("puzzleCut",()=>{l.value=!1}),c.on("players",m=>{n.value=m}),c.on("status",m=>{s.value=m}),c.on("connectionState",m=>{i.value=m}),c.on("togglePreview",m=>{A("preview",m,!1)}),c.on("toggleInterface",m=>{r.value=!!m}),c.on("replaySpeed",m=>{p.value.speed=m}),c.on("replayPaused",m=>{p.value.paused=m}),u.value.width=window.innerWidth,u.value.height=window.innerHeight,window.addEventListener("resize",E),f.value=await _a(`${h.params.id}`,Ue.clientId(),Ai.get().WS_ADDRESS,Ht,u.value,c),c.on("statusMessage",m=>{C(m.what,m.value)}))}),Ln(()=>{f.value.unload(),f.value.disconnect(),window.removeEventListener("resize",E)}),(m,w)=>{const x=Be("icon"),F=Be("router-link");return S(),U("div",vv,[o.value==="settings"&&f.value.playerSettings?(S(),ve(Ta,{key:0,onClose:w[0]||(w[0]=R=>v("settings",!0)),onBgclick:w[1]||(w[1]=R=>v("settings",!0)),settings:f.value.playerSettings},null,8,["settings"])):oe("",!0),o.value==="preview"?(S(),ve(Ea,{key:1,onClose:w[2]||(w[2]=R=>v("preview",!1)),onClick:w[3]||(w[3]=R=>v("preview",!1)),img:f.value.previewImageUrl},null,8,["img"])):oe("",!0),f.value.game&&o.value==="info"?(S(),ve(wa,{key:2,onClose:w[4]||(w[4]=R=>v("info",!0)),onBgclick:w[5]||(w[5]=R=>v("info",!0)),game:f.value.game},null,8,["game"])):oe("",!0),o.value==="help"?(S(),ve(ya,{key:3,onClose:w[6]||(w[6]=R=>v("help",!0)),onBgclick:w[7]||(w[7]=R=>v("help",!0))})):oe("",!0),l.value?(S(),U("div",yv,[a("div",wv,[a("div",null,[N(x,{icon:"hourglass"}),$(" Cutting puzzle, please wait... "),N(x,{icon:"hourglass"})])])])):oe("",!0),r.value?(S(),U("div",Ev,[N(ba,{status:s.value},null,8,["status"]),a("div",bv,[a("div",null,ee(ue(_)),1),a("button",{class:"btn",onClick:w[8]||(w[8]=R=>ue(c).emit("replayOnSpeedUp"))},[N(x,{icon:"speed-up"})]),a("button",{class:"btn",onClick:w[9]||(w[9]=R=>ue(c).emit("replayOnSpeedDown"))},[N(x,{icon:"speed-down"})]),a("button",{class:"btn",onClick:w[10]||(w[10]=R=>ue(c).emit("replayOnPauseToggle"))},[N(x,{icon:"pause"})])]),f.value.game?(S(),U("div",Pv,[N(F,{to:{name:"game",params:{id:f.value.game.id}}},{default:$e(()=>[N(x,{icon:"puzzle-piece"}),$(" To the game")]),_:1},8,["to"])])):oe("",!0)])):oe("",!0),r.value?(S(),U("div",Tv,[N(F,{class:"opener",to:{name:"index"},target:"_blank"},{default:$e(()=>[N(x,{icon:"puzzle-piece"}),$(" Puzzles")]),_:1}),a("div",{class:"opener",onClick:w[11]||(w[11]=R=>v("preview",!1))},[N(x,{icon:"preview"}),$(" Preview")]),a("div",{class:"opener",onClick:w[12]||(w[12]=R=>v("settings",!0))},[N(x,{icon:"settings"}),$(" Settings")]),a("div",{class:"opener",onClick:w[13]||(w[13]=R=>v("info",!0))},[N(x,{icon:"info"}),$(" Info")]),a("div",{class:"opener",onClick:w[14]||(w[14]=R=>v("help",!0))},[N(x,{icon:"hotkey"}),$(" Hotkeys")]),a("a",xv,[N(x,{icon:"ukraine-heart"}),$(" Stand with Ukraine ")])])):oe("",!0),r.value?(S(),U("div",Cv,[N(Pa,{players:n.value},null,8,["players"])])):oe("",!0),t.value.length?(S(),U("div",Sv,[(S(!0),U(pe,null,Ze(t.value,(R,Y)=>(S(),U("div",{key:Y},ee(R),1))),128))])):oe("",!0),a("canvas",{ref_key:"canvasEl",ref:u},null,512)])}}}),Ov=me({__name:"Icon",props:{icon:null},setup(e){return(t,n)=>(S(),U("i",{class:Tt(["icon",`icon-${e.icon}`])},null,2))}}),Rv={class:"nav"},rs=me({__name:"Nav",setup(e){const t=K(["admin_games","admin_images","admin_users","admin_groups"]);return(n,s)=>{const o=Be("router-link");return S(),U("ul",Rv,[(S(!0),U(pe,null,Ze(t.value,(i,l)=>(S(),U("li",{key:l},[N(o,{to:{name:i}},{default:$e(()=>[$(ee(i),1)]),_:2},1032,["to"])]))),128))])}}}),kv=a("h2",null,"Login",-1),Nv=a("td",null,"Name:",-1),Mv=a("td",null,"Pass:",-1),Uv=["onKeydown"],Lv=me({__name:"LoginForm",setup(e){const t=K(""),n=K("");async function s(){await Re.login(t.value,n.value)}return(o,i)=>(S(),U("div",null,[kv,a("table",null,[a("tr",null,[Nv,a("td",null,[Ce(a("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=l=>t.value=l)},null,512),[[Nt,t.value]])])]),a("tr",null,[Mv,a("td",null,[Ce(a("input",{type:"password","onUpdate:modelValue":i[1]||(i[1]=l=>n.value=l),onKeydown:Co(Ns(s,["prevent"]),["enter"])},null,40,Uv),[[Nt,n.value]])])]),a("tr",null,[a("td",{colspan:"2"},[a("span",{class:"btn",onClick:s},"Login")])])])]))}}),$v=me({__name:"Index",setup(e){const t=K(!1);return Xe(async()=>{t.value=!!Re.getMe(),Re.eventBus.on("login",()=>{console.log("login"),t.value=!0}),Re.eventBus.on("logout",()=>{console.log("logout"),t.value=!1})}),(n,s)=>(S(),U("div",null,[t.value?(S(),ve(rs,{key:0})):oe("",!0),t.value?oe("",!0):(S(),ve(Lv,{key:1}))]))}}),Iv={class:"data-table"},Dv=a("tr",null,[a("th",null,"Id"),a("th",null,"Creator"),a("th",null,"Image"),a("th",null,"Created"),a("th",null,"Finished"),a("th",null,"Private"),a("th",null,"Actions")],-1),Vv=["onClick"],Bv=me({__name:"Games",setup(e){const t=K([]),n=async s=>{if(!confirm(`Really delete game ${s.id}?`))return;(await Ue.admin.deleteGame(s.id)).ok?(t.value=t.value.filter(i=>i.id!==s.id),alert("Successfully deleted game!")):alert("Deleting game failed!")};return Xe(async()=>{Re.getMe()&&(t.value=await Ue.admin.getGames()),Re.eventBus.on("login",async()=>{t.value=await Ue.admin.getGames()}),Re.eventBus.on("logout",()=>{t.value=[]})}),(s,o)=>(S(),U("div",null,[N(rs),$(" GAMES "),a("table",Iv,[Dv,(S(!0),U(pe,null,Ze(t.value,(i,l)=>(S(),U("tr",{key:l},[a("td",null,ee(i.id),1),a("td",null,ee(i.creator_user_id||"-"),1),a("td",null,ee(i.image_id),1),a("td",null,ee(i.created),1),a("td",null,ee(i.finished),1),a("td",null,ee(i.private?"\u2713":"\u2716"),1),a("td",null,[a("span",{onClick:r=>n(i),class:"is-clickable"},"DELETE",8,Vv)])]))),128))])]))}}),zv={class:"data-table"},Gv=a("tr",null,[a("th",null,"Id"),a("th",null,"Created"),a("th",null,"Login")],-1),Hv=me({__name:"Users",setup(e){const t=K([]);return Xe(async()=>{Re.getMe()&&(t.value=await Ue.admin.getUsers()),Re.eventBus.on("login",async()=>{t.value=await Ue.admin.getUsers()}),Re.eventBus.on("logout",()=>{t.value=[]})}),(n,s)=>(S(),U("div",null,[N(rs),$(" USERS "),a("table",zv,[Gv,(S(!0),U(pe,null,Ze(t.value,(o,i)=>(S(),U("tr",{key:i},[a("td",null,ee(o.id),1),a("td",null,ee(o.created),1),a("td",null,[o.login?(S(),U(pe,{key:0},[$(ee(o.login),1)],64)):(S(),U(pe,{key:1},[$("-")],64))])]))),128))])]))}}),Fv={class:"data-table"},jv=a("tr",null,[a("th",null,"Id"),a("th",null,"Uploader"),a("th",null,"Created"),a("th",null,"Filename"),a("th",null,"Filename Original"),a("th",null,"Title"),a("th",null,"Width"),a("th",null,"Height"),a("th",null,"Private"),a("th",null,"Actions")],-1),Wv=["onClick"],Kv=me({__name:"Images",setup(e){const t=K([]),n=async s=>{if(!confirm(`Really delete image ${s.id}?`))return;(await Ue.admin.deleteImage(s.id)).ok?(t.value=t.value.filter(i=>i.id!==s.id),alert("Successfully deleted image!")):alert("Deleting image failed!")};return Xe(async()=>{Re.getMe()&&(t.value=await Ue.admin.getImages()),Re.eventBus.on("login",async()=>{t.value=await Ue.admin.getImages()}),Re.eventBus.on("logout",()=>{t.value=[]})}),(s,o)=>(S(),U("div",null,[N(rs),$(" IMAGES "),a("table",Fv,[jv,(S(!0),U(pe,null,Ze(t.value,(i,l)=>(S(),U("tr",{key:l},[a("td",null,ee(i.id),1),a("td",null,ee(i.uploader_user_id||"-"),1),a("td",null,ee(i.created),1),a("td",null,ee(i.filename),1),a("td",null,ee(i.filename_original),1),a("td",null,ee(i.title),1),a("td",null,ee(i.width),1),a("td",null,ee(i.height),1),a("td",null,ee(i.private?"\u2713":"\u2716"),1),a("td",null,[a("span",{onClick:r=>n(i),class:"is-clickable"},"DELETE",8,Wv)])]))),128))])]))}}),Yv={class:"data-table"},Zv=a("tr",null,[a("th",null,"Id"),a("th",null,"Name")],-1),qv=me({__name:"Groups",setup(e){const t=K([]);return Xe(async()=>{Re.getMe()&&(t.value=await Ue.admin.getGroups()),Re.eventBus.on("login",async()=>{t.value=await Ue.admin.getGroups()}),Re.eventBus.on("logout",()=>{t.value=[]})}),(n,s)=>(S(),U("div",null,[N(rs),$(" GROUPS "),a("table",Yv,[Zv,(S(!0),U(pe,null,Ze(t.value,(o,i)=>(S(),U("tr",{key:i},[a("td",null,ee(o.id),1),a("td",null,ee(o.name),1)]))),128))])]))}});(async()=>{Ue.init(),await Re.init(),await Ai.init();const e=ld({history:bf(),routes:[{name:"index",path:"/",component:fh},{name:"new-game",path:"/new-game",component:Cp},{name:"game",path:"/g/:id",component:_v},{name:"replay",path:"/replay/:id",component:Av},{name:"admin",path:"/admin",component:$v},{name:"admin_games",path:"/admin/games",component:Bv},{name:"admin_users",path:"/admin/users",component:Hv},{name:"admin_images",path:"/admin/images",component:Kv},{name:"admin_groups",path:"/admin/groups",component:qv}]});e.beforeEach((n,s)=>{s.name&&document.documentElement.classList.remove(`view-${String(s.name)}`),document.documentElement.classList.add(`view-${String(n.name)}`)});const t=tf(th);t.use(e),t.component("icon",Ov),t.mount("#app")})();
//# sourceMappingURL=index.e5dae302.js.map
